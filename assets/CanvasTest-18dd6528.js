import{_ as qt,S as ls,i as hs,s as cs,e as us,a as fs,b as ds,n as le,d as ps,o as gs}from"./index-5b7226a9.js";import{g as Ti,c as he}from"./_commonjsHelpers-725317a4.js";class J{constructor(t=0,s=0){this.x=0,this.y=0,this.x=t,this.y=s}clone(){return new J(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,s=t){return this.x=t,this.y=s,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return ce.x=0,ce.y=0,ce}}const ce=new J;var ot=(e=>(e.Application="application",e.WebGLPipes="webgl-pipes",e.WebGLPipesAdaptor="webgl-pipes-adaptor",e.WebGLSystem="webgl-system",e.WebGPUPipes="webgpu-pipes",e.WebGPUPipesAdaptor="webgpu-pipes-adaptor",e.WebGPUSystem="webgpu-system",e.CanvasSystem="canvas-system",e.CanvasPipesAdaptor="canvas-pipes-adaptor",e.CanvasPipes="canvas-pipes",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e.MaskEffect="mask-effect",e.BlendMode="blend-mode",e.TextureSource="texture-source",e.Environment="environment",e))(ot||{});const Ce=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},Ut=(e,t)=>Ce(e).priority??t,Ht={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Ce).forEach(t=>{t.type.forEach(s=>this._removeHandlers[s]?.(t))}),this},add(...e){return e.map(Ce).forEach(t=>{t.type.forEach(s=>{const r=this._addHandlers,n=this._queue;r[s]?r[s](t):(n[s]=n[s]||[],n[s].push(t))})}),this},handle(e,t,s){const r=this._addHandlers,n=this._removeHandlers;if(r[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);r[e]=t,n[e]=s;const i=this._queue;return i[e]&&(i[e].forEach(a=>t(a)),delete i[e]),this},handleByMap(e,t){return this.handle(e,s=>{t[s.name]=s.ref},s=>{delete t[s.name]})},handleByNamedList(e,t,s=-1){return this.handle(e,r=>{t.findIndex(i=>i.name===r.name)>=0||(t.push({name:r.name,value:r.ref}),t.sort((i,a)=>Ut(a.value,s)-Ut(i.value,s)))},r=>{const n=t.findIndex(i=>i.name===r.name);n!==-1&&t.splice(n,1)})},handleByList(e,t,s=-1){return this.handle(e,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((n,i)=>Ut(i,s)-Ut(n,s)))},r=>{const n=t.indexOf(r.ref);n!==-1&&t.splice(n,1)})}};function ms(e,t,s){const r=e.length;let n;if(t>=r||s===0)return;s=t+s>r?r-t:s;const i=r-s;for(n=t;n<i;++n)e[n]=e[n+s];e.length=i}var ki={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(s=!1));function n(h,d,c){this.fn=h,this.context=d,this.once=c||!1}function i(h,d,c,g,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var o=new n(c,g||h,f),u=s?s+d:d;return h._events[u]?h._events[u].fn?h._events[u]=[h._events[u],o]:h._events[u].push(o):(h._events[u]=o,h._eventsCount++),h}function a(h,d){--h._eventsCount===0?h._events=new r:delete h._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],c,g;if(this._eventsCount===0)return d;for(g in c=this._events)t.call(c,g)&&d.push(s?g.slice(1):g);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},l.prototype.listeners=function(d){var c=s?s+d:d,g=this._events[c];if(!g)return[];if(g.fn)return[g.fn];for(var f=0,o=g.length,u=new Array(o);f<o;f++)u[f]=g[f].fn;return u},l.prototype.listenerCount=function(d){var c=s?s+d:d,g=this._events[c];return g?g.fn?1:g.length:0},l.prototype.emit=function(d,c,g,f,o,u){var p=s?s+d:d;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,v,b;if(m.fn){switch(m.once&&this.removeListener(d,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,g),!0;case 4:return m.fn.call(m.context,c,g,f),!0;case 5:return m.fn.call(m.context,c,g,f,o),!0;case 6:return m.fn.call(m.context,c,g,f,o,u),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];m.fn.apply(m.context,v)}else{var M=m.length,x;for(b=0;b<M;b++)switch(m[b].once&&this.removeListener(d,m[b].fn,void 0,!0),y){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,c);break;case 3:m[b].fn.call(m[b].context,c,g);break;case 4:m[b].fn.call(m[b].context,c,g,f);break;default:if(!v)for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];m[b].fn.apply(m[b].context,v)}}return!0},l.prototype.on=function(d,c,g){return i(this,d,c,g,!1)},l.prototype.once=function(d,c,g){return i(this,d,c,g,!0)},l.prototype.removeListener=function(d,c,g,f){var o=s?s+d:d;if(!this._events[o])return this;if(!c)return a(this,o),this;var u=this._events[o];if(u.fn)u.fn===c&&(!f||u.once)&&(!g||u.context===g)&&a(this,o);else{for(var p=0,m=[],y=u.length;p<y;p++)(u[p].fn!==c||f&&!u[p].once||g&&u[p].context!==g)&&m.push(u[p]);m.length?this._events[o]=m.length===1?m[0]:m:a(this,o)}return this},l.prototype.removeAllListeners=function(d){var c;return d?(c=s?s+d:d,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,e.exports=l})(ki);var xs=ki.exports;const mt=Ti(xs);var ys={grad:.9,turn:360,rad:360/(2*Math.PI)},pt=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},K=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=Math.pow(10,t)),Math.round(s*e)/s+0},nt=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=1),e>s?s:e>t?e:t},Ai=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},qe=function(e){return{r:nt(e.r,0,255),g:nt(e.g,0,255),b:nt(e.b,0,255),a:nt(e.a)}},ue=function(e){return{r:K(e.r),g:K(e.g),b:K(e.b),a:K(e.a,3)}},vs=/^#([0-9a-f]{3,8})$/i,zt=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ii=function(e){var t=e.r,s=e.g,r=e.b,n=e.a,i=Math.max(t,s,r),a=i-Math.min(t,s,r),l=a?i===t?(s-r)/a:i===s?2+(r-t)/a:4+(t-s)/a:0;return{h:60*(l<0?l+6:l),s:i?a/i*100:0,v:i/255*100,a:n}},Li=function(e){var t=e.h,s=e.s,r=e.v,n=e.a;t=t/360*6,s/=100,r/=100;var i=Math.floor(t),a=r*(1-s),l=r*(1-(t-i)*s),h=r*(1-(1-t+i)*s),d=i%6;return{r:255*[r,l,a,a,h,r][d],g:255*[h,r,r,l,a,a][d],b:255*[a,a,h,r,r,l][d],a:n}},Je=function(e){return{h:Ai(e.h),s:nt(e.s,0,100),l:nt(e.l,0,100),a:nt(e.a)}},Ze=function(e){return{h:K(e.h),s:K(e.s),l:K(e.l),a:K(e.a,3)}},ti=function(e){return Li((s=(t=e).s,{h:t.h,s:(s*=((r=t.l)<50?r:100-r)/100)>0?2*s/(r+s)*100:0,v:r+s,a:t.a}));var t,s,r},Ft=function(e){return{h:(t=Ii(e)).h,s:(n=(200-(s=t.s))*(r=t.v)/100)>0&&n<200?s*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,s,r,n},ws=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ss=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_s=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bs=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Me={string:[[function(e){var t=vs.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?K(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?K(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=_s.exec(e)||bs.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:qe({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=ws.exec(e)||Ss.exec(e);if(!t)return null;var s,r,n=Je({h:(s=t[1],r=t[2],r===void 0&&(r="deg"),Number(s)*(ys[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return ti(n)},"hsl"]],object:[[function(e){var t=e.r,s=e.g,r=e.b,n=e.a,i=n===void 0?1:n;return pt(t)&&pt(s)&&pt(r)?qe({r:Number(t),g:Number(s),b:Number(r),a:Number(i)}):null},"rgb"],[function(e){var t=e.h,s=e.s,r=e.l,n=e.a,i=n===void 0?1:n;if(!pt(t)||!pt(s)||!pt(r))return null;var a=Je({h:Number(t),s:Number(s),l:Number(r),a:Number(i)});return ti(a)},"hsl"],[function(e){var t=e.h,s=e.s,r=e.v,n=e.a,i=n===void 0?1:n;if(!pt(t)||!pt(s)||!pt(r))return null;var a=function(l){return{h:Ai(l.h),s:nt(l.s,0,100),v:nt(l.v,0,100),a:nt(l.a)}}({h:Number(t),s:Number(s),v:Number(r),a:Number(i)});return Li(a)},"hsv"]]},ei=function(e,t){for(var s=0;s<t.length;s++){var r=t[s][0](e);if(r)return[r,t[s][1]]}return[null,void 0]},Cs=function(e){return typeof e=="string"?ei(e.trim(),Me.string):typeof e=="object"&&e!==null?ei(e,Me.object):[null,void 0]},fe=function(e,t){var s=Ft(e);return{h:s.h,s:nt(s.s+100*t,0,100),l:s.l,a:s.a}},de=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},ii=function(e,t){var s=Ft(e);return{h:s.h,s:s.s,l:nt(s.l+100*t,0,100),a:s.a}},Pe=function(){function e(t){this.parsed=Cs(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return K(de(this.rgba),2)},e.prototype.isDark=function(){return de(this.rgba)<.5},e.prototype.isLight=function(){return de(this.rgba)>=.5},e.prototype.toHex=function(){return t=ue(this.rgba),s=t.r,r=t.g,n=t.b,a=(i=t.a)<1?zt(K(255*i)):"","#"+zt(s)+zt(r)+zt(n)+a;var t,s,r,n,i,a},e.prototype.toRgb=function(){return ue(this.rgba)},e.prototype.toRgbString=function(){return t=ue(this.rgba),s=t.r,r=t.g,n=t.b,(i=t.a)<1?"rgba("+s+", "+r+", "+n+", "+i+")":"rgb("+s+", "+r+", "+n+")";var t,s,r,n,i},e.prototype.toHsl=function(){return Ze(Ft(this.rgba))},e.prototype.toHslString=function(){return t=Ze(Ft(this.rgba)),s=t.h,r=t.s,n=t.l,(i=t.a)<1?"hsla("+s+", "+r+"%, "+n+"%, "+i+")":"hsl("+s+", "+r+"%, "+n+"%)";var t,s,r,n,i},e.prototype.toHsv=function(){return t=Ii(this.rgba),{h:K(t.h),s:K(t.s),v:K(t.v),a:K(t.a,3)};var t},e.prototype.invert=function(){return ht({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ht(fe(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ht(fe(this.rgba,-t))},e.prototype.grayscale=function(){return ht(fe(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ht(ii(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ht(ii(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ht({r:(s=this.rgba).r,g:s.g,b:s.b,a:t}):K(this.rgba.a,3);var s},e.prototype.hue=function(t){var s=Ft(this.rgba);return typeof t=="number"?ht({h:t,s:s.s,l:s.l,a:s.a}):K(s.h)},e.prototype.isEqual=function(t){return this.toHex()===ht(t).toHex()},e}(),ht=function(e){return e instanceof Pe?e:new Pe(e)},si=[],Ms=function(e){e.forEach(function(t){si.indexOf(t)<0&&(t(Pe,Me),si.push(t))})};function Ps(e,t){var s={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var n in s)r[s[n]]=n;var i={};e.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,h,d=r[this.toHex()];if(d)return d;if(a?.closest){var c=this.toRgb(),g=1/0,f="black";if(!i.length)for(var o in s)i[o]=new e(s[o]).toRgb();for(var u in s){var p=(l=c,h=i[u],Math.pow(l.r-h.r,2)+Math.pow(l.g-h.g,2)+Math.pow(l.b-h.b,2));p<g&&(g=p,f=u)}return f}},t.string.push([function(a){var l=a.toLowerCase(),h=l==="transparent"?"#0000":s[l];return h?new e(h).toRgb():null},"name"])}Ms([Ps]);const bt=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof bt)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._normalize(e),this._value=this._cloneSource(e))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,i)=>n===t[i]);if(e!==null&&t!==null){const n=Object.keys(e),i=Object.keys(t);return n.length!==i.length?!1:n.every(a=>e[a]===t[a])}return e===t}toRgba(){const[e,t,s,r]=this._components;return{r:e,g:t,b:s,a:r}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb,e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e=e||this._arrayRgba;const[t,s,r,n]=this._components;return e[0]=t,e[1]=s,e[2]=r,e[3]=n,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb;const[t,s,r]=this._components;return e[0]=t,e[1]=s,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,r,n]=bt._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=r,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return t&&(s=s*e+.5|0,r=r*e+.5|0,n=n*e+.5|0),(e*255<<24)+(s<<16)+(r<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,r,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const i=e;t=(i>>16&255)/255,s=(i>>8&255)/255,r=(i&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,r,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,r,n=255]=e,t/=255,s/=255,r/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=bt.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const i=ht(e);i.isValid()&&({r:t,g:s,b:r,a:n}=i.rgba,t/=255,s/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=r,this._components[3]=n,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((r,n)=>{e[n]=Math.min(Math.max(r,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof bt||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};let $=bt;$.shared=new bt;$._temp=new bt;$.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;const Ts=Math.PI*2,ks=180/Math.PI,As=Math.PI/180;class O{constructor(t=1,s=0,r=0,n=1,i=0,a=0){this.array=null,this.a=t,this.b=s,this.c=r,this.d=n,this.tx=i,this.ty=a}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,s,r,n,i,a){return this.a=t,this.b=s,this.c=r,this.d=n,this.tx=i,this.ty=a,this}toArray(t,s){this.array||(this.array=new Float32Array(9));const r=s||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,s){s=s||new J;const r=t.x,n=t.y;return s.x=this.a*r+this.c*n+this.tx,s.y=this.b*r+this.d*n+this.ty,s}applyInverse(t,s){s=s||new J;const r=this.a,n=this.b,i=this.c,a=this.d,l=this.tx,h=this.ty,d=1/(r*a+i*-n),c=t.x,g=t.y;return s.x=a*d*c+-i*d*g+(h*i-l*a)*d,s.y=r*d*g+-n*d*c+(-h*r+l*n)*d,s}translate(t,s){return this.tx+=t,this.ty+=s,this}scale(t,s){return this.a*=t,this.d*=s,this.c*=t,this.b*=s,this.tx*=t,this.ty*=s,this}rotate(t){const s=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,a=this.tx;return this.a=n*s-this.b*r,this.b=n*r+this.b*s,this.c=i*s-this.d*r,this.d=i*r+this.d*s,this.tx=a*s-this.ty*r,this.ty=a*r+this.ty*s,this}append(t){const s=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*s+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*s+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*s+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}appendFrom(t,s){const r=t.a,n=t.b,i=t.c,a=t.d,l=t.tx,h=t.ty,d=s.a,c=s.b,g=s.c,f=s.d;return this.a=r*d+n*g,this.b=r*c+n*f,this.c=i*d+a*g,this.d=i*c+a*f,this.tx=l*d+h*g+s.tx,this.ty=l*c+h*f+s.ty,this}setTransform(t,s,r,n,i,a,l,h,d){return this.a=Math.cos(l+d)*i,this.b=Math.sin(l+d)*i,this.c=-Math.sin(l-h)*a,this.d=Math.cos(l-h)*a,this.tx=t-(r*this.a+n*this.c),this.ty=s-(r*this.b+n*this.d),this}prepend(t){const s=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty,this}decompose(t){const s=this.a,r=this.b,n=this.c,i=this.d,a=t.pivot,l=-Math.atan2(-n,i),h=Math.atan2(r,s),d=Math.abs(l+h);return d<1e-5||Math.abs(Ts-d)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=h),t.scale.x=Math.sqrt(s*s+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(a.x*s+a.y*n),t.position.y=this.ty+(a.x*r+a.y*i),t}invert(){const t=this.a,s=this.b,r=this.c,n=this.d,i=this.tx,a=t*n-s*r;return this.a=n/a,this.b=-s/a,this.c=-r/a,this.d=t/a,this.tx=(r*this.ty-n*i)/a,this.ty=-(t*this.ty-s*i)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new O;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Ls.identity()}static get shared(){return Is.identity()}}const Is=new O,Ls=new O;class st{constructor(t,s,r){this._x=s||0,this._y=r||0,this._observer=t}clone(t){return new st(t??this._observer,this._x,this._y)}set(t=0,s=t){return(this._x!==t||this._y!==s)&&(this._x=t,this._y=s,this._observer.onUpdate()),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer.onUpdate()),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer.onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer.onUpdate(this))}}const pe={default:-1};function ut(e="default"){return pe[e]===void 0&&(pe[e]=-1),++pe[e]}const ni={},z="8.0.0";function G(e,t,s=3){if(ni[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(r=r.split(`
`).splice(s).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(r))),ni[t]=!0}const Es={allowChildren:!0,removeChildren(e=0,t){const s=t??this.children.length,r=s-e,n=[];if(r>0&&r<=s){for(let i=s-1;i>=e;i--){const a=this.children[i];a&&(this.layerGroup&&this.layerGroup.removeChild(a),n.push(a),a.parent=null)}ms(this.children,e,s);for(let i=0;i<n.length;++i)this.emit("childRemoved",n[i],this,i),n[i].emit("removed",this);return n}else if(r===0&&this.children.length===0)return n;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(e){const t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(e,t){this.allowChildren||G(z,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:s}=this;if(t<0||t>s.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${s.length}`);if(e.parent){const r=e.parent.children.indexOf(e);if(e.parent===this&&r===t)return e;r!==-1&&e.parent.children.splice(r,1)}return t===s.length?s.push(e):s.splice(t,0,e),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15,this.layerGroup&&this.layerGroup.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",e,this,t),e.emit("added",this),e},swapChildren(e,t){if(e===t)return;const s=this.getChildIndex(e),r=this.getChildIndex(t);this.children[s]=t,this.children[r]=e},removeFromParent(){this.parent?.removeChild(this)}};class Fs{constructor(t){this.pipe="filter",this.priority=1,this.filters=t?.filters,this.filterArea=t?.filterArea}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}const Ei=[];function Rs(e,t){const s=Ei.pop()||new Fs;return s.filters=e,s.filterArea=t,s}function Bs(e){e.filters=null,Ei.push(e)}class Ws{constructor(t,s){this._pool=[],this._count=0,this._index=0,this._classType=t,s&&this.prepopulate(s)}prepopulate(t){for(let s=0;s<t;s++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let s;return this._index>0?s=this._pool[--this._index]:s=new this._classType,s.init?.(t),s}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}class Os{constructor(){this._poolsByClass=new Map}prepopulate(t,s){this.getPool(t).prepopulate(s)}get(t,s){return this.getPool(t).get(s)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Ws(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(s=>{const r=t[s._classType.name]?s._classType.name+s._classType.ID:s._classType.name;t[r]={free:s.totalFree,used:s.totalUsed,size:s.totalSize}}),t}}const Jt=new Os;class Vs{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let s=0;s<this._tests.length;s++){const r=this._tests[s];if(r.test(t))return Jt.get(r.maskClass,t)}return t}returnMaskEffect(t){Jt.return(t)}}const Te=new Vs;Ht.handleByList(ot.MaskEffect,Te._effectClasses);const Hs={_mask:null,_filters:null,effects:[],addEffect(e){this.effects.indexOf(e)===-1&&(this.effects.push(e),this.effects.sort((s,r)=>s.priority-r.priority),!this.isLayerRoot&&this.layerGroup&&(this.layerGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(e){const t=this.effects.indexOf(e);t!==-1&&(this.effects.splice(t,1),!this.isLayerRoot&&this.layerGroup&&(this.layerGroup.structureDidChange=!0),this._updateIsSimple())},set mask(e){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask===e||(this._mask.effect&&(this.removeEffect(this._mask.effect),Te.returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=e,e==null))return;const t=Te.getMaskEffect(e);this._mask.effect=t,this.addEffect(t)},get mask(){return this._mask?.mask},set filters(e){if(!Array.isArray(e)&&e!==null&&(e=[e]),this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filters===e||(this._filters.effect&&(this.removeEffect(this._filters.effect),Bs(this._filters.effect),this._filters.effect=null),this._filters.filters=e,!e))return;const t=Rs(e,this.filterArea);this._filters.effect=t,this.addEffect(t)},get filters(){return this._filters?.filters},set filterArea(e){this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filterArea=e},get filterArea(){return this._filters?.filterArea}},Ds={label:null,get name(){return G(z,"Container.name property has been removed, use Container.label instead"),this.label},set name(e){G(z,"Container.name property has been removed, use Container.label instead"),this.label=e},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){const s=this.children;for(let r=0;r<s.length;r++){const n=s[r];if(n.label===e||e instanceof RegExp&&e.test(n.label))return n}if(t)for(let r=0;r<s.length;r++){const i=s[r].getChildByLabel(e,!0);if(i)return i}return null},getChildrenByLabel(e,t=!1,s=[]){const r=this.children;for(let n=0;n<r.length;n++){const i=r[n];(i.label===e||e instanceof RegExp&&e.test(i.label))&&s.push(i)}if(t)for(let n=0;n<r.length;n++)r[n].getChildrenByLabel(e,!0,s);return s}},Nt=[new J,new J,new J,new J];class Z{constructor(t=0,s=0,r=0,n=0){this.type="rectangle",this.x=Number(t),this.y=Number(s),this.width=Number(r),this.height=Number(n)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Z(0,0,0,0)}clone(){return new Z(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,s){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height}intersects(t,s){if(!s){const w=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=w)return!1;const C=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>C}const r=this.left,n=this.right,i=this.top,a=this.bottom;if(n<=r||a<=i)return!1;const l=Nt[0].set(t.left,t.top),h=Nt[1].set(t.left,t.bottom),d=Nt[2].set(t.right,t.top),c=Nt[3].set(t.right,t.bottom);if(d.x<=l.x||h.y<=l.y)return!1;const g=Math.sign(s.a*s.d-s.b*s.c);if(g===0||(s.apply(l,l),s.apply(h,h),s.apply(d,d),s.apply(c,c),Math.max(l.x,h.x,d.x,c.x)<=r||Math.min(l.x,h.x,d.x,c.x)>=n||Math.max(l.y,h.y,d.y,c.y)<=i||Math.min(l.y,h.y,d.y,c.y)>=a))return!1;const f=g*(h.y-l.y),o=g*(l.x-h.x),u=f*r+o*i,p=f*n+o*i,m=f*r+o*a,y=f*n+o*a;if(Math.max(u,p,m,y)<=f*l.x+o*l.y||Math.min(u,p,m,y)>=f*c.x+o*c.y)return!1;const v=g*(l.y-d.y),b=g*(d.x-l.x),M=v*r+b*i,x=v*n+b*i,S=v*r+b*a,_=v*n+b*a;return!(Math.max(M,x,S,_)<=v*l.x+b*l.y||Math.min(M,x,S,_)>=v*c.x+b*c.y)}pad(t=0,s=t){return this.x-=t,this.y-=s,this.width+=t*2,this.height+=s*2,this}fit(t){const s=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=s,this.width=Math.max(r-s,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,s=.001){const r=Math.ceil((this.x+this.width-s)*t)/t,n=Math.ceil((this.y+this.height-s)*t)/t;return this.x=Math.floor((this.x+s)*t)/t,this.y=Math.floor((this.y+s)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const s=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=s,this.width=r-s,this.y=n,this.height=i-n,this}getBounds(t){return t=t||new Z,t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class xt{constructor(t=1/0,s=1/0,r=-1/0,n=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this._matrixStack=[],this.matrix=new O,this.minX=t,this.minY=s,this.maxX=r,this.maxY=n}get rectangle(){this._rectangle||(this._rectangle=new Z);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this._matrixStack.length=0,this.matrix.identity()}pushMatrix(t){this._matrixStack.push(t),this._matrixStack.length>1?(this.matrix.copyFrom(this._matrixStack[this._matrixStack.length-2]),this.matrix.append(t)):this.matrix.copyFrom(t)}popMatrix(){this._matrixStack.pop(),this._matrixStack.length>1?(this.matrix.copyFrom(this._matrixStack[this._matrixStack.length-2]),this.matrix.append(this._matrixStack[this._matrixStack.length-1])):this._matrixStack.length===1?this.matrix.copyFrom(this._matrixStack[0]):this.matrix.identity()}setMatrix(t){this.matrix.copyFrom(t)}set(t,s,r,n){this.minX=t,this.minY=s,this.maxX=r,this.maxY=n}addFrame(t,s,r,n){const i=this.matrix,a=i.a,l=i.b,h=i.c,d=i.d,c=i.tx,g=i.ty;let f=this.minX,o=this.minY,u=this.maxX,p=this.maxY,m=a*t+h*s+c,y=l*t+d*s+g;f=m<f?m:f,o=y<o?y:o,u=m>u?m:u,p=y>p?y:p,m=a*r+h*s+c,y=l*r+d*s+g,f=m<f?m:f,o=y<o?y:o,u=m>u?m:u,p=y>p?y:p,m=a*t+h*n+c,y=l*t+d*n+g,f=m<f?m:f,o=y<o?y:o,u=m>u?m:u,p=y>p?y:p,m=a*r+h*n+c,y=l*r+d*n+g,f=m<f?m:f,o=y<o?y:o,u=m>u?m:u,p=y>p?y:p,this.minX=f,this.minY=o,this.maxX=u,this.maxY=p}addRect(t){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height)}addBounds(t){this.addFrame(t.minX,t.minY,t.maxX,t.maxY)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const s=this.minX,r=this.minY,n=this.maxX,i=this.maxY,{a,b:l,c:h,d,tx:c,ty:g}=t;let f=a*s+h*r+c,o=l*s+d*r+g;this.minX=f,this.minY=o,this.maxX=f,this.maxY=o,f=a*n+h*r+c,o=l*n+d*r+g,this.minX=f<this.minX?f:this.minX,this.minY=o<this.minY?o:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=o>this.maxY?o:this.maxY,f=a*s+h*i+c,o=l*s+d*i+g,this.minX=f<this.minX?f:this.minX,this.minY=o<this.minY?o:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=o>this.maxY?o:this.maxY,f=a*n+h*i+c,o=l*n+d*i+g,this.minX=f<this.minX?f:this.minX,this.minY=o<this.minY?o:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=o>this.maxY?o:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}pad(t,s=t){return this.minX-=t,this.maxX+=t,this.minY-=s,this.maxY+=s,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new xt(this.minX,this.minY,this.maxX,this.maxY)}scale(t,s=t){return this.minX*=t,this.minY*=s,this.maxX*=t,this.maxY*=s,this}get x(){return this.minX}get y(){return this.minY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,s,r){let n=this.minX,i=this.minY,a=this.maxX,l=this.maxY;const h=this.matrix,d=h.a,c=h.b,g=h.c,f=h.d,o=h.tx,u=h.ty;for(let p=s;p<r;p+=2){const m=t[p],y=t[p+1],v=d*m+g*y+o,b=c*m+f*y+u;n=v<n?v:n,i=b<i?b:i,a=v>a?v:a,l=b>l?b:l}this.minX=n,this.minY=i,this.maxX=a,this.maxY=l}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}function Wt(e,t){const s=t._scale,r=t._pivot,n=t._position,i=s._x,a=s._y,l=r._x,h=r._y;e.a=t._cx*i,e.b=t._sx*i,e.c=t._cy*a,e.d=t._sy*a,e.tx=n._x-(l*e.a+h*e.c),e.ty=n._y-(l*e.b+h*e.d)}function $s(e,t,s){s.clear();let r;return e.parent?t?r=e.parent.worldTransform:r=Zt(e,new O):r=O.IDENTITY,Fi(e,s,r,t),s.isValid||s.set(0,0,0,0),s}function Fi(e,t,s,r){if(!e.visible||!e.measurable)return;let n;r?n=e.worldTransform:(e.didChange&&Wt(e.localTransform,e),n=O.shared.appendFrom(e.localTransform,s).clone());const i=t,a=!!e.effects.length;a&&(t=t.clone()),e.view&&(t.setMatrix(n),e.view.addBounds(t));for(let l=0;l<e.children.length;l++)Fi(e.children[l],t,n,r);if(a){for(let l=0;l<e.effects.length;l++)e.effects[l].addBounds?.(t);i.setMatrix(O.IDENTITY),i.addBounds(t)}}function Zt(e,t){const s=e.parent;return s&&(Zt(s,t),s.didChange&&Wt(s.localTransform,s),t.append(s.localTransform)),t}let ge=0;const ri=500;function ct(...e){ge!==ri&&(ge++,ge===ri?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...e))}function It(e,t,s){t.clear(),s||(s=new O),e.view&&(t.setMatrix(s),e.view.addBounds(t));for(let r=0;r<e.children.length;r++)Ri(e.children[r],t,s,e);return t.isValid||t.set(0,0,0,0),t}function Ri(e,t,s,r){if(!e.visible||!e.measurable)return;e.didChange&&Wt(e.localTransform,e);const n=e.localTransform,i=O.shared.appendFrom(n,s).clone(),a=t,l=!!e.effects.length;l&&(t=new xt),e.view&&(t.setMatrix(i),e.view.addBounds(t));for(let h=0;h<e.children.length;h++)Ri(e.children[h],t,i,r);if(l){for(let h=0;h<e.effects.length;h++)e.effects[h].addLocalBounds?.(t,r);a.setMatrix(O.IDENTITY),a.addBounds(t)}}const Lt=new xt,Et=new O,Gs={get width(){return Math.abs(this.scale.x*It(this,Lt,Et).width)},set width(e){const t=It(this,Lt,Et).width,s=Math.sign(this.scale.x)||1;t!==0?this.scale.x=e/t*s:this.scale.x=s},get height(){return Math.abs(this.scale.y*It(this,Lt,Et).height)},set height(e){const t=It(this,Lt,Et).height,s=Math.sign(this.scale.y)||1;t!==0?this.scale.y=e/t*s:this.scale.y=s},getLocalBounds(e){const t=It(this,new xt,Et);return e?e.copyFromBounds(t):t.rectangle.clone()},getBounds(e,t){const s=$s(this,e,Lt);return t?t.copyFromBounds(s):s.rectangle.clone()}},Us={_onRender:null,set onRender(e){const t=this.layerGroup;if(!e){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=e},get onRender(){return this._onRender}},zs={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Ns))}};function Ns(e,t){return e._zIndex-t._zIndex}const Ys={getGlobalPosition(e=new J,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,s=!1){if(!s){this.didChange&&Wt(this.localTransform,this);const r=Zt(this,new O);return r.append(this.localTransform),r.apply(e,t)}return this.worldTransform.apply(e,t)},toLocal(e,t,s,r){if(t&&(e=t.toGlobal(e,s,r)),!r){this.didChange&&Wt(this.localTransform,this);const n=Zt(this,new O);return n.append(this.localTransform),n.applyInverse(e,s)}return this.worldTransform.applyInverse(e,s)}};class Xs{constructor(){this.uid=ut("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}class js{constructor(t){this.renderPipeId="layer",this.root=null,this.canBundle=!1,this.layerGroupParent=null,this.layerGroupChildren=[],this._children=[],this.worldTransform=new O,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Xs,this._onRenderContainers=[],this.root=t,this.addChild(t)}get localTransform(){return this.root.localTransform}get layerTransform(){return this.root.layerTransform}addLayerGroupChild(t){t.layerGroupParent&&t.layerGroupParent._removeLayerGroupChild(t),t.layerGroupParent=this,this.onChildUpdate(t.root),this.layerGroupChildren.push(t)}_removeLayerGroupChild(t){t.root.didChange&&this._removeChildFromUpdate(t.root);const s=this.layerGroupChildren.indexOf(t);s>-1&&this.layerGroupChildren.splice(s,1),t.layerGroupParent=null}addChild(t){if(this.structureDidChange=!0,t!==this.root&&(this._children.push(t),t.updateTick=-1,t.parent===this.root?t.relativeLayerDepth=1:t.relativeLayerDepth=t.parent.relativeLayerDepth+1,t._onRender&&this.addOnRender(t)),t.layerGroup){if(t.layerGroup.root===t){this.addLayerGroupChild(t.layerGroup);return}}else t.layerGroup=this,t.didChange=!0;const s=t.children;t.isLayerRoot||this.onChildUpdate(t);for(let r=0;r<s.length;r++)this.addChild(s[r])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&this.removeOnRender(t),t.layerGroup.root!==t){const r=t.children;for(let n=0;n<r.length;n++)this.removeChild(r[n]);t.didChange&&t.layerGroup._removeChildFromUpdate(t),t.layerGroup=null}else this._removeLayerGroupChild(t.layerGroup);const s=this._children.indexOf(t);s>-1&&this._children.splice(s,1)}onChildUpdate(t){let s=this.childrenToUpdate[t.relativeLayerDepth];s||(s=this.childrenToUpdate[t.relativeLayerDepth]={index:0,list:[]}),s.list[s.index++]=t}updateRenderable(t){t.layerVisibleRenderable<3||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.view.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}_removeChildFromUpdate(t){const s=this.childrenToUpdate[t.relativeLayerDepth];if(!s)return;const r=s.list.indexOf(t);r>-1&&s.list.splice(r,1),s.index--}get isRenderable(){return this.root.localVisibleRenderable===3&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){this._onRenderContainers.forEach(t=>{t._onRender()})}}function Bi(e){return Object.fromEntries(Object.entries(e).filter(([t,s])=>s!==void 0))}const ai=new st(null),me=new st(null),xe=new st(null,1,1),oi=1,Ks=2,li=4;class rt extends mt{constructor(t={}){super(),this.uid=ut("renderable"),this._updateFlags=15,this.isLayerRoot=!1,this.layerGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeLayerDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new O,this.layerTransform=new O,this.destroyed=!1,this._position=new st(this,0,0),this._scale=xe,this._pivot=me,this._skew=ai,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.layerAlpha=1,this.layerColor=16777215,this.layerColorAlpha=4294967295,this.localBlendMode="inherit",this.layerBlendMode="normal",this.localVisibleRenderable=3,this.layerVisibleRenderable=3,t.view&&(this.view=t.view,this.view.owner=this,t.view=void 0),Object.assign(this,Bi(t)),this.children=[],t.children?.forEach(s=>this.addChild(s)),this.effects=[],t.effects?.forEach(s=>this.addEffect(s))}static mixin(t){Object.defineProperties(rt.prototype,Object.getOwnPropertyDescriptors(t))}addChild(...t){if(this.allowChildren||G(z,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let r=0;r<t.length;r++)this.addChild(t[r]);return t[0]}const s=t[0];return s.parent===this?(this.children.splice(this.children.indexOf(s),1),this.children.push(s),this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),s):(s.parent&&s.parent.removeChild(s),this.children.push(s),this.sortableChildren&&(this.sortDirty=!0),s.parent=this,s.didChange=!0,s.didViewUpdate=!1,s._updateFlags=15,this.layerGroup&&this.layerGroup.addChild(s),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this),s._zIndex!==0&&s.depthOfChildModified(),s)}removeChild(...t){if(t.length>1){for(let n=0;n<t.length;n++)this.removeChild(t[n]);return t[0]}const s=t[0],r=this.children.indexOf(s);return r>-1&&(this.children.splice(r,1),this.layerGroup&&this.layerGroup.removeChild(s)),s.parent=null,this.emit("childRemoved",s,this,r),s.emit("removed",this),s}onUpdate(t){if(t&&t===this._skew&&this._updateSkew(),!this.didChange)if(this.didChange=!0,this.isLayerRoot){const s=this.layerGroup.layerGroupParent;s&&s.onChildUpdate(this)}else this.layerGroup&&this.layerGroup.onChildUpdate(this)}onViewUpdate(){this.didViewUpdate||(this.didViewUpdate=!0,this.layerGroup&&this.layerGroup.onChildViewUpdate(this))}set layer(t){if(this.isLayerRoot&&t===!1)throw new Error("[Pixi] cannot undo a layer just yet");t&&this.enableLayer()}get layer(){return this.isLayerRoot}enableLayer(){if(this.layerGroup&&this.layerGroup.root===this)return;this.isLayerRoot=!0;const t=this.layerGroup;if(t&&t.removeChild(this),this.layerGroup=new js(this),t){for(let s=0;s<t.layerGroupChildren.length;s++){const r=t.layerGroupChildren[s];let n=r.root;for(;n;){if(n===this){this.layerGroup.addLayerGroupChild(r);break}n=n.parent}}t.addLayerGroupChild(this.layerGroup)}this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.isLayerRoot&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new O),this.layerGroup&&(this.isLayerRoot?this._worldTransform.copyFrom(this.layerGroup.worldTransform):this._worldTransform.appendFrom(this.layerTransform,this.layerGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.onUpdate(this._skew))}get angle(){return this.rotation*ks}set angle(t){this.rotation=t*As}get pivot(){return this._pivot===me&&(this._pivot=new st(this,0,0)),this._pivot}set pivot(t){this._pivot===me&&(this._pivot=new st(this,0,0)),this._pivot.copyFrom(t)}get skew(){return this._skew===ai&&(this._skew=new st(this,0,0)),this._skew}get scale(){return this._scale===xe&&(this._scale=new st(this,1,1)),this._scale}set scale(t){this._scale===xe&&(this._scale=new st(this,0,0)),this._scale.copyFrom(t)}_updateSkew(){const t=this._rotation,s=this._skew;this._cx=Math.cos(t+s._y),this._sx=Math.sin(t+s._y),this._cy=-Math.sin(t-s._x),this._sy=Math.cos(t-s._x)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=oi,this.onUpdate())}get alpha(){return this.localAlpha}set tint(t){const r=$.shared.setValue(t??16777215).toBgrNumber();r!==this.localColor&&(this.localColor=r,this._updateFlags|=oi,this.onUpdate())}get tint(){const t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this._updateFlags|=Ks,this.localBlendMode=t,this.onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localVisibleRenderable&2)}set visible(t){const s=t?1:0;(this.localVisibleRenderable&2)>>1!==s&&(this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this._updateFlags|=li,this.localVisibleRenderable=this.localVisibleRenderable&1|s<<1,this.onUpdate())}get renderable(){return!!(this.localVisibleRenderable&1)}set renderable(t){const s=t?1:0;(this.localVisibleRenderable&1)!==s&&(this.localVisibleRenderable=this.localVisibleRenderable&2|s,this._updateFlags|=li,this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this.onUpdate())}get isRenderable(){return this.localVisibleRenderable===3&&this.layerAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.isLayerRoot&&(this.layerGroup.proxyRenderable=null),this.emit("destroyed"),this.removeAllListeners();const s=typeof t=="boolean"?t:t?.children,r=this.removeChildren(0,this.children.length);if(s)for(let n=0;n<r.length;++n)r[n].destroy(t);this.view&&(this.view.destroy(t),this.view.owner=null)}}rt.mixin(Es);rt.mixin(Ys);rt.mixin(Us);rt.mixin(Gs);rt.mixin(Hs);rt.mixin(Ds);rt.mixin(zs);const Qs={extension:{type:ot.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await qt(()=>import("./browserAll-284b545b.js"),["assets/browserAll-284b545b.js","assets/init-42b00ba9.js","assets/CanvasSource-e2ba726f.js","assets/index-5b7226a9.js","assets/index-0d2542d7.css","assets/_commonjsHelpers-725317a4.js"])}},qs={extension:{type:ot.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await qt(()=>import("./webworkerAll-7d0d8d24.js"),["assets/webworkerAll-7d0d8d24.js","assets/init-42b00ba9.js","assets/CanvasSource-e2ba726f.js","assets/index-5b7226a9.js","assets/index-0d2542d7.css","assets/_commonjsHelpers-725317a4.js"])}},ke=[];Ht.handleByNamedList(ot.Environment,ke);Ht.add(Qs,qs);async function Js(e){if(e)for(let t=0;t<ke.length;t++){const s=ke[t];if(s.value.test()){await s.value.load();return}}}const Zs={createCanvas:(e,t)=>{const s=document.createElement("canvas");return s.width=e,s.height=t,s},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")};let hi=Zs;const lt={get(){return hi},set(e){hi=e}};class tn{constructor(t){this.items=[],this._name=t}emit(t,s,r,n,i,a,l,h){const{name:d,items:c}=this;for(let g=0,f=c.length;g<f;g++)c[g][d](t,s,r,n,i,a,l,h);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const s=this.items.indexOf(t);return s!==-1&&this.items.splice(s,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const en=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],Wi=class{constructor(e){this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name;const t=[...en,...e.runners??[]];this._addRunners(...t),this._addSystems(e.systems),this._addPipes(e.renderPipes,e.renderPipeAdaptors)}async init(e={}){for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...Wi.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof rt&&(s={container:s},t&&(G(z,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.texture),s.target===this.view.texture&&(this._lastObjectRendered=s.container),s.clearColor){const r=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=r?s.clearColor:$.shared.setValue(s.clearColor).toArray()}this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(e,t,s){this.view.resize(e,t,s)}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frameWidth}get height(){return this.view.texture.frameHeight}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new tn(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const r in this.runners)this.runners[r].add(s);return this}_addPipes(e,t){const s=t.reduce((r,n)=>(r[n.name]=n.value,r),{});e.forEach(r=>{const n=r.value,i=r.name,a=s[i];this.renderPipes[i]=new n(this,a?new a:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}};let Ve=Wi;Ve.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Yt;function sn(e){return Yt!==void 0||(Yt=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:e??Ve.defaultOptions.failIfMajorPerformanceCaveat};try{if(!lt.get().getWebGLRenderingContext())return!1;let r=lt.get().createCanvas().getContext("webgl2",t);const n=!!r?.getContextAttributes()?.stencil;if(r){const i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch{return!1}})()),Yt}let Xt;async function nn(e={}){return Xt!==void 0||(Xt=await(async()=>{if(!lt.get().getNavigator().gpu)return!1;try{return await(await navigator.gpu.requestAdapter(e)).requestDevice(),!0}catch{return!1}})()),Xt}const ci=["webgpu","webgl","canvas"];async function Oi(e){let t=[];e.preference?(t.push(e.preference),ci.forEach(i=>{i!==e.preference&&t.push(i)})):t=ci.slice();let s;await Js(e.manageImports??!0);let r={};for(let i=0;i<t.length;i++){const a=t[i];if(a==="webgpu"&&await nn()){const{WebGPURenderer:l}=await qt(()=>import("./WebGPURenderer-54fe2226.js"),["assets/WebGPURenderer-54fe2226.js","assets/SharedSystems-be3b2ea9.js","assets/CanvasSource-e2ba726f.js","assets/_commonjsHelpers-725317a4.js","assets/index-5b7226a9.js","assets/index-0d2542d7.css"]);s=l,r={...e,...e.webgpu};break}else if(a==="webgl"&&sn(e.failIfMajorPerformanceCaveat??Ve.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:l}=await qt(()=>import("./WebGLRenderer-1de4cb72.js"),["assets/WebGLRenderer-1de4cb72.js","assets/SharedSystems-be3b2ea9.js","assets/CanvasSource-e2ba726f.js","assets/_commonjsHelpers-725317a4.js","assets/index-5b7226a9.js","assets/index-0d2542d7.css"]);s=l,r={...e,...e.webgl};break}else if(a==="canvas"){r={...e};break}}delete r.webgpu,delete r.webgl;const n=new s;return await n.init(r),n}const Ae=class{constructor(){this.stage=new rt}async init(e){e={...e},this.renderer=await Oi(e),Ae._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1){const t=Ae._plugins.slice(0);t.reverse(),t.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let He=Ae;He._plugins=[];Ht.handleByList(ot.Application,He._plugins);const rn=(e,t,s=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(r=>typeof r=="string"||s?t(r):r):e);class an{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const s=this._cache.get(t);return s||ct(`[Assets] Asset id ${t} was not found in the Cache`),s}set(t,s){const r=rn(t);let n;for(let h=0;h<this.parsers.length;h++){const d=this.parsers[h];if(d.test(s)){n=d.getCacheableAssets(r,s);break}}const i=new Map(Object.entries(n||{}));n||r.forEach(h=>{i.set(h,s)});const a=[...i.keys()],l={cacheKeys:a,keys:r};r.forEach(h=>{this._cacheMap.set(h,l)}),a.forEach(h=>{this._cache.has(h)&&this._cache.get(h)!==s&&ct("[Cache] already has key:",h),this._cache.set(h,i.get(h))})}remove(t){if(!this._cacheMap.has(t)){ct(`[Assets] Asset id ${t} was not found in the Cache`);return}const s=this._cacheMap.get(t);s.cacheKeys.forEach(n=>{this._cache.delete(n)}),s.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const et=new an,Vi=()=>{},Ie=[];Ht.handleByList(ot.TextureSource,Ie);function on(e={}){for(let t=0;t<Ie.length;t++){const s=Ie[t];if(s.test(e.resource))return new s(e)}throw new Error(`Could not find a source type for resource: ${e.resource}`)}function ln(e={},t=!1){const{resource:s}=e;if(!t&&et.has(s))return et.get(s);const r=new U({source:on(e)});return r.on("destroy",()=>{et.has(s)&&et.remove(s)}),t||et.set(s,r),r}const ye=Object.create(null),ui=Object.create(null);function hn(e,t){let s=ui[e];return s===void 0&&(ye[t]===void 0&&(ye[t]=1),ui[e]=s=ye[t]++),s}const Hi=class extends mt{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,e={...Hi.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){G("8","TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=hn(e,"sampler"),this._resourceId}destroy(){this.emit("destroy",this),this.removeAllListeners()}};let Le=Hi;Le.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};const Di=class extends mt{constructor(e={}){super(),this.options=e,this.uid=ut("textureSource"),this.label="",this._resourceType="textureSource",this._resourceId=ut("textureResource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this.depthStencil=!0,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Di.defaultOptions,...e},this.label??(this.label=e.label),this.resource=e.resource,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=e.resource?.width??1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=e.resource?.height??1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode;const t=e.style??{};this.style=t instanceof Le?t:new Le(t),this.destroyed=!1}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}_onStyleChange(){this.emit("styleChange",this)}update(){this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId++,this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s=s||this._resolution,e=e||this.width,t=t||this.height;const r=Math.round(e*s),n=Math.round(t*s);this.width=r/s,this.height=n/s,this._resolution=s,!(this.pixelWidth===r&&this.pixelHeight===n)&&(this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId++,this.emit("change",this))}set wrapMode(e){G(z,"TextureSource.wrapMode property has been deprecated. Use TextureSource.style.addressMode instead."),this._style.wrapMode=e}get wrapMode(){return G(z,"TextureSource.wrapMode property has been deprecated. Use TextureSource.style.addressMode instead."),this._style.wrapMode}set scaleMode(e){G(z,"TextureSource.scaleMode property has been deprecated. Use TextureSource.style.scaleMode instead."),this._style.scaleMode=e}get scaleMode(){return G(z,"TextureSource.scaleMode property has been deprecated. Use TextureSource.style.scaleMode instead."),this._style.scaleMode}static test(e){throw new Error("Unimplemented")}};let Ot=Di;Ot.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,style:{}};const yt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],vt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],wt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],St=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ee=[],$i=[],jt=Math.sign;function cn(){for(let e=0;e<16;e++){const t=[];Ee.push(t);for(let s=0;s<16;s++){const r=jt(yt[e]*yt[s]+wt[e]*vt[s]),n=jt(vt[e]*yt[s]+St[e]*vt[s]),i=jt(yt[e]*wt[s]+wt[e]*St[s]),a=jt(vt[e]*wt[s]+St[e]*St[s]);for(let l=0;l<16;l++)if(yt[l]===r&&vt[l]===n&&wt[l]===i&&St[l]===a){t.push(l);break}}}for(let e=0;e<16;e++){const t=new O;t.set(yt[e],vt[e],wt[e],St[e],0,0),$i.push(t)}}cn();const D={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>yt[e],uY:e=>vt[e],vX:e=>wt[e],vY:e=>St[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Ee[e][t],sub:(e,t)=>Ee[e][D.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?D.S:D.N:Math.abs(t)*2<=Math.abs(e)?e>0?D.E:D.W:t>0?e>0?D.SE:D.SW:e>0?D.NE:D.NW,matrixAppendRotationInv:(e,t,s=0,r=0)=>{const n=$i[D.inv(t)];n.tx=s,n.ty=r,e.append(n)}};class fi extends mt{constructor(t={}){super(),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=t.frame||new Z(0,0,1,1),this.orig=t.orig||this.frame,this.rotate=t.rotate??0,this.trim=t.trim,this.defaultAnchor=t.defaultAnchor,this.defaultBorders=t.defaultBorders,this.updateUvs()}updateUvs(){const t=this.uvs,s=this.frame;let r=this.rotate;if(r){const n=s.width/2,i=s.height/2,a=s.x+n,l=s.y+i;r=D.add(r,D.NW),t.x0=a+n*D.uX(r),t.y0=l+i*D.uY(r),r=D.add(r,2),t.x1=a+n*D.uX(r),t.y1=l+i*D.uY(r),r=D.add(r,2),t.x2=a+n*D.uX(r),t.y2=l+i*D.uY(r),r=D.add(r,2),t.x3=a+n*D.uX(r),t.y3=l+i*D.uY(r)}else t.x0=s.x,t.y0=s.y,t.x1=s.x+s.width,t.y1=s.y,t.x2=s.x+s.width,t.y2=s.y+s.height,t.x3=s.x,t.y3=s.y+s.height}update(){this.updateUvs(),this.emit("update",this)}destroy(){this.emit("destroy",this),this.removeAllListeners(),this.frame=null,this.orig=null,this.trim=null,this.defaultAnchor=null,this.uvs=null}}const di=new O;class un{constructor(t,s){this.mapCoord=new O,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof s>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=s,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,s){s===void 0&&(s=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],a=t[n+1];s[n]=i*r.a+a*r.c+r.tx,s[n+1]=i*r.b+a*r.d+r.ty}return s}update(){const t=this._texture;this._updateID++;const s=t.layout.uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const r=t.layout.orig,n=t.layout.trim;n&&(di.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(di));const i=t.source,a=this.uClampFrame,l=this.clampMargin/i._resolution,h=this.clampOffset;return a[0]=(t.frameX+l+h)/i.width,a[1]=(t.frameY+l+h)/i.height,a[2]=(t.frameX+t.frameWidth-l+h)/i.width,a[3]=(t.frameY+t.frameHeight-l+h)/i.height,this.uClampOffset[0]=h/i.pixelWidth,this.uClampOffset[1]=h/i.pixelHeight,this.isSimple=t.frameWidth===i.width&&t.frameHeight===i.height&&t.layout.rotate===0,!0}}class U extends mt{constructor({source:t,layout:s,label:r,frame:n}={}){if(super(),this.id=ut("texture"),this.styleSourceKey=0,this.label=r,this.source=t?.source??new Ot,s=s instanceof fi?s:new fi(s),n){const{width:i,height:a}=this._source;s.frame.x=n.x/i,s.frame.y=n.y/a,s.frame.width=n.width/i,s.frame.height=n.height/a,s.updateUvs()}this.layout=s,this.destroyed=!1}static from(t,s=!1){return typeof t=="string"?et.get(t):t instanceof Ot?new U({source:t}):ln(t,s)}set source(t){this._source&&this._source.off("resize",this.onUpdate,this),this._source=t,t.on("resize",this.onUpdate,this),this.emit("update",this)}get source(){return this._source}get layout(){return this._layout}set layout(t){this._layout?.off("update",this.onUpdate,this),this._layout=t,t.on("update",this.onUpdate,this),this.emit("update",this)}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new un(this)),this._textureMatrix}set frameWidth(t){this._layout.frame.width=t/this._source.width}get frameWidth(){return this._source.pixelWidth/this._source._resolution*this._layout.frame.width}set frameHeight(t){this._layout.frame.height=t/this._source.height}get frameHeight(){return this._source.pixelHeight/this._source._resolution*this._layout.frame.height}set frameX(t){if(t===0){this._layout.frame.x=0;return}this._layout.frame.x=this._source.width/t}get frameX(){return this._source.width*this._layout.frame.x}set frameY(t){if(t===0){this._layout.frame.y=0;return}this._layout.frame.y=this._source.height/t}get frameY(){return this._source.height*this._layout.frame.y}get width(){return this._source.width*this._layout.orig.width}get height(){return this._source.height*this._layout.orig.height}destroy(t=!1){this._layout&&(this._layout.destroy(),this._layout=null),this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}onUpdate(){this.emit("update",this)}get baseTexture(){return G(z,"Texture.baseTexture is now Texture.source"),this._source}}U.EMPTY=new U({});U.EMPTY.label="EMPTY";U.EMPTY.destroy=Vi;class Gi extends mt{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return G(z,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return G(z,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return G(z,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return G(z,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return G(z,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture.destroy();this.chars=null}}class fn extends Gi{constructor(t){super();const{textures:s,data:r}=t;Object.keys(r.pages).forEach(n=>{const i=r.pages[parseInt(n,10)],a=s[i.id];this.pages.push({texture:a})}),Object.keys(r.chars).forEach(n=>{const i=r.chars[n],a=s[i.page].source,l=new Z(i.x/a.width,i.y/a.height,i.width/a.width,i.height/a.height),h=new U({source:a,layout:{frame:l}});this.chars[n]={id:n.codePointAt(0),xOffset:i.xOffset,yOffset:i.yOffset,xAdvance:i.xAdvance,kerning:i.kerning??{},texture:h}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0}}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:s}=this.pages[t];s.destroy(!0)}this.pages=null}}var dn=gn,ve={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},pn=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function gn(e){var t=[];return e.replace(pn,function(s,r,n){var i=r.toLowerCase();for(n=xn(n),i=="m"&&n.length>2&&(t.push([r].concat(n.splice(0,2))),i="l",r=r=="m"?"l":"L");;){if(n.length==ve[i])return n.unshift(r),t.push(n);if(n.length<ve[i])throw new Error("malformed path data");t.push([r].concat(n.splice(0,ve[i])))}}),t}var mn=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function xn(e){var t=e.match(mn);return t?t.map(Number):[]}const yn=Ti(dn);function vn(e,t){const s=yn(e),r=[];let n=null,i=0,a=0;for(let l=0;l<s.length;l++){const h=s[l],d=h[0],c=h;switch(d){case"M":i=c[1],a=c[2],t.moveTo(i,a);break;case"m":i+=c[1],a+=c[2],t.moveTo(i,a);break;case"H":i=c[1],t.lineTo(i,a);break;case"h":i+=c[1],t.lineTo(i,a);break;case"V":a=c[1],t.lineTo(i,a);break;case"v":a+=c[1],t.lineTo(i,a);break;case"L":i=c[1],a=c[2],t.lineTo(i,a);break;case"l":i+=c[1],a+=c[2],t.lineTo(i,a);break;case"C":i=c[5],a=c[6],t.bezierCurveTo(c[1],c[2],c[3],c[4],i,a);break;case"c":t.bezierCurveTo(i+c[1],a+c[2],i+c[3],a+c[4],i+c[5],a+c[6]),i+=c[5],a+=c[6];break;case"S":i=c[3],a=c[4],t.bezierCurveToShort(c[1],c[2],i,a);break;case"s":t.bezierCurveToShort(i+c[1],a+c[2],i+c[3],a+c[4]),i+=c[3],a+=c[4];break;case"Q":i=c[3],a=c[4],t.quadraticCurveTo(c[1],c[2],i,a);break;case"q":t.quadraticCurveTo(i+c[1],a+c[2],i+c[3],a+c[4]),i+=c[3],a+=c[4];break;case"T":i=c[1],a=c[2],t.quadraticCurveToShort(i,a);break;case"t":i+=c[1],a+=c[2],t.quadraticCurveToShort(i,a);break;case"A":i=c[6],a=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],i,a);break;case"a":i+=c[6],a+=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],i,a);break;case"Z":case"z":t.closePath(),r.length>0&&(n=r.pop(),n?(i=n.startX,a=n.startY):(i=0,a=0)),n=null;break;default:ct(`Unknown SVG path command: ${d}`)}d!=="Z"&&d!=="z"&&n===null&&(n={startX:i,startY:a},r.push(n))}return t}class De{constructor(t=0,s=0,r=0){this.type="circle",this.x=t,this.y=s,this.radius=r}clone(){return new De(this.x,this.y,this.radius)}contains(t,s){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-s;return n*=n,i*=i,n+i<=r}getBounds(t){return t=t||new Z,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class $e{constructor(t=0,s=0,r=0,n=0){this.type="ellipse",this.x=t,this.y=s,this.halfWidth=r,this.halfHeight=n}clone(){return new $e(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,s){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(t-this.x)/this.halfWidth,n=(s-this.y)/this.halfHeight;return r*=r,n*=n,r+n<=1}getBounds(){return new Z(this.x-this.halfWidth,this.y-this.halfHeight,this.halfWidth*2,this.halfHeight*2)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}class Rt{constructor(...t){this.type="polygon";let s=Array.isArray(t[0])?t[0]:t;if(typeof s[0]!="number"){const r=[];for(let n=0,i=s.length;n<i;n++)r.push(s[n].x,s[n].y);s=r}this.points=s,this.closePath=!0}clone(){const t=this.points.slice(),s=new Rt(t);return s.closePath=this.closePath,s}contains(t,s){let r=!1;const n=this.points.length/2;for(let i=0,a=n-1;i<n;a=i++){const l=this.points[i*2],h=this.points[i*2+1],d=this.points[a*2],c=this.points[a*2+1];h>s!=c>s&&t<(d-l)*((s-h)/(c-h))+l&&(r=!r)}return r}getBounds(t){t=t||new Z;const s=this.points;let r=1/0,n=-1/0,i=1/0,a=-1/0;for(let l=0,h=s.length;l<h;l+=2){const d=s[l],c=s[l+1];r=d<r?d:r,n=d>n?d:n,i=c<i?c:i,a=c>a?c:a}return t.x=r,t.width=n-r,t.y=i,t.height=a-i,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,s)=>`${t}, ${s}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}class Ge{constructor(t=0,s=0,r=0,n=0,i=20){this.type="roundedRectangle",this.x=t,this.y=s,this.width=r,this.height=n,this.radius=i}getBounds(t){return t=t||new Z,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Ge(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,s){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&s>=this.y&&s<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(s>=this.y+r&&s<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=s-(this.y+r);const a=r*r;if(n*n+i*i<=a||(n=t-(this.x+this.width-r),n*n+i*i<=a)||(i=s-(this.y+this.height-r),n*n+i*i<=a)||(n=t-(this.x+r),n*n+i*i<=a))return!0}return!1}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const wn=8,Kt=11920929e-14,Sn=1;function Ui(e,t,s,r,n,i,a,l,h){let c=Sn/1;return c*=c,_n(t,s,r,n,i,a,l,h,e,c),e}function _n(e,t,s,r,n,i,a,l,h,d){Fe(e,t,s,r,n,i,a,l,h,d,0),h.push(a,l)}function Fe(e,t,s,r,n,i,a,l,h,d,c){if(c>wn)return;const g=(e+s)/2,f=(t+r)/2,o=(s+n)/2,u=(r+i)/2,p=(n+a)/2,m=(i+l)/2,y=(g+o)/2,v=(f+u)/2,b=(o+p)/2,M=(u+m)/2,x=(y+b)/2,S=(v+M)/2;if(c>0){let _=a-e,w=l-t;const P=Math.abs((s-a)*w-(r-l)*_),C=Math.abs((n-a)*w-(i-l)*_);if(P>Kt&&C>Kt){if((P+C)*(P+C)<=d*(_*_+w*w)){h.push(x,S);return}}else if(P>Kt){if(P*P<=d*(_*_+w*w)){h.push(x,S);return}}else if(C>Kt){if(C*C<=d*(_*_+w*w)){h.push(x,S);return}}else if(_=x-(e+a)/2,w=S-(t+l)/2,_*_+w*w<=d){h.push(x,S);return}}Fe(e,t,g,f,y,v,x,S,h,d,c+1),Fe(x,S,b,M,p,m,a,l,h,d,c+1)}const bn=8,Cn=11920929e-14,Mn=1;function Pn(e,t,s,r,n,i,a){let h=Mn/1;return h*=h,Tn(t,s,r,n,i,a,e,h),e}function Tn(e,t,s,r,n,i,a,l){Re(a,e,t,s,r,n,i,l,0),a.push(n,i)}function Re(e,t,s,r,n,i,a,l,h){if(h>bn)return;const d=(t+r)/2,c=(s+n)/2,g=(r+i)/2,f=(n+a)/2,o=(d+g)/2,u=(c+f)/2;let p=i-t,m=a-s;const y=Math.abs((r-i)*m-(n-a)*p);if(y>Cn){if(y*y<=l*(p*p+m*m)){e.push(o,u);return}}else if(p=o-(t+i)/2,m=u-(s+a)/2,p*p+m*m<=l){e.push(o,u);return}Re(e,t,s,d,c,o,u,l,h+1),Re(e,o,u,g,f,i,a,l,h+1)}function zi(e,t,s,r,n,i,a,l){let h=Math.abs(n-i);(!a&&n>i||a&&i>n)&&(h=2*Math.PI-h),l=l||Math.max(6,Math.floor(6*Math.pow(r,1/3)*(h/Math.PI))),l=Math.max(l,3);let d=h/l,c=n;d*=a?-1:1;for(let g=0;g<l+1;g++){const f=Math.cos(c),o=Math.sin(c),u=t+f*r,p=s+o*r;e.push(u,p),c+=d}}function kn(e,t,s,r,n,i){const a=e[e.length-2],h=e[e.length-1]-s,d=a-t,c=n-s,g=r-t,f=Math.abs(h*g-d*c);if(f<1e-8||i===0){(e[e.length-2]!==t||e[e.length-1]!==s)&&e.push(t,s);return}const o=h*h+d*d,u=c*c+g*g,p=h*c+d*g,m=i*Math.sqrt(o)/f,y=i*Math.sqrt(u)/f,v=m*p/o,b=y*p/u,M=m*g+y*d,x=m*c+y*h,S=d*(y+v),_=h*(y+v),w=g*(m+b),P=c*(m+b),C=Math.atan2(_-x,S-M),k=Math.atan2(P-x,w-M);zi(e,M+t,x+s,i,C,k,d*c>g*h)}const Bt=Math.PI*2,we={centerX:0,centerY:0,ang1:0,ang2:0},Se=({x:e,y:t},s,r,n,i,a,l,h)=>{e*=s,t*=r;const d=n*e-i*t,c=i*e+n*t;return h.x=d+a,h.y=c+l,h};function An(e,t){const s=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=t===1.5707963267948966?.551915024494:s,n=Math.cos(e),i=Math.sin(e),a=Math.cos(e+t),l=Math.sin(e+t);return[{x:n-i*r,y:i+n*r},{x:a+l*r,y:l-a*r},{x:a,y:l}]}const pi=(e,t,s,r)=>{const n=e*r-t*s<0?-1:1;let i=e*s+t*r;return i>1&&(i=1),i<-1&&(i=-1),n*Math.acos(i)},In=(e,t,s,r,n,i,a,l,h,d,c,g,f)=>{const o=Math.pow(n,2),u=Math.pow(i,2),p=Math.pow(c,2),m=Math.pow(g,2);let y=o*u-o*m-u*p;y<0&&(y=0),y/=o*m+u*p,y=Math.sqrt(y)*(a===l?-1:1);const v=y*n/i*g,b=y*-i/n*c,M=d*v-h*b+(e+s)/2,x=h*v+d*b+(t+r)/2,S=(c-v)/n,_=(g-b)/i,w=(-c-v)/n,P=(-g-b)/i,C=pi(1,0,S,_);let k=pi(S,_,w,P);l===0&&k>0&&(k-=Bt),l===1&&k<0&&(k+=Bt),f.centerX=M,f.centerY=x,f.ang1=C,f.ang2=k};function Ln(e,t,s,r,n,i,a,l=0,h=0,d=0){if(i===0||a===0)return;const c=Math.sin(l*Bt/360),g=Math.cos(l*Bt/360),f=g*(t-r)/2+c*(s-n)/2,o=-c*(t-r)/2+g*(s-n)/2;if(f===0&&o===0)return;i=Math.abs(i),a=Math.abs(a);const u=Math.pow(f,2)/Math.pow(i,2)+Math.pow(o,2)/Math.pow(a,2);u>1&&(i*=Math.sqrt(u),a*=Math.sqrt(u)),In(t,s,r,n,i,a,h,d,c,g,f,o,we);let{ang1:p,ang2:m}=we;const{centerX:y,centerY:v}=we;let b=Math.abs(m)/(Bt/4);Math.abs(1-b)<1e-7&&(b=1);const M=Math.max(Math.ceil(b),1);m/=M;let x=e[e.length-2],S=e[e.length-1];const _={x:0,y:0};for(let w=0;w<M;w++){const P=An(p,m),{x:C,y:k}=Se(P[0],i,a,g,c,y,v,_),{x:T,y:A}=Se(P[1],i,a,g,c,y,v,_),{x:L,y:I}=Se(P[2],i,a,g,c,y,v,_);Ui(e,x,S,C,k,T,A,L,I),x=L,S=I,p+=m}}function En(e,t,s){const r=(a,l)=>{const h=l.x-a.x,d=l.y-a.y,c=Math.sqrt(h*h+d*d),g=h/c,f=d/c;return{len:c,nx:g,ny:f}},n=(a,l)=>{a===0?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y)};let i=t[t.length-1];for(let a=0;a<t.length;a++){const l=t[a%t.length],h=l.radius??s;if(h<=0){n(a,l),i=l;continue}const d=t[(a+1)%t.length],c=r(l,i),g=r(l,d);if(c.len<1e-4||g.len<1e-4){n(a,l),i=l;continue}let f=Math.asin(c.nx*g.ny-c.ny*g.nx),o=1,u=!1;c.nx*g.nx-c.ny*-g.ny<0?f<0?f=Math.PI+f:(f=Math.PI-f,o=-1,u=!0):f>0&&(o=-1,u=!0);const p=f/2;let m,y=Math.abs(Math.cos(p)*h/Math.sin(p));y>Math.min(c.len/2,g.len/2)?(y=Math.min(c.len/2,g.len/2),m=Math.abs(y*Math.sin(p)/Math.cos(p))):m=h;const v=l.x+g.nx*y+-g.ny*m*o,b=l.y+g.ny*y+g.nx*m*o,M=Math.atan2(c.ny,c.nx)+Math.PI/2*o,x=Math.atan2(g.ny,g.nx)-Math.PI/2*o;a===0&&e.moveTo(v+Math.cos(M)*m,b+Math.sin(M)*m),e.arc(v,b,m,M,x,u),i=l}}function Fn(e,t,s){const r=(a,l)=>Math.sqrt((a.x-l.x)**2+(a.y-l.y)**2),n=(a,l,h)=>({x:a.x+(l.x-a.x)*h,y:a.y+(l.y-a.y)*h}),i=t.length;for(let a=0;a<i;a++){const l=t[(a+1)%i],h=l.radius??s;if(h<=0){a===0?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y);continue}const d=t[a],c=t[(a+2)%i],g=r(d,l);let f;if(g<1e-4)f=l;else{const p=Math.min(g/2,h);f=n(l,d,p/g)}const o=r(c,l);let u;if(o<1e-4)u=l;else{const p=Math.min(o/2,h);u=n(l,c,p/o)}a===0?e.moveTo(f.x,f.y):e.lineTo(f.x,f.y),e.quadraticCurveTo(l.x,l.y,u.x,u.y)}}const Rn=new Z;class Bn{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new xt,this._graphicsPath2D=t}moveTo(t,s){return this.startPoly(t,s),this}lineTo(t,s){this._ensurePoly();const r=this._currentPoly.points,n=r[r.length-2],i=r[r.length-1];return(n!==t||i!==s)&&r.push(t,s),this}arc(t,s,r,n,i,a){this._ensurePoly(!1);const l=this._currentPoly.points;return zi(l,t,s,r,n,i,a),this}arcTo(t,s,r,n,i){this._ensurePoly();const a=this._currentPoly.points;return kn(a,t,s,r,n,i),this}arcToSvg(t,s,r,n,i,a,l){const h=this._currentPoly.points;return Ln(h,this._currentPoly.lastX,this._currentPoly.lastY,a,l,t,s,r,n,i),this}bezierCurveTo(t,s,r,n,i,a){this._ensurePoly();const l=this._currentPoly;return Ui(this._currentPoly.points,l.lastX,l.lastY,t,s,r,n,i,a),this}quadraticCurveTo(t,s,r,n){this._ensurePoly();const i=this._currentPoly;return Pn(this._currentPoly.points,i.lastX,i.lastY,t,s,r,n),this}closePath(){return this.endPoly(!0),this}addPath(t,s){this.endPoly(),s&&!s.isIdentity()&&(t=t.clone(!0),t.transform(s));for(let r=0;r<t.instructions.length;r++){const n=t.instructions[r];this[n.action](...n.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,s,r,n,i){return this.drawShape(new Z(t,s,r,n),i),this}circle(t,s,r,n){return this.drawShape(new De(t,s,r),n),this}poly(t,s,r){const n=new Rt(t);return n.closePath=s,this.drawShape(n,r),this}regularPoly(t,s,r,n,i=0,a){n=Math.max(n|0,3);const l=-1*Math.PI/2+i,h=Math.PI*2/n,d=[];for(let c=0;c<n;c++){const g=c*h+l;d.push(t+r*Math.cos(g),s+r*Math.sin(g))}return this.poly(d,!1,a),this}roundPoly(t,s,r,n,i,a=0){if(n=Math.max(n|0,3),i<=0)return this.regularPoly(t,s,r,n,a);const l=r*Math.sin(Math.PI/n)-.001;i=Math.min(i,l);const h=-1*Math.PI/2+a,d=Math.PI*2/n,c=(n-2)*Math.PI/n/2;for(let g=0;g<n;g++){const f=g*d+h,o=t+r*Math.cos(f),u=s+r*Math.sin(f),p=f+Math.PI+c,m=f-Math.PI-c,y=o+i*Math.cos(p),v=u+i*Math.sin(p),b=o+i*Math.cos(m),M=u+i*Math.sin(m);g===0?this.moveTo(y,v):this.lineTo(y,v),this.quadraticCurveTo(o,u,b,M)}return this.closePath()}roundShape(t,s,r=!1){return t.length<3?this:(r?Fn(this,t,s):En(this,t,s),this.closePath())}filletRect(t,s,r,n,i){if(i===0)return this.rect(t,s,r,n);const a=Math.min(r,n)/2,l=Math.min(a,Math.max(-a,i)),h=t+r,d=s+n,c=l<0?-l:0,g=Math.abs(l);return this.moveTo(t,s+g).arcTo(t+c,s+c,t+g,s,g).lineTo(h-g,s).arcTo(h-c,s+c,h,s+g,g).lineTo(h,d-g).arcTo(h-c,d-c,t+r-g,d,g).lineTo(t+g,d).arcTo(t+c,d-c,t,d-g,g).closePath()}chamferRect(t,s,r,n,i,a){if(i<=0)return this.rect(t,s,r,n);const l=Math.min(i,Math.min(r,n)/2),h=t+r,d=s+n,c=[t+l,s,h-l,s,h,s+l,h,d-l,h-l,d,t+l,d,t,d-l,t,s+l];for(let g=c.length-1;g>=2;g-=2)c[g]===c[g-2]&&c[g-1]===c[g-3]&&c.splice(g-1,2);return this.poly(c,void 0,a)}ellipse(t,s,r,n,i){return this.drawShape(new $e(t,s,r,n),i),this}roundRect(t,s,r,n,i,a){return this.drawShape(new Ge(t,s,r,n,i),a),this}drawShape(t,s){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:s}),this}startPoly(t,s){let r=this._currentPoly;return r&&this.endPoly(),r=new Rt,r.points.push(t,s),this._currentPoly=r,this}endPoly(t=!1){const s=this._currentPoly;return s&&s.points.length>2&&(s.closePath=t,this.shapePrimitives.push({shape:s})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Rt,t)){const s=this.shapePrimitives[this.shapePrimitives.length-1];if(s){let r=s.shape.x,n=s.shape.y;if(!s.transform.isIdentity()){const i=s.transform,a=r;r=i.a*r+i.c*n+i.tx,n=i.b*a+i.d*n+i.ty}this._currentPoly.points.push(r,n)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let s=0;s<t.instructions.length;s++){const r=t.instructions[s];this[r.action](...r.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const s=this.shapePrimitives;for(let r=0;r<s.length;r++){const n=s[r],i=n.shape.getBounds(Rn);n.transform?(t.pushMatrix(n.transform),t.addRect(i),t.popMatrix()):t.addRect(i)}return t}}class kt{constructor(t){this.instructions=[],this.uid=ut("graphicsPath"),this._dirty=!0,typeof t=="string"?vn(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new Bn(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,s){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,s]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,s,r,n){const i=this.instructions[this.instructions.length-1],a=this.getLastPoint(J.shared);let l=0,h=0;if(!i||i.action!=="bezierCurveTo")l=a.x,h=a.y;else{l=i.data[2],h=i.data[3];const d=a.x,c=a.y;l=d+(d-l),h=c+(c-h)}return this.instructions.push({action:"bezierCurveTo",data:[l,h,t,s,r,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,s){const r=this.instructions[this.instructions.length-1],n=this.getLastPoint(J.shared);let i=0,a=0;if(!r||r.action!=="quadraticCurveTo")i=n.x,a=n.y;else{i=r.data[0],a=r.data[1];const l=n.x,h=n.y;i=l+(l-i),a=h+(h-a)}return this.instructions.push({action:"quadraticCurveTo",data:[i,a,t,s]}),this._dirty=!0,this}rect(t,s,r,n,i){return this.instructions.push({action:"rect",data:[t,s,r,n,i]}),this._dirty=!0,this}circle(t,s,r,n){return this.instructions.push({action:"circle",data:[t,s,r,n]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,s,r,n,i,a,l){i=i||n/2;const h=-1*Math.PI/2+a,d=r*2,c=Math.PI*2/d,g=[];for(let f=0;f<d;f++){const o=f%2?i:n,u=f*c+h;g.push(t+o*Math.cos(u),s+o*Math.sin(u))}return this.poly(g,!0,l),this}clone(t=!1){const s=new kt;if(!t)s.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){const n=this.instructions[r];s.instructions.push({action:n.action,data:n.data.slice()})}return s}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const s=t.a,r=t.b,n=t.c,i=t.d,a=t.tx,l=t.ty;let h=0,d=0,c=0,g=0,f=0,o=0,u=0,p=0;for(let m=0;m<this.instructions.length;m++){const y=this.instructions[m],v=y.data;switch(y.action){case"moveTo":case"lineTo":h=v[0],d=v[1],v[0]=s*h+n*d+a,v[1]=r*h+i*d+l;break;case"bezierCurveTo":c=v[0],g=v[1],f=v[2],o=v[3],h=v[4],d=v[5],v[0]=s*c+n*g+a,v[1]=r*c+i*g+l,v[2]=s*f+n*o+a,v[3]=r*f+i*o+l,v[4]=s*h+n*d+a,v[5]=r*h+i*d+l;break;case"quadraticCurveTo":c=v[0],g=v[1],h=v[2],d=v[3],v[0]=s*c+n*g+a,v[1]=r*c+i*g+l,v[2]=s*h+n*d+a,v[3]=r*h+i*d+l;break;case"arcToSvg":h=v[5],d=v[6],u=v[0],p=v[1],v[0]=s*u+n*p,v[1]=r*u+i*p,v[5]=s*h+n*d+a,v[6]=r*h+i*d+l;break;case"rect":v[4]=_e(v[4],t);break;case"ellipse":v[8]=_e(v[8],t);break;case"roundRect":v[5]=_e(v[5],t);break;case"addPath":v[0].transform(t);break;default:ct("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let s=this.instructions.length-1,r=this.instructions[s];if(!r)return t.x=0,t.y=0,t;for(;r.action==="closePath";){if(s--,s<0)return t.x=0,t.y=0,t;r=this.instructions[s]}let n,i,a;switch(r.action){case"moveTo":case"lineTo":t.x=r.data[0],t.y=r.data[1];break;case"quadraticCurveTo":t.x=r.data[2],t.y=r.data[3];break;case"bezierCurveTo":t.x=r.data[4],t.y=r.data[5];break;case"arc":case"arcToSvg":t.x=r.data[5],t.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(t);break;case"rect":if(a=r.data[4],n=r.data[0],i=r.data[1],a){const{a:l,b:h,c:d,d:c,tx:g,ty:f}=a;t.x=l*n+d*i+g,t.y=h*n+c*i+f}else t.x=n,t.y=i;break;case"poly":break;default:ct(`${r.action} is not supported yet`);break}return t}}function _e(e,t){return e?e.prepend(t):t.clone()}function Wn(e,t){if(typeof e=="string"){const r=document.createElement("div");r.innerHTML=e.trim(),e=r.querySelector("svg")}const s={context:t,path:new kt};return Ni(e,s,null,null),t}function Ni(e,t,s,r){const n=e.children,{fillStyle:i,strokeStyle:a}=On(e);i&&s?s={...s,...i}:i&&(s=i),a&&r?r={...r,...a}:a&&(r=a),t.context.fillStyle=s,t.context.strokeStyle=r;let l,h,d,c,g,f,o,u,p,m,y,v,b,M,x,S,_;switch(e.nodeName.toLowerCase()){case"path":M=e.getAttribute("d"),x=new kt(M),t.context.path(x),s&&t.context.fill(),r&&t.context.stroke();break;case"circle":o=j(e,"cx",0),u=j(e,"cy",0),p=j(e,"r",0),t.context.ellipse(o,u,p,p),s&&t.context.fill(),r&&t.context.stroke();break;case"rect":l=j(e,"x",0),h=j(e,"y",0),S=j(e,"width",0),_=j(e,"height",0),m=j(e,"rx",0),y=j(e,"ry",0),m||y?t.context.roundRect(l,h,S,_,m||y):t.context.rect(l,h,S,_),s&&t.context.fill(),r&&t.context.stroke();break;case"ellipse":o=j(e,"cx",0),u=j(e,"cy",0),m=j(e,"rx",0),y=j(e,"ry",0),t.context.beginPath(),t.context.ellipse(o,u,m,y),s&&t.context.fill(),r&&t.context.stroke();break;case"line":d=j(e,"x1",0),c=j(e,"y1",0),g=j(e,"x2",0),f=j(e,"y2",0),t.context.beginPath(),t.context.moveTo(d,c),t.context.lineTo(g,f),r&&t.context.stroke();break;case"polygon":b=e.getAttribute("points"),v=b.match(/\d+/g).map(w=>parseInt(w,10)),t.context.poly(v,!0),s&&t.context.fill(),r&&t.context.stroke();break;case"polyline":b=e.getAttribute("points"),v=b.match(/\d+/g).map(w=>parseInt(w,10)),t.context.poly(v,!1),r&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${e.nodeName}> elements unsupported`);break}}for(let w=0;w<n.length;w++)Ni(n[w],t,s,r)}function j(e,t,s){const r=e.getAttribute(t);return r?Number(r):s}function On(e){const t=e.getAttribute("style"),s={},r={};let n=!1,i=!1;if(t){const a=t.split(";");for(let l=0;l<a.length;l++){const h=a[l],[d,c]=h.split(":");switch(d){case"stroke":c!=="none"&&(s.color=$.shared.setValue(c).toNumber(),i=!0);break;case"stroke-width":s.width=Number(c);break;case"fill":c!=="none"&&(n=!0,r.color=$.shared.setValue(c).toNumber());break;case"fill-opacity":r.alpha=Number(c);break;case"stroke-opacity":s.alpha=Number(c);break;case"opacity":r.alpha=Number(c),s.alpha=Number(c);break}}}else{const a=e.getAttribute("stroke");a&&a!=="none"&&(i=!0,s.color=$.shared.setValue(a).toNumber(),s.width=j(e,"stroke-width",1));const l=e.getAttribute("fill");l&&l!=="none"&&(n=!0,r.color=$.shared.setValue(l).toNumber())}return{strokeStyle:i?s:null,fillStyle:n?r:null}}class se extends Ot{constructor(){super(...arguments),this.uploadMethodId="image"}static test(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap}}se.extension=ot.TextureSource;const ne=lt.get().createCanvas(),Ct=1;ne.width=Ct;ne.height=Ct;const gt=ne.getContext("2d");gt.fillStyle="#ffffff";gt.fillRect(0,0,Ct,Ct);gt.beginPath();gt.moveTo(0,0);gt.lineTo(Ct,0);gt.lineTo(Ct,Ct);gt.closePath();gt.fillStyle="#ffffff";gt.fill();U.WHITE=new U({source:new se({resource:ne,alphaMode:"premultiply-alpha-on-upload"})});U.WHITE.label="WHITE";U.WHITE.destroy=Vi;const Be=class{constructor(e,t,s,r){this.uid=ut("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=e,this.y0=t,this.x1=s,this.y1=r}addColorStop(e,t){return this.gradientStops.push({offset:e,color:$.shared.setValue(t).toHex()}),this}buildLinearGradient(){const e=Be.defaultTextureSize,{gradientStops:t}=this,s=lt.get().createCanvas();s.width=e,s.height=e;const r=s.getContext("2d"),n=r.createLinearGradient(0,0,Be.defaultTextureSize,1);for(let u=0;u<t.length;u++){const p=t[u];n.addColorStop(p.offset,p.color)}r.fillStyle=n,r.fillRect(0,0,e,e),this.texture=new U({source:new se({resource:s,style:{addressModeU:"clamp-to-edge",addressModeV:"repeat"}})});const{x0:i,y0:a,x1:l,y1:h}=this,d=new O,c=l-i,g=h-a,f=Math.sqrt(c*c+g*g),o=Math.atan2(g,c);d.translate(-i,-a),d.scale(1/e,1/e),d.rotate(-o),d.scale(256/f,1),this.transform=d}};let re=Be;re.defaultTextureSize=256;const gi={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Yi{constructor(t,s){this.uid=ut("fillPattern"),this.transform=new O,this.texture=t,this.transform.scale(1/t.frameWidth,1/t.frameHeight),s&&(t.source.style.addressModeU=gi[s].addressModeU,t.source.style.addressModeV=gi[s].addressModeV)}setTransform(t){const s=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/s.frameWidth,1/s.frameHeight)}}function Tt(e,t){if(!e)return null;let s,r;if(e?.fill?(r=e.fill,s={...t,...e}):(r=e,s=t),$.isColorLike(r)){const a=$.shared.setValue(r??0);return{...s,color:a.toNumber(),alpha:a.alpha===1?s.alpha:a.alpha,texture:U.WHITE}}else if(r instanceof Yi){const a=r;return{...s,color:16777215,texture:a.texture,matrix:a.transform,fill:s.fill??null}}else if(r instanceof re){const a=r;return a.buildLinearGradient(),{...s,color:16777215,texture:a.texture,matrix:a.transform}}const n={...t,...e};if(n.texture!==U.WHITE){const a=n.matrix||new O;a.scale(1/n.texture.frameWidth,1/n.texture.frameHeight),n.matrix=a,n.color=16777215}const i=$.shared.setValue(n.color);return n.alpha*=i.alpha,n.color=i.toNumber(),n}const Mt=new J,mi=new O,_t=class extends mt{constructor(){super(...arguments),this.uid=ut("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new kt,this._transform=new O,this._fillStyle={..._t.defaultFillStyle},this._strokeStyle={..._t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new xt,this._boundsDirty=!0}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Tt(e,_t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Tt(e,_t.defaultStrokeStyle)}texture(e,t,s,r,n,i){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:r||0,dw:n||e.frameWidth,dh:i||e.frameHeight,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?$.shared.setValue(t).toNumber():0}}),this.onUpdate(),this}beginPath(){return this._activePath=new kt,this}fill(e,t){let s;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?s=r.data.path:s=this._activePath.clone(),s?(e&&(t!==void 0&&typeof e=="number"&&(G("8.0.0","GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Tt(e,_t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(J.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e&&(this._strokeStyle=Tt(e,_t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();t&&(t.action==="stroke"||t.action==="fill")&&(t.data.hole?t.data.hole.addPath(s):t.data.hole=s)}return this._initNextPathLocation(),this}arc(e,t,s,r,n,i){this._tick++;const a=this._transform;return this._activePath.arc(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,s,r,n,i),this}arcTo(e,t,s,r,n){this._tick++;const i=this._transform;return this._activePath.arcTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty,i.a*s+i.c*r+i.tx,i.b*s+i.d*r+i.ty,n),this}arcToSvg(e,t,s,r,n,i,a){this._tick++;const l=this._transform;return this._activePath.arcToSvg(e,t,s,r,n,l.a*i+l.c*a+l.tx,l.b*i+l.d*a+l.ty),this}bezierCurveTo(e,t,s,r,n,i){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*s+a.c*r+a.tx,a.b*s+a.d*r+a.ty,a.a*n+a.c*i+a.tx,a.b*n+a.d*i+a.ty),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,s,r){return this._tick++,this._activePath.ellipse(e,t,s,r,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,r=this._activePath.instructions,n=s.a*e+s.c*t+s.tx,i=s.b*e+s.d*t+s.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=n,r[0].data[1]=i,this):(this._activePath.moveTo(n,i),this)}quadraticCurveTo(e,t,s,r){this._tick++;const n=this._transform;this._activePath.quadraticCurveTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty,n.a*s+n.c*r+n.tx,n.b*s+n.d*r+n.ty)}rect(e,t,s,r){return this._tick++,this._activePath.rect(e,t,s,r,this._transform.clone()),this}roundRect(e,t,s,r,n){return this._tick++,this._activePath.roundRect(e,t,s,r,n,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,r,n=0,i){return this._tick++,this._activePath.regularPoly(e,t,s,r,n,i),this}roundPoly(e,t,s,r,n,i){return this._tick++,this._activePath.roundPoly(e,t,s,r,n,i),this}roundShape(e,t,s){return this._tick++,this._activePath.roundShape(e,t,s),this}filletRect(e,t,s,r,n){return this._tick++,this._activePath.filletRect(e,t,s,r,n),this}chamferRect(e,t,s,r,n,i){return this._tick++,this._activePath.chamferRect(e,t,s,r,n,i),this}star(e,t,s,r,n,i){return this._tick++,this._activePath.star(e,t,s,r,n,i,this._transform.clone()),this}svg(e){this._tick++,Wn(e,this)}restore(){const e=this._stateStack.pop();e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle)}save(){this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}})}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,r,n,i){return e instanceof O?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,r,n,i),this)}transform(e,t,s,r,n,i){return e instanceof O?(this._transform.append(e),this):(mi.set(e,t,s,r,n,i),this._transform.append(mi),this)}translate(e,t){return this._transform.translate(e,t),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],r=s.action;if(r==="fill"){const n=s.data;e.addBounds(n.path.bounds)}else if(r==="texture"){const n=s.data;e.pushMatrix(n.transform),e.addFrame(n.dx,n.dy,n.dx+n.dw,n.dy+n.dh),e.popMatrix()}}return e}containsPoint(e){const t=this.instructions;let s=!1;return t.forEach(r=>{const n=r.data,i=n.path;if(!r.action||!i)return;const a=n.style,l=i.shapePath?.shapePrimitives;this._forEachShape(l,h=>{if(!a||!h)return;typeof a!="number"&&a.matrix?a.matrix.applyInverse(e,Mt):Mt.copyFrom(e),s=h.contains(Mt.x,Mt.y);const d=n.hole;if(!d)return;const c=d.shapePath?.shapePrimitives;c&&this._forEachShape(c,g=>{g.contains(Mt.x,Mt.y)&&(s=!1)})})}),s}_forEachShape(e,t){e?.forEach(s=>{const r=s?.shape;r&&t(r)})}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(s),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(s)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};let te=_t;te.defaultFillStyle={color:16777215,alpha:1,texture:U.WHITE,matrix:null,fill:null};te.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:U.WHITE,matrix:null,fill:null};const Vn={onViewUpdate:()=>{}};var Xi=(e=>(e[e.WEBGL=1]="WEBGL",e[e.WEBGPU=2]="WEBGPU",e))(Xi||{});function ee(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}let Hn=0;class Dn{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,s,r){const n=new Ot({...this.textureOptions,width:t,height:s,resolution:1,antialias:r});return new U({source:n,label:`texturePool_${Hn++}`})}getOptimalTexture(t,s,r=1,n){let i=Math.ceil(t*r-1e-6),a=Math.ceil(s*r-1e-6);i=ee(i),a=ee(a);const l=(i<<17)+(a<<1)+(n?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let h=this._texturePool[l].pop();return h||(h=this.createTexture(i,a,n)),h.source._resolution=r,h.source.width=i/r,h.source.height=a/r,h.source.pixelWidth=i,h.source.pixelHeight=a,h.frameX=0,h.frameY=0,h.frameWidth=t,h.frameHeight=s,h.layout.update(),this._poolKeyHash[h.id]=l,h}getSameSizeTexture(t,s=!1){const r=t.source;return this.getOptimalTexture(t.width,t.height,r._resolution,s)}returnTexture(t){const s=this._poolKeyHash[t.id];this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const s in this._texturePool){const r=this._texturePool[s];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0)}this._texturePool={}}}const ji=new Dn,xi=["_fontFamily","_fontStyle","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides"];function Ki(e){const t=[];let s=0;for(let r=0;r<xi.length;r++){const n=xi[r];t[s++]=e[n]}return s=Qi(e._fill,t,s),s=$n(e._stroke,t,s),t.join("-")}function Qi(e,t,s){return e&&(t[s++]=e.color,t[s++]=e.alpha,t[s++]=e.fill?.uid),s}function $n(e,t,s){return e&&(s=Qi(e,t,s),t[s++]=e.width,t[s++]=e.alignment,t[s++]=e.cap,t[s++]=e.join,t[s++]=e.miterLimit),s}const Pt=class extends mt{constructor(e={}){super(),Gn(e);const t={...Pt.defaultTextStyle,...e};for(const s in Pt.defaultTextStyle){const r=s;this[r]=t[s]}this.dropShadow=null,typeof t.fill=="string"?this.fontSize=parseInt(t.fontSize,10):this.fontSize=t.fontSize,e.dropShadow&&(e.dropShadow instanceof Boolean?e.dropShadow===!0&&(this.dropShadow={...Pt.defaultTextStyle.dropShadow}):this.dropShadow={...Pt.defaultTextStyle.dropShadow,...e.dropShadow}),this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow=e,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._fill=Tt(e,te.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalFill&&(this._originalFill=e,this._stroke=Tt(e,te.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=Ki(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Pt({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}};let At=Pt;At.defaultTextStyle={align:"left",breakWords:!1,dropShadow:{alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Gn(e){const t=e;if(typeof t.dropShadow=="boolean"&&(G(z,"dropShadow is now an object, not a boolean"),e.dropShadow={alpha:t.dropShadowAlpha??1,angle:t.dropShadowAngle,blur:t.dropShadowBlur??0,color:t.dropShadowColor,distance:t.dropShadowDistance}),t.strokeThickness){G(z,"strokeThickness is now a part of stroke");const s=t.stroke;e.stroke={color:s,width:t.strokeThickness}}if(Array.isArray(t.fill)){G(z,"gradient fill is now a fill pattern: `new FillGradient(...)`");const s=new re(0,0,0,e.fontSize*1.7),r=t.fill.map(n=>$.shared.setValue(n).toNumber());r.forEach((n,i)=>{const a=t.fillGradientStops[i]??i/r.length;s.addColorStop(a,n)}),e.fill={fill:s}}}class Un{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,s){const r=lt.get().createCanvas();r.width=t,r.height=s;const n=r.getContext("2d");return{canvas:r,context:n}}getOptimalCanvasAndContext(t,s,r=1){t=Math.ceil(t*r-1e-6),s=Math.ceil(s*r-1e-6),t=ee(t),s=ee(s);const n=(t<<17)+(s<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let i=this._canvasPool[n].pop();return i||(i=this._createCanvasAndContext(t,s)),i}returnCanvasAndContext(t){const{width:s,height:r}=t.canvas,n=(s<<17)+(r<<1);this._canvasPool[n].push(t)}clear(){this._canvasPool={}}}const ie=new Un,zn=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function We(e){const t=typeof e.fontSize=="number"?`${e.fontSize}px`:e.fontSize;let s=e.fontFamily;Array.isArray(e.fontFamily)||(s=e.fontFamily.split(","));for(let r=s.length-1;r>=0;r--){let n=s[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!zn.includes(n)&&(n=`"${n}"`),s[r]=n}return`${e.fontStyle} ${e.fontVariant} ${e.fontWeight} ${t} ${s.join(",")}`}const be={willReadFrequently:!0},F=class{static get experimentalLetterSpacingSupported(){let e=F._experimentalLetterSpacingSupported;if(e!==void 0){const t=lt.get().getCanvasRenderingContext2D().prototype;e=F._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,r,n,i,a,l,h){this.text=e,this.style=t,this.width=s,this.height=r,this.lines=n,this.lineWidths=i,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}static measureText(e=" ",t,s=F._canvas,r=t.wordWrap){const n=`${e}:${t.styleKey}`;if(F._measurementCache[n])return F._measurementCache[n];const i=We(t),a=F.measureFont(i);a.fontSize===0&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);const l=F.__context;l.font=i;const d=(r?F._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),c=new Array(d.length);let g=0;for(let y=0;y<d.length;y++){const v=F._measureText(d[y],t.letterSpacing,l);c[y]=v,g=Math.max(g,v)}const f=t._stroke?.width||0;let o=g+f;t.dropShadow&&(o+=t.dropShadow.distance);const u=t.lineHeight||a.fontSize+f;let p=Math.max(u,a.fontSize+f*2)+(d.length-1)*(u+t.leading);return t.dropShadow&&(p+=t.dropShadow.distance),new F(e,t,o,p,d,c,u+t.leading,g,a)}static _measureText(e,t,s){let r=!1;F.experimentalLetterSpacingSupported&&(F.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,r=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let n=s.measureText(e).width;return n>0&&(r?n-=t:n+=(F.graphemeSegmenter(e).length-1)*t),n}static _wordWrap(e,t,s=F._canvas){const r=s.getContext("2d",be);let n=0,i="",a="";const l=Object.create(null),{letterSpacing:h,whiteSpace:d}=t,c=F._collapseSpaces(d),g=F._collapseNewlines(d);let f=!c;const o=t.wordWrapWidth+h,u=F._tokenize(e);for(let p=0;p<u.length;p++){let m=u[p];if(F._isNewline(m)){if(!g){a+=F._addLine(i),f=!c,i="",n=0;continue}m=" "}if(c){const v=F.isBreakingSpace(m),b=F.isBreakingSpace(i[i.length-1]);if(v&&b)continue}const y=F._getFromCache(m,h,l,r);if(y>o)if(i!==""&&(a+=F._addLine(i),i="",n=0),F.canBreakWords(m,t.breakWords)){const v=F.wordWrapSplit(m);for(let b=0;b<v.length;b++){let M=v[b],x=M,S=1;for(;v[b+S];){const w=v[b+S];if(!F.canBreakChars(x,w,m,b,t.breakWords))M+=w;else break;x=w,S++}b+=S-1;const _=F._getFromCache(M,h,l,r);_+n>o&&(a+=F._addLine(i),f=!1,i="",n=0),i+=M,n+=_}}else{i.length>0&&(a+=F._addLine(i),i="",n=0);const v=p===u.length-1;a+=F._addLine(m,!v),f=!1,i="",n=0}else y+n>o&&(f=!1,a+=F._addLine(i),i="",n=0),(i.length>0||!F.isBreakingSpace(m)||f)&&(i+=m,n+=y)}return a+=F._addLine(i,!1),a}static _addLine(e,t=!0){return e=F._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,r){let n=s[e];return typeof n!="number"&&(n=F._measureText(e,t,r)+t,s[e]=n),n}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!F.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:F._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:F._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){const n=e[r],i=e[r+1];if(F.isBreakingSpace(n,i)||F._isNewline(n)){s!==""&&(t.push(s),s=""),t.push(n);continue}s+=n}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,r,n){return!0}static wordWrapSplit(e){return F.graphemeSegmenter(e)}static measureFont(e){if(F._fonts[e])return F._fonts[e];const t=F._context;t.font=e;const s=t.measureText(F.METRICS_STRING+F.BASELINE_SYMBOL),r={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return F._fonts[e]=r,r}static clearMetrics(e=""){e?delete F._fonts[e]:F._fonts={}}static get _canvas(){if(!F.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",be)?.measureText)return F.__canvas=t,t;e=lt.get().createCanvas()}catch{e=lt.get().createCanvas()}e.width=e.height=10,F.__canvas=e}return F.__canvas}static get _context(){return F.__context||(F.__context=F._canvas.getContext("2d",be)),F.__context}};let tt=F;tt.METRICS_STRING="|q";tt.BASELINE_SYMBOL="M";tt.BASELINE_MULTIPLIER=1.4;tt.HEIGHT_MULTIPLIER=2;tt.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(s=>s.segment)}return e=>[...e]})();tt.experimentalLetterSpacing=!1;tt._fonts={};tt._newlines=[10,13];tt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];tt._measurementCache={};function yi(e,t){if(e.texture===U.WHITE&&!e.fill)return $.shared.setValue(e.color).toHex();if(e.fill){if(e.fill instanceof Yi){const s=e.fill,r=t.createPattern(s.texture.source.resource,"repeat"),n=s.transform.copyTo(O.shared);return n.scale(s.texture.frameWidth,s.texture.frameHeight),r.setTransform(n),r}else if(e.fill instanceof re){const s=e.fill;if(s.type==="linear"){const r=t.createLinearGradient(s.x0,s.y0,s.x1,s.y1);return s.gradientStops.forEach(n=>{r.addColorStop(n.offset,$.shared.setValue(n.color).toHex())}),r}}}else{const s=t.createPattern(e.texture.source.resource,"repeat"),r=e.matrix.copyTo(O.shared);return r.scale(e.texture.frameWidth,e.texture.frameHeight),s.setTransform(r),s}return ct("FillStyle not recognised",e),"red"}function qi(e){if(e==="")return[];typeof e=="string"&&(e=[e]);const t=[];for(let s=0,r=e.length;s<r;s++){const n=e[s];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);if(n[0].length===0||n[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const i=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<i)throw new Error("[BitmapFont]: Invalid character range.");for(let l=i,h=a;l<=h;l++)t.push(String.fromCharCode(l))}else t.push(...Array.from(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}class Oe extends Gi{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=4,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const s=t,r=s.style.clone();r.fontSize=this.baseMeasurementFontSize,s.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=U.WHITE,r._fill.fill=null),this._style=r,this._skipKerning=s.skipKerning??!1,this.resolution=s.resolution??1,this._padding=s.padding??4;const n=We(r);this.fontMetrics=tt.measureFont(n),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(t){const s=qi(t).filter(p=>!this._currentChars.includes(p)).filter((p,m,y)=>y.indexOf(p)===m);if(!s.length)return;this._currentChars=[...this._currentChars,...s];let r;this._currentPageIndex===-1?r=this._nextPage():r=this.pages[this._currentPageIndex];let{canvas:n,context:i}=r.canvasAndContext,a=r.texture.source;const l=this._style;let h=this._currentX,d=this._currentY;const c=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*c,f=l.fontStyle==="italic"?2:1;let o=0,u=!1;for(let p=0;p<s.length;p++){const m=s[p],y=tt.measureText(m,l,n,!1),v=f*y.width*c,b=y.height*c,M=v+g*2,x=b+g*2;if(u=!1,m!==`
`&&m!=="\r"&&m!=="	"&&m!==" "&&(u=!0,o=Math.ceil(Math.max(x,o))),h+M>512&&(d+=o,o=x,h=0,d+o>512)){a.update();const _=this._nextPage();n=_.canvasAndContext.canvas,i=_.canvasAndContext.context,a=_.texture.source,d=0}const S=v/c-(l.dropShadow?.distance??0)-(l._stroke?.width??0);if(this.chars[m]={id:m.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:S,kerning:{}},u){this._drawGlyph(i,y,h+g,d+g,c,l);const _=a.width*c,w=a.height*c,P=new Z(h/_,d/w,M/_,x/w);this.chars[m].texture=new U({source:a,layout:{frame:P}}),h+=Math.ceil(M)}}a.update(),this._currentX=h,this._currentY=d,this._skipKerning&&this._applyKerning(s,i)}get pageTextures(){return G(z,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,s){const r=this._measureCache;for(let n=0;n<t.length;n++){const i=t[n];for(let a=0;a<this._currentChars.length;a++){const l=this._currentChars[a];let h=r[i];h||(h=r[i]=s.measureText(i).width);let d=r[l];d||(d=r[l]=s.measureText(l).width);let c=s.measureText(i+l).width,g=c-(h+d);g&&(this.chars[i].kerning[l]=g),c=s.measureText(i+l).width,g=c-(h+d),g&&(this.chars[l].kerning[i]=g)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,s=ie.getOptimalCanvasAndContext(512,512,t);this._setupContext(s.context,this._style,t);const r=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),n=new U({source:new se({resource:s.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload"})}),i={canvasAndContext:s,texture:n};return this.pages[this._currentPageIndex]=i,i}_setupContext(t,s,r){s.fontSize=this.baseRenderedFontSize,t.scale(r,r),t.font=We(s),s.fontSize=this.baseMeasurementFontSize,t.textBaseline=s.textBaseline;const n=s._stroke,i=n?.width??0;if(n&&(t.lineWidth=i,t.lineJoin=n.join,t.miterLimit=n.miterLimit,t.strokeStyle=yi(n,t)),s._fill&&(t.fillStyle=yi(s._fill,t)),s.dropShadow){const a=s.dropShadow,l=$.shared.setValue(a.color).toArray(),h=a.blur*r,d=a.distance*r;t.shadowColor=`rgba(${l[0]*255},${l[1]*255},${l[2]*255},${a.alpha})`,t.shadowBlur=h,t.shadowOffsetX=Math.cos(a.angle)*d,t.shadowOffsetY=Math.sin(a.angle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,s,r,n,i,a){const l=s.text,h=s.fontProperties,c=(a._stroke?.width??0)*i,g=r+c/2,f=n-c/2,o=h.descent*i,u=s.lineHeight*i;a.stroke&&c&&t.strokeText(l,g,f+u-o),a._fill&&t.fillText(l,g,f+u-o)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:s,texture:r}=this.pages[t];ie.returnCanvasAndContext(s),r.destroy(!0)}this.pages=null}}function Nn(e,t,s){const r={width:0,height:0,offsetY:0,scale:t.fontSize/s.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=s.baseLineOffset;let n=r.lines[0],i=null,a=!0;const l={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},h=o=>{const u=n.width;for(let p=0;p<l.index;p++){const m=o.positions[p];n.chars.push(o.chars[p]),n.charPositions.push(m+u)}n.width+=o.width,a=!1,l.width=0,l.index=0,l.chars.length=0},d=()=>{let o=n.chars.length-1,u=n.chars[o];for(;u===" ";)n.width-=s.chars[u].xAdvance,u=n.chars[--o];r.width=Math.max(r.width,n.width),n={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,r.lines.push(n),r.height+=s.lineHeight},c=s.baseMeasurementFontSize/t.fontSize,g=t.letterSpacing*c,f=t.wordWrapWidth*c;for(let o=0;o<e.length+1;o++){let u;const p=o===e.length;p||(u=e[o]);const m=s.chars[u]||s.chars[" "];if(/(?:\s)/.test(u)||u==="\r"||u===`
`||p){if(!a&&t.wordWrap&&n.width+l.width-g>f?(d(),h(l),p||n.charPositions.push(0)):(l.start=n.width,h(l),p||n.charPositions.push(0)),u==="\r"||u===`
`)n.width!==0&&d();else if(!p){const M=m.xAdvance+(m.kerning[i]||0)+g;n.width+=M,n.spaceWidth=M,n.spacesIndex.push(n.charPositions.length),n.chars.push(u)}}else{const b=m.kerning[i]||0,M=m.xAdvance+b+g;l.positions[l.index++]=l.width+b,l.chars.push(u),l.width+=M}i=u}return d(),t.align==="center"?Yn(r):t.align==="right"?Xn(r):t.align==="justify"&&jn(r),r}function Yn(e){for(let t=0;t<e.lines.length;t++){const s=e.lines[t],r=e.width/2-s.width/2;for(let n=0;n<s.charPositions.length;n++)s.charPositions[n]+=r}}function Xn(e){for(let t=0;t<e.lines.length;t++){const s=e.lines[t],r=e.width-s.width;for(let n=0;n<s.charPositions.length;n++)s.charPositions[n]+=r}}function jn(e){const t=e.width;for(let s=0;s<e.lines.length;s++){const r=e.lines[s];let n=0,i=r.spacesIndex[n++],a=0;const l=r.spacesIndex.length,d=(t-r.width)/l;for(let c=0;c<r.charPositions.length;c++)c===i&&(i=r.spacesIndex[n++],a+=d),r.charPositions[c]+=a}}class Kn{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,s){let r=`${s.fontFamily}-bitmap`,n=!0;s._fill.fill&&(r+=s._fill.fill.uid,n=!1),et.has(r)||et.set(r,new Oe({style:s,overrideFill:n,...this.defaultOptions}));const i=et.get(r);return i.ensureCharacters?.(t),i}getLayout(t,s){const r=this.getFont(t,s);return Nn(t.split(""),s,r)}measureText(t,s){return this.getLayout(t,s)}install(t,s,r){if(!t)throw new Error("[BitmapFontManager] Property `name` is required.");r={...this.defaultOptions,...r};const n=s instanceof At?s:new At(s),i=n._fill.fill!==null&&n._fill.fill!==void 0,a=new Oe({style:n,overrideFill:i,skipKerning:r.skipKerning,padding:r.padding,resolution:r.resolution}),l=qi(r.chars);return a.ensureCharacters(l.join("")),et.set(`${t}-bitmap`,a),a}}const Qn=new Kn,qn=new xt;function Jn(e,t,s,r){const n=qn;n.minX=0,n.minY=0,n.maxX=e.width/r|0,n.maxY=e.height/r|0;const i=ji.getOptimalTexture(n.width,n.height,r,!1);return i.source.uploadMethodId="image",i.source.resource=e,i.source.alphaMode="premultiply-alpha-on-upload",i.frameWidth=t/r,i.frameHeight=s/r,i.source.update(),i.layout.updateUvs(),i}function Zn(){const{userAgent:e}=lt.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}function tr(e,t){const s=t.fontFamily,r=[],n={},i=/font-family:([^;"\s]+)/g,a=e.match(i);function l(h){n[h]||(r.push(h),n[h]=!0)}if(Array.isArray(s))for(let h=0;h<s.length;h++)l(s[h]);else l(s);a&&a.forEach(h=>{const d=h.split(":")[1].trim();l(d)});for(const h in t.tagStyles){const d=t.tagStyles[h].fontFamily;l(d)}return r}async function er(e){const s=await(await lt.get().fetch(e)).blob(),r=new FileReader;return await new Promise((i,a)=>{r.onloadend=()=>i(r.result),r.onerror=a,r.readAsDataURL(s)})}async function vi(e,t){const s=await er(t);return`@font-face {
        font-family: "${e.fontFamily}";
        src: url('${s}');
        font-weight: ${e.fontWeight};
        font-style: ${e.fontStyle};
    }`}async function ir(e,t){const s=e.filter(r=>et.has(r)).map((r,n)=>{if(!Qt.has(r)){const{url:i}=et.get(r);n===0?Qt.set(r,vi(t,i)):Qt.set(r,vi({...Ue.defaultFontOptions,fontFamily:r},i))}return Qt.get(r)});return(await Promise.all(s)).join(`
`)}function sr(e,t,s,r,n){const{domElement:i,styleElement:a,svgRoot:l}=n;i.innerHTML=`<style>${t.cssStyle}</style><div>${e}</div>`,i.setAttribute("style",`transform: scale(${s});transform-origin: top left; display: inline-block`),a.textContent=r;const{width:h,height:d}=n.image;return l.setAttribute("width",h.toString()),l.setAttribute("height",d.toString()),new XMLSerializer().serializeToString(l)}function nr(e,t){const s=ie.getOptimalCanvasAndContext(e.width,e.height,t),{context:r}=s;return r.clearRect(0,0,e.width,e.height),r.drawImage(e,0,0),ie.returnCanvasAndContext(s),s.canvas}function rr(e,t,s){return new Promise(async r=>{s&&await new Promise(n=>setTimeout(n,100)),e.onload=()=>{r()},e.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(t)}`,e.crossOrigin="anonymous"})}let wi;function Ji(e,t,s,r){r=r||wi||(wi=new Zi);const{domElement:n,styleElement:i,svgRoot:a}=r;n.innerHTML=`<style>${t.cssStyle}</style><div>${e}</div>`,n.setAttribute("style","transform-origin: top left; display: inline-block"),s&&(i.textContent=s),document.body.appendChild(a);const l=n.getBoundingClientRect();a.remove();const h=tt.measureFont(t.fontStyle).descent;return{width:l.width,height:l.height+h}}const Si="http://www.w3.org/2000/svg",_i="http://www.w3.org/1999/xhtml",Qt=new Map;class Zi{constructor(){this.svgRoot=document.createElementNS(Si,"svg"),this.foreignObject=document.createElementNS(Si,"foreignObject"),this.domElement=document.createElementNS(_i,"div"),this.styleElement=document.createElementNS(_i,"style"),this.image=new Image;const{foreignObject:t,svgRoot:s,styleElement:r,domElement:n}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",s.appendChild(t),t.appendChild(r),t.appendChild(n)}}class Ue{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===Xi.WEBGPU}getTexture(t){return this._buildTexturePromise(t.text,t.resolution,t.style)}getManagedTexture(t,s,r,n){if(this._activeTextures[n])return this._increaseReferenceCount(n),this._activeTextures[n].promise;const i=this._buildTexturePromise(t,s,r).then(a=>(this._activeTextures[n].texture=a,a));return this._activeTextures[n]={texture:null,promise:i,usageCount:1},i}async _buildTexturePromise(t,s,r){const n=Jt.get(Zi),i=tr(t,r),a=await ir(i,r),l=Ji(t,r,a,n),h=Math.ceil(Math.ceil(Math.max(1,l.width)+r.padding*2)*s),d=Math.ceil(Math.ceil(Math.max(1,l.height)+r.padding*2)*s),c=n.image;c.width=h|0,c.height=d|0;const g=sr(t,r,s,a,n);await rr(c,g,Zn()&&i.length>0);let f=c;this._createCanvas&&(f=nr(c,s));const o=Jn(f,c.width,c.height,s);return this._createCanvas&&this._renderer.texture.initSource(o.source),Jt.return(n),o}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){const s=this._activeTextures[t];s&&(s.usageCount--,s.usageCount===0&&(s.texture?this._cleanUp(s):s.promise.then(r=>{s.texture=r,this._cleanUp(s)}).catch(()=>{ct("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[t]=null))}_cleanUp(t){ji.returnTexture(t.texture),t.texture.source.resource=null,t.texture.source.uploadMethodId="unknown"}getReferenceCount(t){return this._activeTextures[t].usageCount}destroy(){this._activeTextures=null}}Ue.extension={type:[ot.WebGLSystem,ot.WebGPUSystem,ot.CanvasSystem],name:"htmlText"};Ue.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"};function ar(e){const t=e._stroke,s=e._fill,n=[`div { ${[`color: ${$.shared.setValue(s.color).toHex()}`,`font-size: ${e.fontSize}px`,`font-family: ${e.fontFamily}`,`font-weight: ${e.fontWeight}`,`font-style: ${e.fontStyle}`,`font-variant: ${e.fontVariant}`,`letter-spacing: ${e.letterSpacing}px`,`text-align: ${e.align}`,`padding: ${e.padding}px`,`white-space: ${e.whiteSpace}`,...e.lineHeight?[`line-height: ${e.lineHeight}px`]:[],...e.wordWrap?[`word-wrap: ${e.breakWords?"break-all":"break-word"}`,`max-width: ${e.wordWrapWidth}px`]:[],...t?[es(t)]:[],...e.dropShadow?[ts(e.dropShadow)]:[],...e.cssOverrides].join(";")} }`];return or(e.tagStyles,n),n.join(" ")}function ts(e){const t=$.shared.setValue(e.color).setAlpha(e.alpha).toHexa(),s=Math.round(Math.cos(e.angle)*e.distance),r=Math.round(Math.sin(e.angle)*e.distance),n=`${s}px ${r}px`;return e.blur>0?`text-shadow: ${n} ${e.blur}px ${t}`:`text-shadow: ${n} ${t}`}function es(e){return[`-webkit-text-stroke-width: ${e.width}px`,`-webkit-text-stroke-color: ${$.shared.setValue(e.color).toHex()}`,`text-stroke-width: ${e.width}px`,`text-stroke-color: ${$.shared.setValue(e.color).toHex()}`,"paint-order: stroke"].join(";")}const bi={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},Ci={fill:e=>`color: ${$.shared.setValue(e).toHex()}`,breakWords:e=>`word-wrap: ${e?"break-all":"break-word"}`,stroke:es,dropShadow:ts};function or(e,t){for(const s in e){const r=e[s],n=[];for(const i in r)Ci[i]?n.push(Ci[i](r[i])):bi[i]&&n.push(bi[i].replace("{{VALUE}}",r[i]));t.push(`${s} { ${n.join(";")} }`)}}class Vt extends At{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=t.cssOverrides),this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=Ki(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new Vt({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=ar(this)),this._cssStyle}addOverride(...t){const s=t.filter(r=>!this.cssOverrides.includes(r));s.length>0&&(this.cssOverrides.push(...s),this.update())}removeOverride(...t){const s=t.filter(r=>this.cssOverrides.includes(r));s.length>0&&(this.cssOverrides=this.cssOverrides.filter(r=>!s.includes(r)),this.update())}set fill(t){typeof t!="string"&&typeof t!="number"&&ct("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&typeof t!="string"&&typeof t!="number"&&ct("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}function lr(e){if(e instanceof Vt)return"html";const t=et.get(`${e?.fontFamily}-bitmap`);return t instanceof Oe||t instanceof fn?"bitmap":"canvas"}function Mi(e,t){return t instanceof At||t instanceof Vt?t:e==="html"?new Vt(t):new At(t)}const hr={canvas:"text",html:"htmlText",bitmap:"bitmapText"};class cr{constructor(t){this.uid=ut("textView"),this.renderPipeId="text",this.owner=Vn,this.batched=!0,this.resolution=null,this._didUpdate=!0,this.roundPixels=0,this._bounds=[0,1,0,0],this._boundsDirty=!0,this.text=t.text??"";const s=t.renderMode??lr(t.style);this._renderMode=s,this.style=Mi(s,t.style),this.renderPipeId=hr[s],this.anchor=new st(this,0,0),this.resolution=t.resolution??null}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onUpdate())}get text(){return this._text}get style(){return this._style}set style(t){t=t||{},this._style?.off("update",this.onUpdate,this),this._style=Mi(this._renderMode,t),this._style.on("update",this.onUpdate,this),this.onUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}addBounds(t){const s=this.bounds;t.addFrame(s[0],s[2],s[1],s[3])}containsPoint(t){const s=this.bounds[1],r=this.bounds[3],n=-s*this.anchor.x;let i=0;return t.x>=n&&t.x<=n+s&&(i=-r*this.anchor.y,t.y>=i&&t.y<=i+r)}onUpdate(){this._didUpdate=!0,this._boundsDirty=!0,this.owner.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}`}_updateBounds(){const t=this._bounds,s=this._style.padding,r=this.anchor;if(this.renderPipeId==="bitmapText"){const n=Qn.measureText(this.text,this._style),i=n.scale,a=n.offsetY*i,l=n.width*i,h=n.height*i;t[0]=-r._x*l-s,t[1]=t[0]+l,t[2]=-r._y*(h+a)-s,t[3]=t[2]+h}else if(this.renderPipeId==="htmlText"){const n=Ji(this.text,this._style),{width:i,height:a}=n;t[0]=-r._x*i-s,t[1]=t[0]+i,t[2]=-r._y*a-s,t[3]=t[2]+a}else{const n=tt.measureText(this.text,this._style),{width:i,height:a}=n;t[0]=-r._x*i-s,t[1]=t[0]+i,t[2]=-r._y*a-s,t[3]=t[2]+a}}destroy(t=!1){this.owner=null,this._bounds=null,this.anchor=null,this._style.destroy(t),this._style=null,this._text=null}}class Pi extends rt{constructor(...t){let s=t[0];(typeof s=="string"||t[1])&&(G(z,'use new Text({ text: "hi!", style }) instead'),s={text:s,style:t[1]});const{style:r,text:n,renderMode:i,resolution:a,...l}=s;super({view:new cr(Bi({style:r,text:n,renderMode:i,resolution:a})),label:"Text",...l}),this.allowChildren=!1}get anchor(){return this.view.anchor}set anchor(t){this.view.anchor.x=t.x,this.view.anchor.y=t.y}set text(t){this.view.text=t}get text(){return this.view.text}set style(t){this.view.style=t}get style(){return this.view.style}get roundPixels(){return!!this.view.roundPixels}set roundPixels(t){this.view.roundPixels=t?1:0}}var is={exports:{}};/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(e,t){(function(r,n){e.exports=n()})(he,function(){return function(s){var r={};function n(i){if(r[i])return r[i].exports;var a=r[i]={i,l:!1,exports:{}};return s[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=s,n.c=r,n.d=function(i,a,l){n.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:l})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,a){if(a&1&&(i=n(i)),a&8||a&4&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),a&2&&typeof i!="string")for(var h in i)n.d(l,h,function(d){return i[d]}.bind(null,h));return l},n.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(a,"a",a),a},n.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},n.p="",n(n.s=20)}([function(s,r){var n={};s.exports=n,function(){n._baseDelta=1e3/60,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(a,l){var h,d;typeof l=="boolean"?(h=2,d=l):(h=1,d=!0);for(var c=h;c<arguments.length;c++){var g=arguments[c];if(g)for(var f in g)d&&g[f]&&g[f].constructor===Object&&(!a[f]||a[f].constructor===Object)?(a[f]=a[f]||{},n.extend(a[f],d,g[f])):a[f]=g[f]}return a},n.clone=function(a,l){return n.extend({},l,a)},n.keys=function(a){if(Object.keys)return Object.keys(a);var l=[];for(var h in a)l.push(h);return l},n.values=function(a){var l=[];if(Object.keys){for(var h=Object.keys(a),d=0;d<h.length;d++)l.push(a[h[d]]);return l}for(var c in a)l.push(a[c]);return l},n.get=function(a,l,h,d){l=l.split(".").slice(h,d);for(var c=0;c<l.length;c+=1)a=a[l[c]];return a},n.set=function(a,l,h,d,c){var g=l.split(".").slice(d,c);return n.get(a,l,0,-1)[g[g.length-1]]=h,h},n.shuffle=function(a){for(var l=a.length-1;l>0;l--){var h=Math.floor(n.random()*(l+1)),d=a[l];a[l]=a[h],a[h]=d}return a},n.choose=function(a){return a[Math.floor(n.random()*a.length)]},n.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},n.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},n.isFunction=function(a){return typeof a=="function"},n.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},n.isString=function(a){return toString.call(a)==="[object String]"},n.clamp=function(a,l,h){return a<l?l:a>h?h:a},n.sign=function(a){return a<0?-1:1},n.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(a,l){return a=typeof a<"u"?a:0,l=typeof l<"u"?l:1,a+i()*(l-a)};var i=function(){return n._seed=(n._seed*9301+49297)%233280,n._seed/233280};n.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[a]||(n.warn(a),n._warnedOnce[a]=!0)},n.deprecated=function(a,l,h){a[l]=n.chain(function(){n.warnOnce(" deprecated ",h)},a[l])},n.nextId=function(){return n._nextId++},n.indexOf=function(a,l){if(a.indexOf)return a.indexOf(l);for(var h=0;h<a.length;h++)if(a[h]===l)return h;return-1},n.map=function(a,l){if(a.map)return a.map(l);for(var h=[],d=0;d<a.length;d+=1)h.push(l(a[d]));return h},n.topologicalSort=function(a){var l=[],h=[],d=[];for(var c in a)!h[c]&&!d[c]&&n._topologicalSort(c,h,d,a,l);return l},n._topologicalSort=function(a,l,h,d,c){var g=d[a]||[];h[a]=!0;for(var f=0;f<g.length;f+=1){var o=g[f];h[o]||l[o]||n._topologicalSort(o,l,h,d,c)}h[a]=!1,l[a]=!0,c.push(a)},n.chain=function(){for(var a=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?a.push.apply(a,h._chained):a.push(h)}var d=function(){for(var c,g=new Array(arguments.length),f=0,o=arguments.length;f<o;f++)g[f]=arguments[f];for(f=0;f<a.length;f+=1){var u=a[f].apply(c,g);typeof u<"u"&&(c=u)}return c};return d._chained=a,d},n.chainPathBefore=function(a,l,h){return n.set(a,l,n.chain(h,n.get(a,l)))},n.chainPathAfter=function(a,l,h){return n.set(a,l,n.chain(n.get(a,l),h))},n.setDecomp=function(a){n._decomp=a},n.getDecomp=function(){var a=n._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof he<"u"&&(a=he.decomp)}catch{a=null}return a}}()},function(s,r){var n={};s.exports=n,function(){n.create=function(i){var a={min:{x:0,y:0},max:{x:0,y:0}};return i&&n.update(a,i),a},n.update=function(i,a,l){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var h=0;h<a.length;h++){var d=a[h];d.x>i.max.x&&(i.max.x=d.x),d.x<i.min.x&&(i.min.x=d.x),d.y>i.max.y&&(i.max.y=d.y),d.y<i.min.y&&(i.min.y=d.y)}l&&(l.x>0?i.max.x+=l.x:i.min.x+=l.x,l.y>0?i.max.y+=l.y:i.min.y+=l.y)},n.contains=function(i,a){return a.x>=i.min.x&&a.x<=i.max.x&&a.y>=i.min.y&&a.y<=i.max.y},n.overlaps=function(i,a){return i.min.x<=a.max.x&&i.max.x>=a.min.x&&i.max.y>=a.min.y&&i.min.y<=a.max.y},n.translate=function(i,a){i.min.x+=a.x,i.max.x+=a.x,i.min.y+=a.y,i.max.y+=a.y},n.shift=function(i,a){var l=i.max.x-i.min.x,h=i.max.y-i.min.y;i.min.x=a.x,i.max.x=a.x+l,i.min.y=a.y,i.max.y=a.y+h}}()},function(s,r){var n={};s.exports=n,function(){n.create=function(i,a){return{x:i||0,y:a||0}},n.clone=function(i){return{x:i.x,y:i.y}},n.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},n.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},n.rotate=function(i,a,l){var h=Math.cos(a),d=Math.sin(a);l||(l={});var c=i.x*h-i.y*d;return l.y=i.x*d+i.y*h,l.x=c,l},n.rotateAbout=function(i,a,l,h){var d=Math.cos(a),c=Math.sin(a);h||(h={});var g=l.x+((i.x-l.x)*d-(i.y-l.y)*c);return h.y=l.y+((i.x-l.x)*c+(i.y-l.y)*d),h.x=g,h},n.normalise=function(i){var a=n.magnitude(i);return a===0?{x:0,y:0}:{x:i.x/a,y:i.y/a}},n.dot=function(i,a){return i.x*a.x+i.y*a.y},n.cross=function(i,a){return i.x*a.y-i.y*a.x},n.cross3=function(i,a,l){return(a.x-i.x)*(l.y-i.y)-(a.y-i.y)*(l.x-i.x)},n.add=function(i,a,l){return l||(l={}),l.x=i.x+a.x,l.y=i.y+a.y,l},n.sub=function(i,a,l){return l||(l={}),l.x=i.x-a.x,l.y=i.y-a.y,l},n.mult=function(i,a){return{x:i.x*a,y:i.y*a}},n.div=function(i,a){return{x:i.x/a,y:i.y/a}},n.perp=function(i,a){return a=a===!0?-1:1,{x:a*-i.y,y:a*i.x}},n.neg=function(i){return{x:-i.x,y:-i.y}},n.angle=function(i,a){return Math.atan2(a.y-i.y,a.x-i.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}()},function(s,r,n){var i={};s.exports=i;var a=n(2),l=n(0);(function(){i.create=function(h,d){for(var c=[],g=0;g<h.length;g++){var f=h[g],o={x:f.x,y:f.y,index:g,body:d,isInternal:!1};c.push(o)}return c},i.fromPath=function(h,d){var c=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,g=[];return h.replace(c,function(f,o,u){g.push({x:parseFloat(o),y:parseFloat(u)})}),i.create(g,d)},i.centre=function(h){for(var d=i.area(h,!0),c={x:0,y:0},g,f,o,u=0;u<h.length;u++)o=(u+1)%h.length,g=a.cross(h[u],h[o]),f=a.mult(a.add(h[u],h[o]),g),c=a.add(c,f);return a.div(c,6*d)},i.mean=function(h){for(var d={x:0,y:0},c=0;c<h.length;c++)d.x+=h[c].x,d.y+=h[c].y;return a.div(d,h.length)},i.area=function(h,d){for(var c=0,g=h.length-1,f=0;f<h.length;f++)c+=(h[g].x-h[f].x)*(h[g].y+h[f].y),g=f;return d?c/2:Math.abs(c)/2},i.inertia=function(h,d){for(var c=0,g=0,f=h,o,u,p=0;p<f.length;p++)u=(p+1)%f.length,o=Math.abs(a.cross(f[u],f[p])),c+=o*(a.dot(f[u],f[u])+a.dot(f[u],f[p])+a.dot(f[p],f[p])),g+=o;return d/6*(c/g)},i.translate=function(h,d,c){c=typeof c<"u"?c:1;var g=h.length,f=d.x*c,o=d.y*c,u;for(u=0;u<g;u++)h[u].x+=f,h[u].y+=o;return h},i.rotate=function(h,d,c){if(d!==0){var g=Math.cos(d),f=Math.sin(d),o=c.x,u=c.y,p=h.length,m,y,v,b;for(b=0;b<p;b++)m=h[b],y=m.x-o,v=m.y-u,m.x=o+(y*g-v*f),m.y=u+(y*f+v*g);return h}},i.contains=function(h,d){for(var c=d.x,g=d.y,f=h.length,o=h[f-1],u,p=0;p<f;p++){if(u=h[p],(c-o.x)*(u.y-o.y)+(g-o.y)*(o.x-u.x)>0)return!1;o=u}return!0},i.scale=function(h,d,c,g){if(d===1&&c===1)return h;g=g||i.centre(h);for(var f,o,u=0;u<h.length;u++)f=h[u],o=a.sub(f,g),h[u].x=g.x+o.x*d,h[u].y=g.y+o.y*c;return h},i.chamfer=function(h,d,c,g,f){typeof d=="number"?d=[d]:d=d||[8],c=typeof c<"u"?c:-1,g=g||2,f=f||14;for(var o=[],u=0;u<h.length;u++){var p=h[u-1>=0?u-1:h.length-1],m=h[u],y=h[(u+1)%h.length],v=d[u<d.length?u:d.length-1];if(v===0){o.push(m);continue}var b=a.normalise({x:m.y-p.y,y:p.x-m.x}),M=a.normalise({x:y.y-m.y,y:m.x-y.x}),x=Math.sqrt(2*Math.pow(v,2)),S=a.mult(l.clone(b),v),_=a.normalise(a.mult(a.add(b,M),.5)),w=a.sub(m,a.mult(_,x)),P=c;c===-1&&(P=Math.pow(v,.32)*1.75),P=l.clamp(P,g,f),P%2===1&&(P+=1);for(var C=Math.acos(a.dot(b,M)),k=C/P,T=0;T<P;T++)o.push(a.add(a.rotate(S,k*T),w))}return o},i.clockwiseSort=function(h){var d=i.mean(h);return h.sort(function(c,g){return a.angle(d,c)-a.angle(d,g)}),h},i.isConvex=function(h){var d=0,c=h.length,g,f,o,u;if(c<3)return null;for(g=0;g<c;g++)if(f=(g+1)%c,o=(g+2)%c,u=(h[f].x-h[g].x)*(h[o].y-h[f].y),u-=(h[f].y-h[g].y)*(h[o].x-h[f].x),u<0?d|=1:u>0&&(d|=2),d===3)return!1;return d!==0?!0:null},i.hull=function(h){var d=[],c=[],g,f;for(h=h.slice(0),h.sort(function(o,u){var p=o.x-u.x;return p!==0?p:o.y-u.y}),f=0;f<h.length;f+=1){for(g=h[f];c.length>=2&&a.cross3(c[c.length-2],c[c.length-1],g)<=0;)c.pop();c.push(g)}for(f=h.length-1;f>=0;f-=1){for(g=h[f];d.length>=2&&a.cross3(d[d.length-2],d[d.length-1],g)<=0;)d.pop();d.push(g)}return d.pop(),c.pop(),d.concat(c)}})()},function(s,r,n){var i={};s.exports=i;var a=n(3),l=n(2),h=n(7),d=n(0),c=n(1),g=n(11);(function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(o){var u={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},p=d.extend(u,o);return f(p,o),p},i.nextGroup=function(o){return o?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var f=function(o,u){u=u||{},i.set(o,{bounds:o.bounds||c.create(o.vertices),positionPrev:o.positionPrev||l.clone(o.position),anglePrev:o.anglePrev||o.angle,vertices:o.vertices,parts:o.parts||[o],isStatic:o.isStatic,isSleeping:o.isSleeping,parent:o.parent||o}),a.rotate(o.vertices,o.angle,o.position),g.rotate(o.axes,o.angle),c.update(o.bounds,o.vertices,o.velocity),i.set(o,{axes:u.axes||o.axes,area:u.area||o.area,mass:u.mass||o.mass,inertia:u.inertia||o.inertia});var p=o.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=o.isStatic?"#555":"#ccc",y=o.isStatic&&o.render.fillStyle===null?1:0;o.render.fillStyle=o.render.fillStyle||p,o.render.strokeStyle=o.render.strokeStyle||m,o.render.lineWidth=o.render.lineWidth||y,o.render.sprite.xOffset+=-(o.bounds.min.x-o.position.x)/(o.bounds.max.x-o.bounds.min.x),o.render.sprite.yOffset+=-(o.bounds.min.y-o.position.y)/(o.bounds.max.y-o.bounds.min.y)};i.set=function(o,u,p){var m;typeof u=="string"&&(m=u,u={},u[m]=p);for(m in u)if(Object.prototype.hasOwnProperty.call(u,m))switch(p=u[m],m){case"isStatic":i.setStatic(o,p);break;case"isSleeping":h.set(o,p);break;case"mass":i.setMass(o,p);break;case"density":i.setDensity(o,p);break;case"inertia":i.setInertia(o,p);break;case"vertices":i.setVertices(o,p);break;case"position":i.setPosition(o,p);break;case"angle":i.setAngle(o,p);break;case"velocity":i.setVelocity(o,p);break;case"angularVelocity":i.setAngularVelocity(o,p);break;case"speed":i.setSpeed(o,p);break;case"angularSpeed":i.setAngularSpeed(o,p);break;case"parts":i.setParts(o,p);break;case"centre":i.setCentre(o,p);break;default:o[m]=p}},i.setStatic=function(o,u){for(var p=0;p<o.parts.length;p++){var m=o.parts[p];m.isStatic=u,u?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},i.setMass=function(o,u){var p=o.inertia/(o.mass/6);o.inertia=p*(u/6),o.inverseInertia=1/o.inertia,o.mass=u,o.inverseMass=1/o.mass,o.density=o.mass/o.area},i.setDensity=function(o,u){i.setMass(o,u*o.area),o.density=u},i.setInertia=function(o,u){o.inertia=u,o.inverseInertia=1/o.inertia},i.setVertices=function(o,u){u[0].body===o?o.vertices=u:o.vertices=a.create(u,o),o.axes=g.fromVertices(o.vertices),o.area=a.area(o.vertices),i.setMass(o,o.density*o.area);var p=a.centre(o.vertices);a.translate(o.vertices,p,-1),i.setInertia(o,i._inertiaScale*a.inertia(o.vertices,o.mass)),a.translate(o.vertices,o.position),c.update(o.bounds,o.vertices,o.velocity)},i.setParts=function(o,u,p){var m;for(u=u.slice(0),o.parts.length=0,o.parts.push(o),o.parent=o,m=0;m<u.length;m++){var y=u[m];y!==o&&(y.parent=o,o.parts.push(y))}if(o.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var v=[];for(m=0;m<u.length;m++)v=v.concat(u[m].vertices);a.clockwiseSort(v);var b=a.hull(v),M=a.centre(b);i.setVertices(o,b),a.translate(o.vertices,M)}var x=i._totalProperties(o);o.area=x.area,o.parent=o,o.position.x=x.centre.x,o.position.y=x.centre.y,o.positionPrev.x=x.centre.x,o.positionPrev.y=x.centre.y,i.setMass(o,x.mass),i.setInertia(o,x.inertia),i.setPosition(o,x.centre)}},i.setCentre=function(o,u,p){p?(o.positionPrev.x+=u.x,o.positionPrev.y+=u.y,o.position.x+=u.x,o.position.y+=u.y):(o.positionPrev.x=u.x-(o.position.x-o.positionPrev.x),o.positionPrev.y=u.y-(o.position.y-o.positionPrev.y),o.position.x=u.x,o.position.y=u.y)},i.setPosition=function(o,u,p){var m=l.sub(u,o.position);p?(o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.velocity.x=m.x,o.velocity.y=m.y,o.speed=l.magnitude(m)):(o.positionPrev.x+=m.x,o.positionPrev.y+=m.y);for(var y=0;y<o.parts.length;y++){var v=o.parts[y];v.position.x+=m.x,v.position.y+=m.y,a.translate(v.vertices,m),c.update(v.bounds,v.vertices,o.velocity)}},i.setAngle=function(o,u,p){var m=u-o.angle;p?(o.anglePrev=o.angle,o.angularVelocity=m,o.angularSpeed=Math.abs(m)):o.anglePrev+=m;for(var y=0;y<o.parts.length;y++){var v=o.parts[y];v.angle+=m,a.rotate(v.vertices,m,o.position),g.rotate(v.axes,m),c.update(v.bounds,v.vertices,o.velocity),y>0&&l.rotateAbout(v.position,m,o.position,v.position)}},i.setVelocity=function(o,u){var p=o.deltaTime/i._baseDelta;o.positionPrev.x=o.position.x-u.x*p,o.positionPrev.y=o.position.y-u.y*p,o.velocity.x=(o.position.x-o.positionPrev.x)/p,o.velocity.y=(o.position.y-o.positionPrev.y)/p,o.speed=l.magnitude(o.velocity)},i.getVelocity=function(o){var u=i._baseDelta/o.deltaTime;return{x:(o.position.x-o.positionPrev.x)*u,y:(o.position.y-o.positionPrev.y)*u}},i.getSpeed=function(o){return l.magnitude(i.getVelocity(o))},i.setSpeed=function(o,u){i.setVelocity(o,l.mult(l.normalise(i.getVelocity(o)),u))},i.setAngularVelocity=function(o,u){var p=o.deltaTime/i._baseDelta;o.anglePrev=o.angle-u*p,o.angularVelocity=(o.angle-o.anglePrev)/p,o.angularSpeed=Math.abs(o.angularVelocity)},i.getAngularVelocity=function(o){return(o.angle-o.anglePrev)*i._baseDelta/o.deltaTime},i.getAngularSpeed=function(o){return Math.abs(i.getAngularVelocity(o))},i.setAngularSpeed=function(o,u){i.setAngularVelocity(o,d.sign(i.getAngularVelocity(o))*u)},i.translate=function(o,u,p){i.setPosition(o,l.add(o.position,u),p)},i.rotate=function(o,u,p,m){if(!p)i.setAngle(o,o.angle+u,m);else{var y=Math.cos(u),v=Math.sin(u),b=o.position.x-p.x,M=o.position.y-p.y;i.setPosition(o,{x:p.x+(b*y-M*v),y:p.y+(b*v+M*y)},m),i.setAngle(o,o.angle+u,m)}},i.scale=function(o,u,p,m){var y=0,v=0;m=m||o.position;for(var b=0;b<o.parts.length;b++){var M=o.parts[b];a.scale(M.vertices,u,p,m),M.axes=g.fromVertices(M.vertices),M.area=a.area(M.vertices),i.setMass(M,o.density*M.area),a.translate(M.vertices,{x:-M.position.x,y:-M.position.y}),i.setInertia(M,i._inertiaScale*a.inertia(M.vertices,M.mass)),a.translate(M.vertices,{x:M.position.x,y:M.position.y}),b>0&&(y+=M.area,v+=M.inertia),M.position.x=m.x+(M.position.x-m.x)*u,M.position.y=m.y+(M.position.y-m.y)*p,c.update(M.bounds,M.vertices,o.velocity)}o.parts.length>1&&(o.area=y,o.isStatic||(i.setMass(o,o.density*y),i.setInertia(o,v))),o.circleRadius&&(u===p?o.circleRadius*=u:o.circleRadius=null)},i.update=function(o,u){u=(typeof u<"u"?u:1e3/60)*o.timeScale;var p=u*u,m=i._timeCorrection?u/(o.deltaTime||u):1,y=1-o.frictionAir*(u/d._baseDelta),v=(o.position.x-o.positionPrev.x)*m,b=(o.position.y-o.positionPrev.y)*m;o.velocity.x=v*y+o.force.x/o.mass*p,o.velocity.y=b*y+o.force.y/o.mass*p,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.position.x+=o.velocity.x,o.position.y+=o.velocity.y,o.deltaTime=u,o.angularVelocity=(o.angle-o.anglePrev)*y*m+o.torque/o.inertia*p,o.anglePrev=o.angle,o.angle+=o.angularVelocity;for(var M=0;M<o.parts.length;M++){var x=o.parts[M];a.translate(x.vertices,o.velocity),M>0&&(x.position.x+=o.velocity.x,x.position.y+=o.velocity.y),o.angularVelocity!==0&&(a.rotate(x.vertices,o.angularVelocity,o.position),g.rotate(x.axes,o.angularVelocity),M>0&&l.rotateAbout(x.position,o.angularVelocity,o.position,x.position)),c.update(x.bounds,x.vertices,o.velocity)}},i.updateVelocities=function(o){var u=i._baseDelta/o.deltaTime,p=o.velocity;p.x=(o.position.x-o.positionPrev.x)*u,p.y=(o.position.y-o.positionPrev.y)*u,o.speed=Math.sqrt(p.x*p.x+p.y*p.y),o.angularVelocity=(o.angle-o.anglePrev)*u,o.angularSpeed=Math.abs(o.angularVelocity)},i.applyForce=function(o,u,p){var m={x:u.x-o.position.x,y:u.y-o.position.y};o.force.x+=p.x,o.force.y+=p.y,o.torque+=m.x*p.y-m.y*p.x},i._totalProperties=function(o){for(var u={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=o.parts.length===1?0:1;p<o.parts.length;p++){var m=o.parts[p],y=m.mass!==1/0?m.mass:1;u.mass+=y,u.area+=m.area,u.inertia+=m.inertia,u.centre=l.add(u.centre,l.mult(m.position,y))}return u.centre=l.div(u.centre,u.mass),u}})()},function(s,r,n){var i={};s.exports=i;var a=n(0);(function(){i.on=function(l,h,d){for(var c=h.split(" "),g,f=0;f<c.length;f++)g=c[f],l.events=l.events||{},l.events[g]=l.events[g]||[],l.events[g].push(d);return d},i.off=function(l,h,d){if(!h){l.events={};return}typeof h=="function"&&(d=h,h=a.keys(l.events).join(" "));for(var c=h.split(" "),g=0;g<c.length;g++){var f=l.events[c[g]],o=[];if(d&&f)for(var u=0;u<f.length;u++)f[u]!==d&&o.push(f[u]);l.events[c[g]]=o}},i.trigger=function(l,h,d){var c,g,f,o,u=l.events;if(u&&a.keys(u).length>0){d||(d={}),c=h.split(" ");for(var p=0;p<c.length;p++)if(g=c[p],f=u[g],f){o=a.clone(d,!1),o.name=g,o.source=l;for(var m=0;m<f.length;m++)f[m].apply(l,[o])}}}})()},function(s,r,n){var i={};s.exports=i;var a=n(5),l=n(0),h=n(1),d=n(4);(function(){i.create=function(c){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},c)},i.setModified=function(c,g,f,o){if(c.isModified=g,g&&c.cache&&(c.cache.allBodies=null,c.cache.allConstraints=null,c.cache.allComposites=null),f&&c.parent&&i.setModified(c.parent,g,f,o),o)for(var u=0;u<c.composites.length;u++){var p=c.composites[u];i.setModified(p,g,f,o)}},i.add=function(c,g){var f=[].concat(g);a.trigger(c,"beforeAdd",{object:g});for(var o=0;o<f.length;o++){var u=f[o];switch(u.type){case"body":if(u.parent!==u){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(c,u);break;case"constraint":i.addConstraint(c,u);break;case"composite":i.addComposite(c,u);break;case"mouseConstraint":i.addConstraint(c,u.constraint);break}}return a.trigger(c,"afterAdd",{object:g}),c},i.remove=function(c,g,f){var o=[].concat(g);a.trigger(c,"beforeRemove",{object:g});for(var u=0;u<o.length;u++){var p=o[u];switch(p.type){case"body":i.removeBody(c,p,f);break;case"constraint":i.removeConstraint(c,p,f);break;case"composite":i.removeComposite(c,p,f);break;case"mouseConstraint":i.removeConstraint(c,p.constraint);break}}return a.trigger(c,"afterRemove",{object:g}),c},i.addComposite=function(c,g){return c.composites.push(g),g.parent=c,i.setModified(c,!0,!0,!1),c},i.removeComposite=function(c,g,f){var o=l.indexOf(c.composites,g);if(o!==-1&&i.removeCompositeAt(c,o),f)for(var u=0;u<c.composites.length;u++)i.removeComposite(c.composites[u],g,!0);return c},i.removeCompositeAt=function(c,g){return c.composites.splice(g,1),i.setModified(c,!0,!0,!1),c},i.addBody=function(c,g){return c.bodies.push(g),i.setModified(c,!0,!0,!1),c},i.removeBody=function(c,g,f){var o=l.indexOf(c.bodies,g);if(o!==-1&&i.removeBodyAt(c,o),f)for(var u=0;u<c.composites.length;u++)i.removeBody(c.composites[u],g,!0);return c},i.removeBodyAt=function(c,g){return c.bodies.splice(g,1),i.setModified(c,!0,!0,!1),c},i.addConstraint=function(c,g){return c.constraints.push(g),i.setModified(c,!0,!0,!1),c},i.removeConstraint=function(c,g,f){var o=l.indexOf(c.constraints,g);if(o!==-1&&i.removeConstraintAt(c,o),f)for(var u=0;u<c.composites.length;u++)i.removeConstraint(c.composites[u],g,!0);return c},i.removeConstraintAt=function(c,g){return c.constraints.splice(g,1),i.setModified(c,!0,!0,!1),c},i.clear=function(c,g,f){if(f)for(var o=0;o<c.composites.length;o++)i.clear(c.composites[o],g,!0);return g?c.bodies=c.bodies.filter(function(u){return u.isStatic}):c.bodies.length=0,c.constraints.length=0,c.composites.length=0,i.setModified(c,!0,!0,!1),c},i.allBodies=function(c){if(c.cache&&c.cache.allBodies)return c.cache.allBodies;for(var g=[].concat(c.bodies),f=0;f<c.composites.length;f++)g=g.concat(i.allBodies(c.composites[f]));return c.cache&&(c.cache.allBodies=g),g},i.allConstraints=function(c){if(c.cache&&c.cache.allConstraints)return c.cache.allConstraints;for(var g=[].concat(c.constraints),f=0;f<c.composites.length;f++)g=g.concat(i.allConstraints(c.composites[f]));return c.cache&&(c.cache.allConstraints=g),g},i.allComposites=function(c){if(c.cache&&c.cache.allComposites)return c.cache.allComposites;for(var g=[].concat(c.composites),f=0;f<c.composites.length;f++)g=g.concat(i.allComposites(c.composites[f]));return c.cache&&(c.cache.allComposites=g),g},i.get=function(c,g,f){var o,u;switch(f){case"body":o=i.allBodies(c);break;case"constraint":o=i.allConstraints(c);break;case"composite":o=i.allComposites(c).concat(c);break}return o?(u=o.filter(function(p){return p.id.toString()===g.toString()}),u.length===0?null:u[0]):null},i.move=function(c,g,f){return i.remove(c,g),i.add(f,g),c},i.rebase=function(c){for(var g=i.allBodies(c).concat(i.allConstraints(c)).concat(i.allComposites(c)),f=0;f<g.length;f++)g[f].id=l.nextId();return c},i.translate=function(c,g,f){for(var o=f?i.allBodies(c):c.bodies,u=0;u<o.length;u++)d.translate(o[u],g);return c},i.rotate=function(c,g,f,o){for(var u=Math.cos(g),p=Math.sin(g),m=o?i.allBodies(c):c.bodies,y=0;y<m.length;y++){var v=m[y],b=v.position.x-f.x,M=v.position.y-f.y;d.setPosition(v,{x:f.x+(b*u-M*p),y:f.y+(b*p+M*u)}),d.rotate(v,g)}return c},i.scale=function(c,g,f,o,u){for(var p=u?i.allBodies(c):c.bodies,m=0;m<p.length;m++){var y=p[m],v=y.position.x-o.x,b=y.position.y-o.y;d.setPosition(y,{x:o.x+v*g,y:o.y+b*f}),d.scale(y,g,f)}return c},i.bounds=function(c){for(var g=i.allBodies(c),f=[],o=0;o<g.length;o+=1){var u=g[o];f.push(u.bounds.min,u.bounds.max)}return h.create(f)}})()},function(s,r,n){var i={};s.exports=i;var a=n(4),l=n(5),h=n(0);(function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(d,c){for(var g=c/h._baseDelta,f=i._motionSleepThreshold,o=0;o<d.length;o++){var u=d[o],p=a.getSpeed(u),m=a.getAngularSpeed(u),y=p*p+m*m;if(u.force.x!==0||u.force.y!==0){i.set(u,!1);continue}var v=Math.min(u.motion,y),b=Math.max(u.motion,y);u.motion=i._minBias*v+(1-i._minBias)*b,u.sleepThreshold>0&&u.motion<f?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold/g&&i.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},i.afterCollisions=function(d){for(var c=i._motionSleepThreshold,g=0;g<d.length;g++){var f=d[g];if(f.isActive){var o=f.collision,u=o.bodyA.parent,p=o.bodyB.parent;if(!(u.isSleeping&&p.isSleeping||u.isStatic||p.isStatic)&&(u.isSleeping||p.isSleeping)){var m=u.isSleeping&&!u.isStatic?u:p,y=m===u?p:u;!m.isStatic&&y.motion>c&&i.set(m,!1)}}}},i.set=function(d,c){var g=d.isSleeping;c?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,g||l.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,g&&l.trigger(d,"sleepEnd"))}})()},function(s,r,n){var i={};s.exports=i;var a=n(3),l=n(9);(function(){var h=[],d={overlap:0,axis:null},c={overlap:0,axis:null};i.create=function(g,f){return{pair:null,collided:!1,bodyA:g,bodyB:f,parentA:g.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},i.collides=function(g,f,o){if(i._overlapAxes(d,g.vertices,f.vertices,g.axes),d.overlap<=0||(i._overlapAxes(c,f.vertices,g.vertices,f.axes),c.overlap<=0))return null;var u=o&&o.table[l.id(g,f)],p;u?p=u.collision:(p=i.create(g,f),p.collided=!0,p.bodyA=g.id<f.id?g:f,p.bodyB=g.id<f.id?f:g,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),g=p.bodyA,f=p.bodyB;var m;d.overlap<c.overlap?m=d:m=c;var y=p.normal,v=p.supports,b=m.axis,M=b.x,x=b.y;M*(f.position.x-g.position.x)+x*(f.position.y-g.position.y)<0?(y.x=M,y.y=x):(y.x=-M,y.y=-x),p.tangent.x=-y.y,p.tangent.y=y.x,p.depth=m.overlap,p.penetration.x=y.x*p.depth,p.penetration.y=y.y*p.depth;var S=i._findSupports(g,f,y,1),_=0;if(a.contains(g.vertices,S[0])&&(v[_++]=S[0]),a.contains(g.vertices,S[1])&&(v[_++]=S[1]),_<2){var w=i._findSupports(f,g,y,-1);a.contains(f.vertices,w[0])&&(v[_++]=w[0]),_<2&&a.contains(f.vertices,w[1])&&(v[_++]=w[1])}return _===0&&(v[_++]=S[0]),v.length=_,p},i._overlapAxes=function(g,f,o,u){var p=f.length,m=o.length,y=f[0].x,v=f[0].y,b=o[0].x,M=o[0].y,x=u.length,S=Number.MAX_VALUE,_=0,w,P,C,k,T,A;for(T=0;T<x;T++){var L=u[T],I=L.x,R=L.y,E=y*I+v*R,B=b*I+M*R,V=E,H=B;for(A=1;A<p;A+=1)k=f[A].x*I+f[A].y*R,k>V?V=k:k<E&&(E=k);for(A=1;A<m;A+=1)k=o[A].x*I+o[A].y*R,k>H?H=k:k<B&&(B=k);if(P=V-B,C=H-E,w=P<C?P:C,w<S&&(S=w,_=T,w<=0))break}g.axis=u[_],g.overlap=S},i._projectToAxis=function(g,f,o){for(var u=f[0].x*o.x+f[0].y*o.y,p=u,m=1;m<f.length;m+=1){var y=f[m].x*o.x+f[m].y*o.y;y>p?p=y:y<u&&(u=y)}g.min=u,g.max=p},i._findSupports=function(g,f,o,u){var p=f.vertices,m=p.length,y=g.position.x,v=g.position.y,b=o.x*u,M=o.y*u,x=Number.MAX_VALUE,S,_,w,P,C;for(C=0;C<m;C+=1)_=p[C],P=b*(y-_.x)+M*(v-_.y),P<x&&(x=P,S=_);return w=p[(m+S.index-1)%m],x=b*(y-w.x)+M*(v-w.y),_=p[(S.index+1)%m],b*(y-_.x)+M*(v-_.y)<x?(h[0]=S,h[1]=_,h):(h[0]=S,h[1]=w,h)}})()},function(s,r,n){var i={};s.exports=i;var a=n(16);(function(){i.create=function(l,h){var d=l.bodyA,c=l.bodyB,g={id:i.id(d,c),bodyA:d,bodyB:c,collision:l,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:d.isSensor||c.isSensor,timeCreated:h,timeUpdated:h,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(g,l,h),g},i.update=function(l,h,d){var c=l.contacts,g=h.supports,f=l.activeContacts,o=h.parentA,u=h.parentB,p=o.vertices.length;l.isActive=!0,l.timeUpdated=d,l.collision=h,l.separation=h.depth,l.inverseMass=o.inverseMass+u.inverseMass,l.friction=o.friction<u.friction?o.friction:u.friction,l.frictionStatic=o.frictionStatic>u.frictionStatic?o.frictionStatic:u.frictionStatic,l.restitution=o.restitution>u.restitution?o.restitution:u.restitution,l.slop=o.slop>u.slop?o.slop:u.slop,h.pair=l,f.length=0;for(var m=0;m<g.length;m++){var y=g[m],v=y.body===o?y.index:p+y.index,b=c[v];b?f.push(b):f.push(c[v]=a.create(y))}},i.setActive=function(l,h,d){h?(l.isActive=!0,l.timeUpdated=d):(l.isActive=!1,l.activeContacts.length=0)},i.id=function(l,h){return l.id<h.id?"A"+l.id+"B"+h.id:"A"+h.id+"B"+l.id}})()},function(s,r,n){var i={};s.exports=i;var a=n(3),l=n(2),h=n(7),d=n(1),c=n(11),g=n(0);(function(){i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(f){var o=f;o.bodyA&&!o.pointA&&(o.pointA={x:0,y:0}),o.bodyB&&!o.pointB&&(o.pointB={x:0,y:0});var u=o.bodyA?l.add(o.bodyA.position,o.pointA):o.pointA,p=o.bodyB?l.add(o.bodyB.position,o.pointB):o.pointB,m=l.magnitude(l.sub(u,p));o.length=typeof o.length<"u"?o.length:m,o.id=o.id||g.nextId(),o.label=o.label||"Constraint",o.type="constraint",o.stiffness=o.stiffness||(o.length>0?1:.7),o.damping=o.damping||0,o.angularStiffness=o.angularStiffness||0,o.angleA=o.bodyA?o.bodyA.angle:o.angleA,o.angleB=o.bodyB?o.bodyB.angle:o.angleB,o.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return o.length===0&&o.stiffness>.1?(y.type="pin",y.anchors=!1):o.stiffness<.9&&(y.type="spring"),o.render=g.extend(y,o.render),o},i.preSolveAll=function(f){for(var o=0;o<f.length;o+=1){var u=f[o],p=u.constraintImpulse;u.isStatic||p.x===0&&p.y===0&&p.angle===0||(u.position.x+=p.x,u.position.y+=p.y,u.angle+=p.angle)}},i.solveAll=function(f,o){for(var u=g.clamp(o/g._baseDelta,0,1),p=0;p<f.length;p+=1){var m=f[p],y=!m.bodyA||m.bodyA&&m.bodyA.isStatic,v=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(y||v)&&i.solve(f[p],u)}for(p=0;p<f.length;p+=1)m=f[p],y=!m.bodyA||m.bodyA&&m.bodyA.isStatic,v=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!y&&!v&&i.solve(f[p],u)},i.solve=function(f,o){var u=f.bodyA,p=f.bodyB,m=f.pointA,y=f.pointB;if(!(!u&&!p)){u&&!u.isStatic&&(l.rotate(m,u.angle-f.angleA,m),f.angleA=u.angle),p&&!p.isStatic&&(l.rotate(y,p.angle-f.angleB,y),f.angleB=p.angle);var v=m,b=y;if(u&&(v=l.add(u.position,m)),p&&(b=l.add(p.position,y)),!(!v||!b)){var M=l.sub(v,b),x=l.magnitude(M);x<i._minLength&&(x=i._minLength);var S=(x-f.length)/x,_=f.stiffness>=1||f.length===0,w=_?f.stiffness*o:f.stiffness*o*o,P=f.damping*o,C=l.mult(M,S*w),k=(u?u.inverseMass:0)+(p?p.inverseMass:0),T=(u?u.inverseInertia:0)+(p?p.inverseInertia:0),A=k+T,L,I,R,E,B;if(P>0){var V=l.create();R=l.div(M,x),B=l.sub(p&&l.sub(p.position,p.positionPrev)||V,u&&l.sub(u.position,u.positionPrev)||V),E=l.dot(R,B)}u&&!u.isStatic&&(I=u.inverseMass/k,u.constraintImpulse.x-=C.x*I,u.constraintImpulse.y-=C.y*I,u.position.x-=C.x*I,u.position.y-=C.y*I,P>0&&(u.positionPrev.x-=P*R.x*E*I,u.positionPrev.y-=P*R.y*E*I),L=l.cross(m,C)/A*i._torqueDampen*u.inverseInertia*(1-f.angularStiffness),u.constraintImpulse.angle-=L,u.angle-=L),p&&!p.isStatic&&(I=p.inverseMass/k,p.constraintImpulse.x+=C.x*I,p.constraintImpulse.y+=C.y*I,p.position.x+=C.x*I,p.position.y+=C.y*I,P>0&&(p.positionPrev.x+=P*R.x*E*I,p.positionPrev.y+=P*R.y*E*I),L=l.cross(y,C)/A*i._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=L,p.angle+=L)}}},i.postSolveAll=function(f){for(var o=0;o<f.length;o++){var u=f[o],p=u.constraintImpulse;if(!(u.isStatic||p.x===0&&p.y===0&&p.angle===0)){h.set(u,!1);for(var m=0;m<u.parts.length;m++){var y=u.parts[m];a.translate(y.vertices,p),m>0&&(y.position.x+=p.x,y.position.y+=p.y),p.angle!==0&&(a.rotate(y.vertices,p.angle,u.position),c.rotate(y.axes,p.angle),m>0&&l.rotateAbout(y.position,p.angle,u.position,y.position)),d.update(y.bounds,y.vertices,u.velocity)}p.angle*=i._warming,p.x*=i._warming,p.y*=i._warming}}},i.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},i.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}}})()},function(s,r,n){var i={};s.exports=i;var a=n(2),l=n(0);(function(){i.fromVertices=function(h){for(var d={},c=0;c<h.length;c++){var g=(c+1)%h.length,f=a.normalise({x:h[g].y-h[c].y,y:h[c].x-h[g].x}),o=f.y===0?1/0:f.x/f.y;o=o.toFixed(3).toString(),d[o]=f}return l.values(d)},i.rotate=function(h,d){if(d!==0)for(var c=Math.cos(d),g=Math.sin(d),f=0;f<h.length;f++){var o=h[f],u;u=o.x*c-o.y*g,o.y=o.x*g+o.y*c,o.x=u}}})()},function(s,r,n){var i={};s.exports=i;var a=n(3),l=n(0),h=n(4),d=n(1),c=n(2);(function(){i.rectangle=function(g,f,o,u,p){p=p||{};var m={label:"Rectangle Body",position:{x:g,y:f},vertices:a.fromPath("L 0 0 L "+o+" 0 L "+o+" "+u+" L 0 "+u)};if(p.chamfer){var y=p.chamfer;m.vertices=a.chamfer(m.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete p.chamfer}return h.create(l.extend({},m,p))},i.trapezoid=function(g,f,o,u,p,m){m=m||{},p*=.5;var y=(1-p*2)*o,v=o*p,b=v+y,M=b+v,x;p<.5?x="L 0 0 L "+v+" "+-u+" L "+b+" "+-u+" L "+M+" 0":x="L 0 0 L "+b+" "+-u+" L "+M+" 0";var S={label:"Trapezoid Body",position:{x:g,y:f},vertices:a.fromPath(x)};if(m.chamfer){var _=m.chamfer;S.vertices=a.chamfer(S.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete m.chamfer}return h.create(l.extend({},S,m))},i.circle=function(g,f,o,u,p){u=u||{};var m={label:"Circle Body",circleRadius:o};p=p||25;var y=Math.ceil(Math.max(10,Math.min(p,o)));return y%2===1&&(y+=1),i.polygon(g,f,y,o,l.extend({},m,u))},i.polygon=function(g,f,o,u,p){if(p=p||{},o<3)return i.circle(g,f,u,p);for(var m=2*Math.PI/o,y="",v=m*.5,b=0;b<o;b+=1){var M=v+b*m,x=Math.cos(M)*u,S=Math.sin(M)*u;y+="L "+x.toFixed(3)+" "+S.toFixed(3)+" "}var _={label:"Polygon Body",position:{x:g,y:f},vertices:a.fromPath(y)};if(p.chamfer){var w=p.chamfer;_.vertices=a.chamfer(_.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete p.chamfer}return h.create(l.extend({},_,p))},i.fromVertices=function(g,f,o,u,p,m,y,v){var b=l.getDecomp(),M,x,S,_,w,P,C,k,T,A,L;for(M=!!(b&&b.quickDecomp),u=u||{},S=[],p=typeof p<"u"?p:!1,m=typeof m<"u"?m:.01,y=typeof y<"u"?y:10,v=typeof v<"u"?v:.01,l.isArray(o[0])||(o=[o]),A=0;A<o.length;A+=1)if(P=o[A],_=a.isConvex(P),w=!_,w&&!M&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),_||!M)_?P=a.clockwiseSort(P):P=a.hull(P),S.push({position:{x:g,y:f},vertices:P});else{var I=P.map(function(Y){return[Y.x,Y.y]});b.makeCCW(I),m!==!1&&b.removeCollinearPoints(I,m),v!==!1&&b.removeDuplicatePoints&&b.removeDuplicatePoints(I,v);var R=b.quickDecomp(I);for(C=0;C<R.length;C++){var E=R[C],B=E.map(function(Y){return{x:Y[0],y:Y[1]}});y>0&&a.area(B)<y||S.push({position:a.centre(B),vertices:B})}}for(C=0;C<S.length;C++)S[C]=h.create(l.extend(S[C],u));if(p){var V=5;for(C=0;C<S.length;C++){var H=S[C];for(k=C+1;k<S.length;k++){var Q=S[k];if(d.overlaps(H.bounds,Q.bounds)){var W=H.vertices,X=Q.vertices;for(T=0;T<H.vertices.length;T++)for(L=0;L<Q.vertices.length;L++){var N=c.magnitudeSquared(c.sub(W[(T+1)%W.length],X[L])),at=c.magnitudeSquared(c.sub(W[T],X[(L+1)%X.length]));N<V&&at<V&&(W[T].isInternal=!0,X[L].isInternal=!0)}}}}}return S.length>1?(x=h.create(l.extend({parts:S.slice(0)},u)),h.setPosition(x,{x:g,y:f}),x):S[0]}})()},function(s,r,n){var i={};s.exports=i;var a=n(0),l=n(8);(function(){i.create=function(h){var d={bodies:[],pairs:null};return a.extend(d,h)},i.setBodies=function(h,d){h.bodies=d.slice(0)},i.clear=function(h){h.bodies=[]},i.collisions=function(h){var d=[],c=h.pairs,g=h.bodies,f=g.length,o=i.canCollide,u=l.collides,p,m;for(g.sort(i._compareBoundsX),p=0;p<f;p++){var y=g[p],v=y.bounds,b=y.bounds.max.x,M=y.bounds.max.y,x=y.bounds.min.y,S=y.isStatic||y.isSleeping,_=y.parts.length,w=_===1;for(m=p+1;m<f;m++){var P=g[m],C=P.bounds;if(C.min.x>b)break;if(!(M<C.min.y||x>C.max.y)&&!(S&&(P.isStatic||P.isSleeping))&&o(y.collisionFilter,P.collisionFilter)){var k=P.parts.length;if(w&&k===1){var T=u(y,P,c);T&&d.push(T)}else for(var A=_>1?1:0,L=k>1?1:0,I=A;I<_;I++)for(var R=y.parts[I],v=R.bounds,E=L;E<k;E++){var B=P.parts[E],C=B.bounds;if(!(v.min.x>C.max.x||v.max.x<C.min.x||v.max.y<C.min.y||v.min.y>C.max.y)){var T=u(R,B,c);T&&d.push(T)}}}}}return d},i.canCollide=function(h,d){return h.group===d.group&&h.group!==0?h.group>0:(h.mask&d.category)!==0&&(d.mask&h.category)!==0},i._compareBoundsX=function(h,d){return h.bounds.min.x-d.bounds.min.x}})()},function(s,r,n){var i={};s.exports=i;var a=n(0);(function(){i.create=function(l){var h={};return l||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),h.element=l||document.body,h.absolute={x:0,y:0},h.position={x:0,y:0},h.mousedownPosition={x:0,y:0},h.mouseupPosition={x:0,y:0},h.offset={x:0,y:0},h.scale={x:1,y:1},h.wheelDelta=0,h.button=-1,h.pixelRatio=parseInt(h.element.getAttribute("data-pixel-ratio"),10)||1,h.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},h.mousemove=function(d){var c=i._getRelativeMousePosition(d,h.element,h.pixelRatio),g=d.changedTouches;g&&(h.button=0,d.preventDefault()),h.absolute.x=c.x,h.absolute.y=c.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y,h.sourceEvents.mousemove=d},h.mousedown=function(d){var c=i._getRelativeMousePosition(d,h.element,h.pixelRatio),g=d.changedTouches;g?(h.button=0,d.preventDefault()):h.button=d.button,h.absolute.x=c.x,h.absolute.y=c.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y,h.mousedownPosition.x=h.position.x,h.mousedownPosition.y=h.position.y,h.sourceEvents.mousedown=d},h.mouseup=function(d){var c=i._getRelativeMousePosition(d,h.element,h.pixelRatio),g=d.changedTouches;g&&d.preventDefault(),h.button=-1,h.absolute.x=c.x,h.absolute.y=c.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y,h.mouseupPosition.x=h.position.x,h.mouseupPosition.y=h.position.y,h.sourceEvents.mouseup=d},h.mousewheel=function(d){h.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault()},i.setElement(h,h.element),h},i.setElement=function(l,h){l.element=h,h.addEventListener("mousemove",l.mousemove),h.addEventListener("mousedown",l.mousedown),h.addEventListener("mouseup",l.mouseup),h.addEventListener("mousewheel",l.mousewheel),h.addEventListener("DOMMouseScroll",l.mousewheel),h.addEventListener("touchmove",l.mousemove),h.addEventListener("touchstart",l.mousedown),h.addEventListener("touchend",l.mouseup)},i.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},i.setOffset=function(l,h){l.offset.x=h.x,l.offset.y=h.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},i.setScale=function(l,h){l.scale.x=h.x,l.scale.y=h.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},i._getRelativeMousePosition=function(l,h,d){var c=h.getBoundingClientRect(),g=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:g.scrollLeft,o=window.pageYOffset!==void 0?window.pageYOffset:g.scrollTop,u=l.changedTouches,p,m;return u?(p=u[0].pageX-c.left-f,m=u[0].pageY-c.top-o):(p=l.pageX-c.left-f,m=l.pageY-c.top-o),{x:p/(h.clientWidth/(h.width||h.clientWidth)*d),y:m/(h.clientHeight/(h.height||h.clientHeight)*d)}}})()},function(s,r,n){var i={};s.exports=i;var a=n(0);(function(){i._registry={},i.register=function(l){if(i.isPlugin(l)||a.warn("Plugin.register:",i.toString(l),"does not implement all required fields."),l.name in i._registry){var h=i._registry[l.name],d=i.versionParse(l.version).number,c=i.versionParse(h.version).number;d>c?(a.warn("Plugin.register:",i.toString(h),"was upgraded to",i.toString(l)),i._registry[l.name]=l):d<c?a.warn("Plugin.register:",i.toString(h),"can not be downgraded to",i.toString(l)):l!==h&&a.warn("Plugin.register:",i.toString(l),"is already registered to different plugin object")}else i._registry[l.name]=l;return l},i.resolve=function(l){return i._registry[i.dependencyParse(l).name]},i.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},i.isPlugin=function(l){return l&&l.name&&l.version&&l.install},i.isUsed=function(l,h){return l.used.indexOf(h)>-1},i.isFor=function(l,h){var d=l.for&&i.dependencyParse(l.for);return!l.for||h.name===d.name&&i.versionSatisfies(h.version,d.range)},i.use=function(l,h){if(l.uses=(l.uses||[]).concat(h||[]),l.uses.length===0){a.warn("Plugin.use:",i.toString(l),"does not specify any dependencies to install.");return}for(var d=i.dependencies(l),c=a.topologicalSort(d),g=[],f=0;f<c.length;f+=1)if(c[f]!==l.name){var o=i.resolve(c[f]);if(!o){g.push(" "+c[f]);continue}i.isUsed(l,o.name)||(i.isFor(o,l)||(a.warn("Plugin.use:",i.toString(o),"is for",o.for,"but installed on",i.toString(l)+"."),o._warned=!0),o.install?o.install(l):(a.warn("Plugin.use:",i.toString(o),"does not specify an install function."),o._warned=!0),o._warned?(g.push(" "+i.toString(o)),delete o._warned):g.push(" "+i.toString(o)),l.used.push(o.name))}g.length>0&&a.info(g.join("  "))},i.dependencies=function(l,h){var d=i.dependencyParse(l),c=d.name;if(h=h||{},!(c in h)){l=i.resolve(l)||l,h[c]=a.map(l.uses||[],function(f){i.isPlugin(f)&&i.register(f);var o=i.dependencyParse(f),u=i.resolve(f);return u&&!i.versionSatisfies(u.version,o.range)?(a.warn("Plugin.dependencies:",i.toString(u),"does not satisfy",i.toString(o),"used by",i.toString(d)+"."),u._warned=!0,l._warned=!0):u||(a.warn("Plugin.dependencies:",i.toString(f),"used by",i.toString(d),"could not be resolved."),l._warned=!0),o.name});for(var g=0;g<h[c].length;g+=1)i.dependencies(h[c][g],h);return h}},i.dependencyParse=function(l){if(a.isString(l)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return h.test(l)||a.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},i.versionParse=function(l){var h=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;h.test(l)||a.warn("Plugin.versionParse:",l,"is not a valid version or range.");var d=h.exec(l),c=Number(d[4]),g=Number(d[5]),f=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:l,operator:d[1]||d[2]||"",major:c,minor:g,patch:f,parts:[c,g,f],prerelease:d[7],number:c*1e8+g*1e4+f}},i.versionSatisfies=function(l,h){h=h||"*";var d=i.versionParse(h),c=i.versionParse(l);if(d.isRange){if(d.operator==="*"||l==="*")return!0;if(d.operator===">")return c.number>d.number;if(d.operator===">=")return c.number>=d.number;if(d.operator==="~")return c.major===d.major&&c.minor===d.minor&&c.patch>=d.patch;if(d.operator==="^")return d.major>0?c.major===d.major&&c.number>=d.number:d.minor>0?c.minor===d.minor&&c.patch>=d.patch:c.patch===d.patch}return l===h||l==="*"}})()},function(s,r){var n={};s.exports=n,function(){n.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},function(s,r,n){var i={};s.exports=i;var a=n(7),l=n(18),h=n(13),d=n(19),c=n(5),g=n(6),f=n(10),o=n(0),u=n(4);(function(){i.create=function(p){p=p||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},y=o.extend(m,p);return y.world=p.world||g.create({label:"World"}),y.pairs=p.pairs||d.create(),y.detector=p.detector||h.create(),y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},i.update=function(p,m){var y=o.now(),v=p.world,b=p.detector,M=p.pairs,x=p.timing,S=x.timestamp,_;m=typeof m<"u"?m:o._baseDelta,m*=x.timeScale,x.timestamp+=m,x.lastDelta=m;var w={timestamp:x.timestamp,delta:m};c.trigger(p,"beforeUpdate",w);var P=g.allBodies(v),C=g.allConstraints(v);for(v.isModified&&(h.setBodies(b,P),g.setModified(v,!1,!1,!0)),p.enableSleeping&&a.update(P,m),i._bodiesApplyGravity(P,p.gravity),m>0&&i._bodiesUpdate(P,m),f.preSolveAll(P),_=0;_<p.constraintIterations;_++)f.solveAll(C,m);f.postSolveAll(P),b.pairs=p.pairs;var k=h.collisions(b);d.update(M,k,S),p.enableSleeping&&a.afterCollisions(M.list),M.collisionStart.length>0&&c.trigger(p,"collisionStart",{pairs:M.collisionStart});var T=o.clamp(20/p.positionIterations,0,1);for(l.preSolvePosition(M.list),_=0;_<p.positionIterations;_++)l.solvePosition(M.list,m,T);for(l.postSolvePosition(P),f.preSolveAll(P),_=0;_<p.constraintIterations;_++)f.solveAll(C,m);for(f.postSolveAll(P),l.preSolveVelocity(M.list),_=0;_<p.velocityIterations;_++)l.solveVelocity(M.list,m);return i._bodiesUpdateVelocities(P),M.collisionActive.length>0&&c.trigger(p,"collisionActive",{pairs:M.collisionActive}),M.collisionEnd.length>0&&c.trigger(p,"collisionEnd",{pairs:M.collisionEnd}),i._bodiesClearForces(P),c.trigger(p,"afterUpdate",w),p.timing.lastElapsed=o.now()-y,p},i.merge=function(p,m){if(o.extend(p,m),m.world){p.world=m.world,i.clear(p);for(var y=g.allBodies(p.world),v=0;v<y.length;v++){var b=y[v];a.set(b,!1),b.id=o.nextId()}}},i.clear=function(p){d.clear(p.pairs),h.clear(p.detector)},i._bodiesClearForces=function(p){for(var m=p.length,y=0;y<m;y++){var v=p[y];v.force.x=0,v.force.y=0,v.torque=0}},i._bodiesApplyGravity=function(p,m){var y=typeof m.scale<"u"?m.scale:.001,v=p.length;if(!(m.x===0&&m.y===0||y===0))for(var b=0;b<v;b++){var M=p[b];M.isStatic||M.isSleeping||(M.force.y+=M.mass*m.y*y,M.force.x+=M.mass*m.x*y)}},i._bodiesUpdate=function(p,m){for(var y=p.length,v=0;v<y;v++){var b=p[v];b.isStatic||b.isSleeping||u.update(b,m)}},i._bodiesUpdateVelocities=function(p){for(var m=p.length,y=0;y<m;y++)u.updateVelocities(p[y])}})()},function(s,r,n){var i={};s.exports=i;var a=n(3),l=n(0),h=n(1);(function(){i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(d){var c,g,f,o=d.length;for(c=0;c<o;c++)g=d[c],g.isActive&&(f=g.activeContacts.length,g.collision.parentA.totalContacts+=f,g.collision.parentB.totalContacts+=f)},i.solvePosition=function(d,c,g){var f,o,u,p,m,y,v,b,M=i._positionDampen*(g||1),x=l.clamp(c/l._baseDelta,0,1),S=d.length;for(f=0;f<S;f++)o=d[f],!(!o.isActive||o.isSensor)&&(u=o.collision,p=u.parentA,m=u.parentB,y=u.normal,o.separation=y.x*(m.positionImpulse.x+u.penetration.x-p.positionImpulse.x)+y.y*(m.positionImpulse.y+u.penetration.y-p.positionImpulse.y));for(f=0;f<S;f++)o=d[f],!(!o.isActive||o.isSensor)&&(u=o.collision,p=u.parentA,m=u.parentB,y=u.normal,b=o.separation-o.slop*x,(p.isStatic||m.isStatic)&&(b*=2),p.isStatic||p.isSleeping||(v=M/p.totalContacts,p.positionImpulse.x+=y.x*b*v,p.positionImpulse.y+=y.y*b*v),m.isStatic||m.isSleeping||(v=M/m.totalContacts,m.positionImpulse.x-=y.x*b*v,m.positionImpulse.y-=y.y*b*v))},i.postSolvePosition=function(d){for(var c=i._positionWarming,g=d.length,f=a.translate,o=h.update,u=0;u<g;u++){var p=d[u],m=p.positionImpulse,y=m.x,v=m.y,b=p.velocity;if(p.totalContacts=0,y!==0||v!==0){for(var M=0;M<p.parts.length;M++){var x=p.parts[M];f(x.vertices,m),o(x.bounds,x.vertices,b),x.position.x+=y,x.position.y+=v}p.positionPrev.x+=y,p.positionPrev.y+=v,y*b.x+v*b.y<0?(m.x=0,m.y=0):(m.x*=c,m.y*=c)}}},i.preSolveVelocity=function(d){var c=d.length,g,f;for(g=0;g<c;g++){var o=d[g];if(!(!o.isActive||o.isSensor)){var u=o.activeContacts,p=u.length,m=o.collision,y=m.parentA,v=m.parentB,b=m.normal,M=m.tangent;for(f=0;f<p;f++){var x=u[f],S=x.vertex,_=x.normalImpulse,w=x.tangentImpulse;if(_!==0||w!==0){var P=b.x*_+M.x*w,C=b.y*_+M.y*w;y.isStatic||y.isSleeping||(y.positionPrev.x+=P*y.inverseMass,y.positionPrev.y+=C*y.inverseMass,y.anglePrev+=y.inverseInertia*((S.x-y.position.x)*C-(S.y-y.position.y)*P)),v.isStatic||v.isSleeping||(v.positionPrev.x-=P*v.inverseMass,v.positionPrev.y-=C*v.inverseMass,v.anglePrev-=v.inverseInertia*((S.x-v.position.x)*C-(S.y-v.position.y)*P))}}}}},i.solveVelocity=function(d,c){var g=c/l._baseDelta,f=g*g,o=f*g,u=-i._restingThresh*g,p=i._restingThreshTangent,m=i._frictionNormalMultiplier*g,y=i._frictionMaxStatic,v=d.length,b,M,x,S;for(x=0;x<v;x++){var _=d[x];if(!(!_.isActive||_.isSensor)){var w=_.collision,P=w.parentA,C=w.parentB,k=P.velocity,T=C.velocity,A=w.normal.x,L=w.normal.y,I=w.tangent.x,R=w.tangent.y,E=_.activeContacts,B=E.length,V=1/B,H=P.inverseMass+C.inverseMass,Q=_.friction*_.frictionStatic*m;for(k.x=P.position.x-P.positionPrev.x,k.y=P.position.y-P.positionPrev.y,T.x=C.position.x-C.positionPrev.x,T.y=C.position.y-C.positionPrev.y,P.angularVelocity=P.angle-P.anglePrev,C.angularVelocity=C.angle-C.anglePrev,S=0;S<B;S++){var W=E[S],X=W.vertex,N=X.x-P.position.x,at=X.y-P.position.y,Y=X.x-C.position.x,ft=X.y-C.position.y,it=k.x-at*P.angularVelocity,ss=k.y+N*P.angularVelocity,ns=T.x-ft*C.angularVelocity,rs=T.y+Y*C.angularVelocity,ze=it-ns,Ne=ss-rs,ae=A*ze+L*Ne,dt=I*ze+R*Ne,Ye=_.separation+ae,oe=Math.min(Ye,1);oe=Ye<0?0:oe;var Xe=oe*Q;dt<-Xe||dt>Xe?(M=dt>0?dt:-dt,b=_.friction*(dt>0?1:-1)*o,b<-M?b=-M:b>M&&(b=M)):(b=dt,M=y);var je=N*L-at*A,Ke=Y*L-ft*A,Qe=V/(H+P.inverseInertia*je*je+C.inverseInertia*Ke*Ke),Dt=(1+_.restitution)*ae*Qe;if(b*=Qe,ae<u)W.normalImpulse=0;else{var as=W.normalImpulse;W.normalImpulse+=Dt,W.normalImpulse>0&&(W.normalImpulse=0),Dt=W.normalImpulse-as}if(dt<-p||dt>p)W.tangentImpulse=0;else{var os=W.tangentImpulse;W.tangentImpulse+=b,W.tangentImpulse<-M&&(W.tangentImpulse=-M),W.tangentImpulse>M&&(W.tangentImpulse=M),b=W.tangentImpulse-os}var $t=A*Dt+I*b,Gt=L*Dt+R*b;P.isStatic||P.isSleeping||(P.positionPrev.x+=$t*P.inverseMass,P.positionPrev.y+=Gt*P.inverseMass,P.anglePrev+=(N*Gt-at*$t)*P.inverseInertia),C.isStatic||C.isSleeping||(C.positionPrev.x-=$t*C.inverseMass,C.positionPrev.y-=Gt*C.inverseMass,C.anglePrev-=(Y*Gt-ft*$t)*C.inverseInertia)}}}}})()},function(s,r,n){var i={};s.exports=i;var a=n(9),l=n(0);(function(){i.create=function(h){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},i.update=function(h,d,c){var g=h.list,f=g.length,o=h.table,u=d.length,p=h.collisionStart,m=h.collisionEnd,y=h.collisionActive,v,b,M,x;for(p.length=0,m.length=0,y.length=0,x=0;x<f;x++)g[x].confirmedActive=!1;for(x=0;x<u;x++)v=d[x],M=v.pair,M?(M.isActive?y.push(M):p.push(M),a.update(M,v,c),M.confirmedActive=!0):(M=a.create(v,c),o[M.id]=M,p.push(M),g.push(M));var S=[];for(f=g.length,x=0;x<f;x++)M=g[x],M.confirmedActive||(a.setActive(M,!1,c),m.push(M),!M.collision.bodyA.isSleeping&&!M.collision.bodyB.isSleeping&&S.push(x));for(x=0;x<S.length;x++)b=S[x]-x,M=g[b],g.splice(b,1),delete o[M.id]},i.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},function(s,r,n){var i=s.exports=n(21);i.Axes=n(11),i.Bodies=n(12),i.Body=n(4),i.Bounds=n(1),i.Collision=n(8),i.Common=n(0),i.Composite=n(6),i.Composites=n(22),i.Constraint=n(10),i.Contact=n(16),i.Detector=n(13),i.Engine=n(17),i.Events=n(5),i.Grid=n(23),i.Mouse=n(14),i.MouseConstraint=n(24),i.Pair=n(9),i.Pairs=n(19),i.Plugin=n(15),i.Query=n(25),i.Render=n(26),i.Resolver=n(18),i.Runner=n(27),i.SAT=n(28),i.Sleeping=n(7),i.Svg=n(29),i.Vector=n(2),i.Vertices=n(3),i.World=n(30),i.Engine.run=i.Runner.run,i.Common.deprecated(i.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(s,r,n){var i={};s.exports=i;var a=n(15),l=n(0);(function(){i.name="matter-js",i.version="0.19.0",i.uses=[],i.used=[],i.use=function(){a.use(i,Array.prototype.slice.call(arguments))},i.before=function(h,d){return h=h.replace(/^Matter./,""),l.chainPathBefore(i,h,d)},i.after=function(h,d){return h=h.replace(/^Matter./,""),l.chainPathAfter(i,h,d)}})()},function(s,r,n){var i={};s.exports=i;var a=n(6),l=n(10),h=n(0),d=n(4),c=n(12),g=h.deprecated;(function(){i.stack=function(f,o,u,p,m,y,v){for(var b=a.create({label:"Stack"}),M=f,x=o,S,_=0,w=0;w<p;w++){for(var P=0,C=0;C<u;C++){var k=v(M,x,C,w,S,_);if(k){var T=k.bounds.max.y-k.bounds.min.y,A=k.bounds.max.x-k.bounds.min.x;T>P&&(P=T),d.translate(k,{x:A*.5,y:T*.5}),M=k.bounds.max.x+m,a.addBody(b,k),S=k,_+=1}else M+=m}x+=P+y,M=f}return b},i.chain=function(f,o,u,p,m,y){for(var v=f.bodies,b=1;b<v.length;b++){var M=v[b-1],x=v[b],S=M.bounds.max.y-M.bounds.min.y,_=M.bounds.max.x-M.bounds.min.x,w=x.bounds.max.y-x.bounds.min.y,P=x.bounds.max.x-x.bounds.min.x,C={bodyA:M,pointA:{x:_*o,y:S*u},bodyB:x,pointB:{x:P*p,y:w*m}},k=h.extend(C,y);a.addConstraint(f,l.create(k))}return f.label+=" Chain",f},i.mesh=function(f,o,u,p,m){var y=f.bodies,v,b,M,x,S;for(v=0;v<u;v++){for(b=1;b<o;b++)M=y[b-1+v*o],x=y[b+v*o],a.addConstraint(f,l.create(h.extend({bodyA:M,bodyB:x},m)));if(v>0)for(b=0;b<o;b++)M=y[b+(v-1)*o],x=y[b+v*o],a.addConstraint(f,l.create(h.extend({bodyA:M,bodyB:x},m))),p&&b>0&&(S=y[b-1+(v-1)*o],a.addConstraint(f,l.create(h.extend({bodyA:S,bodyB:x},m)))),p&&b<o-1&&(S=y[b+1+(v-1)*o],a.addConstraint(f,l.create(h.extend({bodyA:S,bodyB:x},m))))}return f.label+=" Mesh",f},i.pyramid=function(f,o,u,p,m,y,v){return i.stack(f,o,u,p,m,y,function(b,M,x,S,_,w){var P=Math.min(p,Math.ceil(u/2)),C=_?_.bounds.max.x-_.bounds.min.x:0;if(!(S>P)){S=P-S;var k=S,T=u-1-S;if(!(x<k||x>T)){w===1&&d.translate(_,{x:(x+(u%2===1?1:-1))*C,y:0});var A=_?x*C:0;return v(f+A+x*m,M,x,S,_,w)}}})},i.newtonsCradle=function(f,o,u,p,m){for(var y=a.create({label:"Newtons Cradle"}),v=0;v<u;v++){var b=1.9,M=c.circle(f+v*(p*b),o+m,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=l.create({pointA:{x:f+v*(p*b),y:o},bodyB:M});a.addBody(y,M),a.addConstraint(y,x)}return y},g(i,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),i.car=function(f,o,u,p,m){var y=d.nextGroup(!0),v=20,b=-u*.5+v,M=u*.5-v,x=0,S=a.create({label:"Car"}),_=c.rectangle(f,o,u,p,{collisionFilter:{group:y},chamfer:{radius:p*.5},density:2e-4}),w=c.circle(f+b,o+x,m,{collisionFilter:{group:y},friction:.8}),P=c.circle(f+M,o+x,m,{collisionFilter:{group:y},friction:.8}),C=l.create({bodyB:_,pointB:{x:b,y:x},bodyA:w,stiffness:1,length:0}),k=l.create({bodyB:_,pointB:{x:M,y:x},bodyA:P,stiffness:1,length:0});return a.addBody(S,_),a.addBody(S,w),a.addBody(S,P),a.addConstraint(S,C),a.addConstraint(S,k),S},g(i,"car","Composites.car  moved to car example"),i.softBody=function(f,o,u,p,m,y,v,b,M,x){M=h.extend({inertia:1/0},M),x=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var S=i.stack(f,o,u,p,m,y,function(_,w){return c.circle(_,w,b,M)});return i.mesh(S,u,p,v,x),S.label="Soft Body",S},g(i,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(s,r,n){var i={};s.exports=i;var a=n(9),l=n(0),h=l.deprecated;(function(){i.create=function(d){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(c,d)},i.update=function(d,c,g,f){var o,u,p,m=g.world,y=d.buckets,v,b,M=!1;for(o=0;o<c.length;o++){var x=c[o];if(!(x.isSleeping&&!f)&&!(m.bounds&&(x.bounds.max.x<m.bounds.min.x||x.bounds.min.x>m.bounds.max.x||x.bounds.max.y<m.bounds.min.y||x.bounds.min.y>m.bounds.max.y))){var S=i._getRegion(d,x);if(!x.region||S.id!==x.region.id||f){(!x.region||f)&&(x.region=S);var _=i._regionUnion(S,x.region);for(u=_.startCol;u<=_.endCol;u++)for(p=_.startRow;p<=_.endRow;p++){b=i._getBucketId(u,p),v=y[b];var w=u>=S.startCol&&u<=S.endCol&&p>=S.startRow&&p<=S.endRow,P=u>=x.region.startCol&&u<=x.region.endCol&&p>=x.region.startRow&&p<=x.region.endRow;!w&&P&&P&&v&&i._bucketRemoveBody(d,v,x),(x.region===S||w&&!P||f)&&(v||(v=i._createBucket(y,b)),i._bucketAddBody(d,v,x))}x.region=S,M=!0}}}M&&(d.pairsList=i._createActivePairsList(d))},h(i,"update","Grid.update  replaced by Matter.Detector"),i.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},h(i,"clear","Grid.clear  replaced by Matter.Detector"),i._regionUnion=function(d,c){var g=Math.min(d.startCol,c.startCol),f=Math.max(d.endCol,c.endCol),o=Math.min(d.startRow,c.startRow),u=Math.max(d.endRow,c.endRow);return i._createRegion(g,f,o,u)},i._getRegion=function(d,c){var g=c.bounds,f=Math.floor(g.min.x/d.bucketWidth),o=Math.floor(g.max.x/d.bucketWidth),u=Math.floor(g.min.y/d.bucketHeight),p=Math.floor(g.max.y/d.bucketHeight);return i._createRegion(f,o,u,p)},i._createRegion=function(d,c,g,f){return{id:d+","+c+","+g+","+f,startCol:d,endCol:c,startRow:g,endRow:f}},i._getBucketId=function(d,c){return"C"+d+"R"+c},i._createBucket=function(d,c){var g=d[c]=[];return g},i._bucketAddBody=function(d,c,g){var f=d.pairs,o=a.id,u=c.length,p;for(p=0;p<u;p++){var m=c[p];if(!(g.id===m.id||g.isStatic&&m.isStatic)){var y=o(g,m),v=f[y];v?v[2]+=1:f[y]=[g,m,1]}}c.push(g)},i._bucketRemoveBody=function(d,c,g){var f=d.pairs,o=a.id,u;c.splice(l.indexOf(c,g),1);var p=c.length;for(u=0;u<p;u++){var m=f[o(g,c[u])];m&&(m[2]-=1)}},i._createActivePairsList=function(d){var c,g=d.pairs,f=l.keys(g),o=f.length,u=[],p;for(p=0;p<o;p++)c=g[f[p]],c[2]>0?u.push(c):delete g[f[p]];return u}})()},function(s,r,n){var i={};s.exports=i;var a=n(3),l=n(7),h=n(14),d=n(5),c=n(13),g=n(10),f=n(6),o=n(0),u=n(1);(function(){i.create=function(p,m){var y=(p?p.mouse:null)||(m?m.mouse:null);y||(p&&p.render&&p.render.canvas?y=h.create(p.render.canvas):m&&m.element?y=h.create(m.element):(y=h.create(),o.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var v=g.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),b={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:v,collisionFilter:{category:1,mask:4294967295,group:0}},M=o.extend(b,m);return d.on(p,"beforeUpdate",function(){var x=f.allBodies(p.world);i.update(M,x),i._triggerEvents(M)}),M},i.update=function(p,m){var y=p.mouse,v=p.constraint,b=p.body;if(y.button===0){if(v.bodyB)l.set(v.bodyB,!1),v.pointA=y.position;else for(var M=0;M<m.length;M++)if(b=m[M],u.contains(b.bounds,y.position)&&c.canCollide(b.collisionFilter,p.collisionFilter))for(var x=b.parts.length>1?1:0;x<b.parts.length;x++){var S=b.parts[x];if(a.contains(S.vertices,y.position)){v.pointA=y.position,v.bodyB=p.body=b,v.pointB={x:y.position.x-b.position.x,y:y.position.y-b.position.y},v.angleB=b.angle,l.set(b,!1),d.trigger(p,"startdrag",{mouse:y,body:b});break}}}else v.bodyB=p.body=null,v.pointB=null,b&&d.trigger(p,"enddrag",{mouse:y,body:b})},i._triggerEvents=function(p){var m=p.mouse,y=m.sourceEvents;y.mousemove&&d.trigger(p,"mousemove",{mouse:m}),y.mousedown&&d.trigger(p,"mousedown",{mouse:m}),y.mouseup&&d.trigger(p,"mouseup",{mouse:m}),h.clearSourceEvents(m)}})()},function(s,r,n){var i={};s.exports=i;var a=n(2),l=n(8),h=n(1),d=n(12),c=n(3);(function(){i.collides=function(g,f){for(var o=[],u=f.length,p=g.bounds,m=l.collides,y=h.overlaps,v=0;v<u;v++){var b=f[v],M=b.parts.length,x=M===1?0:1;if(y(b.bounds,p))for(var S=x;S<M;S++){var _=b.parts[S];if(y(_.bounds,p)){var w=m(_,g);if(w){o.push(w);break}}}}return o},i.ray=function(g,f,o,u){u=u||1e-100;for(var p=a.angle(f,o),m=a.magnitude(a.sub(f,o)),y=(o.x+f.x)*.5,v=(o.y+f.y)*.5,b=d.rectangle(y,v,m,u,{angle:p}),M=i.collides(b,g),x=0;x<M.length;x+=1){var S=M[x];S.body=S.bodyB=S.bodyA}return M},i.region=function(g,f,o){for(var u=[],p=0;p<g.length;p++){var m=g[p],y=h.overlaps(m.bounds,f);(y&&!o||!y&&o)&&u.push(m)}return u},i.point=function(g,f){for(var o=[],u=0;u<g.length;u++){var p=g[u];if(h.contains(p.bounds,f))for(var m=p.parts.length===1?0:1;m<p.parts.length;m++){var y=p.parts[m];if(h.contains(y.bounds,f)&&c.contains(y.vertices,f)){o.push(p);break}}}return o}})()},function(s,r,n){var i={};s.exports=i;var a=n(4),l=n(0),h=n(6),d=n(1),c=n(5),g=n(2),f=n(14);(function(){var o,u;typeof window<"u"&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(x){window.setTimeout(function(){x(l.now())},1e3/60)},u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i._goodFps=30,i._goodDelta=1e3/60,i.create=function(x){var S={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!x.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},_=l.extend(S,x);return _.canvas&&(_.canvas.width=_.options.width||_.canvas.width,_.canvas.height=_.options.height||_.canvas.height),_.mouse=x.mouse,_.engine=x.engine,_.canvas=_.canvas||y(_.options.width,_.options.height),_.context=_.canvas.getContext("2d"),_.textures={},_.bounds=_.bounds||{min:{x:0,y:0},max:{x:_.canvas.width,y:_.canvas.height}},_.controller=i,_.options.showBroadphase=!1,_.options.pixelRatio!==1&&i.setPixelRatio(_,_.options.pixelRatio),l.isElement(_.element)&&_.element.appendChild(_.canvas),_},i.run=function(x){(function S(_){x.frameRequestId=o(S),p(x,_),i.world(x,_),(x.options.showStats||x.options.showDebug)&&i.stats(x,x.context,_),(x.options.showPerformance||x.options.showDebug)&&i.performance(x,x.context,_)})()},i.stop=function(x){u(x.frameRequestId)},i.setPixelRatio=function(x,S){var _=x.options,w=x.canvas;S==="auto"&&(S=v(w)),_.pixelRatio=S,w.setAttribute("data-pixel-ratio",S),w.width=_.width*S,w.height=_.height*S,w.style.width=_.width+"px",w.style.height=_.height+"px"},i.lookAt=function(x,S,_,w){w=typeof w<"u"?w:!0,S=l.isArray(S)?S:[S],_=_||{x:0,y:0};for(var P={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},C=0;C<S.length;C+=1){var k=S[C],T=k.bounds?k.bounds.min:k.min||k.position||k,A=k.bounds?k.bounds.max:k.max||k.position||k;T&&A&&(T.x<P.min.x&&(P.min.x=T.x),A.x>P.max.x&&(P.max.x=A.x),T.y<P.min.y&&(P.min.y=T.y),A.y>P.max.y&&(P.max.y=A.y))}var L=P.max.x-P.min.x+2*_.x,I=P.max.y-P.min.y+2*_.y,R=x.canvas.height,E=x.canvas.width,B=E/R,V=L/I,H=1,Q=1;V>B?Q=V/B:H=B/V,x.options.hasBounds=!0,x.bounds.min.x=P.min.x,x.bounds.max.x=P.min.x+L*H,x.bounds.min.y=P.min.y,x.bounds.max.y=P.min.y+I*Q,w&&(x.bounds.min.x+=L*.5-L*H*.5,x.bounds.max.x+=L*.5-L*H*.5,x.bounds.min.y+=I*.5-I*Q*.5,x.bounds.max.y+=I*.5-I*Q*.5),x.bounds.min.x-=_.x,x.bounds.max.x-=_.x,x.bounds.min.y-=_.y,x.bounds.max.y-=_.y,x.mouse&&(f.setScale(x.mouse,{x:(x.bounds.max.x-x.bounds.min.x)/x.canvas.width,y:(x.bounds.max.y-x.bounds.min.y)/x.canvas.height}),f.setOffset(x.mouse,x.bounds.min))},i.startViewTransform=function(x){var S=x.bounds.max.x-x.bounds.min.x,_=x.bounds.max.y-x.bounds.min.y,w=S/x.options.width,P=_/x.options.height;x.context.setTransform(x.options.pixelRatio/w,0,0,x.options.pixelRatio/P,0,0),x.context.translate(-x.bounds.min.x,-x.bounds.min.y)},i.endViewTransform=function(x){x.context.setTransform(x.options.pixelRatio,0,0,x.options.pixelRatio,0,0)},i.world=function(x,S){var _=l.now(),w=x.engine,P=w.world,C=x.canvas,k=x.context,T=x.options,A=x.timing,L=h.allBodies(P),I=h.allConstraints(P),R=T.wireframes?T.wireframeBackground:T.background,E=[],B=[],V,H={timestamp:w.timing.timestamp};if(c.trigger(x,"beforeRender",H),x.currentBackground!==R&&M(x,R),k.globalCompositeOperation="source-in",k.fillStyle="transparent",k.fillRect(0,0,C.width,C.height),k.globalCompositeOperation="source-over",T.hasBounds){for(V=0;V<L.length;V++){var Q=L[V];d.overlaps(Q.bounds,x.bounds)&&E.push(Q)}for(V=0;V<I.length;V++){var W=I[V],X=W.bodyA,N=W.bodyB,at=W.pointA,Y=W.pointB;X&&(at=g.add(X.position,W.pointA)),N&&(Y=g.add(N.position,W.pointB)),!(!at||!Y)&&(d.contains(x.bounds,at)||d.contains(x.bounds,Y))&&B.push(W)}i.startViewTransform(x),x.mouse&&(f.setScale(x.mouse,{x:(x.bounds.max.x-x.bounds.min.x)/x.options.width,y:(x.bounds.max.y-x.bounds.min.y)/x.options.height}),f.setOffset(x.mouse,x.bounds.min))}else B=I,E=L,x.options.pixelRatio!==1&&x.context.setTransform(x.options.pixelRatio,0,0,x.options.pixelRatio,0,0);!T.wireframes||w.enableSleeping&&T.showSleeping?i.bodies(x,E,k):(T.showConvexHulls&&i.bodyConvexHulls(x,E,k),i.bodyWireframes(x,E,k)),T.showBounds&&i.bodyBounds(x,E,k),(T.showAxes||T.showAngleIndicator)&&i.bodyAxes(x,E,k),T.showPositions&&i.bodyPositions(x,E,k),T.showVelocity&&i.bodyVelocity(x,E,k),T.showIds&&i.bodyIds(x,E,k),T.showSeparations&&i.separations(x,w.pairs.list,k),T.showCollisions&&i.collisions(x,w.pairs.list,k),T.showVertexNumbers&&i.vertexNumbers(x,E,k),T.showMousePosition&&i.mousePosition(x,x.mouse,k),i.constraints(B,k),T.hasBounds&&i.endViewTransform(x),c.trigger(x,"afterRender",H),A.lastElapsed=l.now()-_},i.stats=function(x,S,_){for(var w=x.engine,P=w.world,C=h.allBodies(P),k=0,T=55,A=44,L=0,I=0,R=0;R<C.length;R+=1)k+=C[R].parts.length;var E={Part:k,Body:C.length,Cons:h.allConstraints(P).length,Comp:h.allComposites(P).length,Pair:w.pairs.list.length};S.fillStyle="#0e0f19",S.fillRect(L,I,T*5.5,A),S.font="12px Arial",S.textBaseline="top",S.textAlign="right";for(var B in E){var V=E[B];S.fillStyle="#aaa",S.fillText(B,L+T,I+8),S.fillStyle="#eee",S.fillText(V,L+T,I+26),L+=T}},i.performance=function(x,S){var _=x.engine,w=x.timing,P=w.deltaHistory,C=w.elapsedHistory,k=w.timestampElapsedHistory,T=w.engineDeltaHistory,A=w.engineElapsedHistory,L=_.timing.lastDelta,I=m(P),R=m(C),E=m(T),B=m(A),V=m(k),H=V/I||0,Q=1e3/I||0,W=4,X=12,N=60,at=34,Y=10,ft=69;S.fillStyle="#0e0f19",S.fillRect(0,50,X*4+N*5+22,at),i.status(S,Y,ft,N,W,P.length,Math.round(Q)+" fps",Q/i._goodFps,function(it){return P[it]/I-1}),i.status(S,Y+X+N,ft,N,W,T.length,L.toFixed(2)+" dt",i._goodDelta/L,function(it){return T[it]/E-1}),i.status(S,Y+(X+N)*2,ft,N,W,A.length,B.toFixed(2)+" ut",1-B/i._goodFps,function(it){return A[it]/B-1}),i.status(S,Y+(X+N)*3,ft,N,W,C.length,R.toFixed(2)+" rt",1-R/i._goodFps,function(it){return C[it]/R-1}),i.status(S,Y+(X+N)*4,ft,N,W,k.length,H.toFixed(2)+" x",H*H*H,function(it){return(k[it]/P[it]/H||0)-1})},i.status=function(x,S,_,w,P,C,k,T,A){x.strokeStyle="#888",x.fillStyle="#444",x.lineWidth=1,x.fillRect(S,_+7,w,1),x.beginPath(),x.moveTo(S,_+7-P*l.clamp(.4*A(0),-2,2));for(var L=0;L<w;L+=1)x.lineTo(S+L,_+7-(L<C?P*l.clamp(.4*A(L),-2,2):0));x.stroke(),x.fillStyle="hsl("+l.clamp(25+95*T,0,120)+",100%,60%)",x.fillRect(S,_-7,4,4),x.font="12px Arial",x.textBaseline="middle",x.textAlign="right",x.fillStyle="#eee",x.fillText(k,S+w,_-5)},i.constraints=function(x,S){for(var _=S,w=0;w<x.length;w++){var P=x[w];if(!(!P.render.visible||!P.pointA||!P.pointB)){var C=P.bodyA,k=P.bodyB,T,A;if(C?T=g.add(C.position,P.pointA):T=P.pointA,P.render.type==="pin")_.beginPath(),_.arc(T.x,T.y,3,0,2*Math.PI),_.closePath();else{if(k?A=g.add(k.position,P.pointB):A=P.pointB,_.beginPath(),_.moveTo(T.x,T.y),P.render.type==="spring")for(var L=g.sub(A,T),I=g.perp(g.normalise(L)),R=Math.ceil(l.clamp(P.length/5,12,20)),E,B=1;B<R;B+=1)E=B%2===0?1:-1,_.lineTo(T.x+L.x*(B/R)+I.x*E*4,T.y+L.y*(B/R)+I.y*E*4);_.lineTo(A.x,A.y)}P.render.lineWidth&&(_.lineWidth=P.render.lineWidth,_.strokeStyle=P.render.strokeStyle,_.stroke()),P.render.anchors&&(_.fillStyle=P.render.strokeStyle,_.beginPath(),_.arc(T.x,T.y,3,0,2*Math.PI),_.arc(A.x,A.y,3,0,2*Math.PI),_.closePath(),_.fill())}}},i.bodies=function(x,S,_){var w=_;x.engine;var P=x.options,C=P.showInternalEdges||!P.wireframes,k,T,A,L;for(A=0;A<S.length;A++)if(k=S[A],!!k.render.visible){for(L=k.parts.length>1?1:0;L<k.parts.length;L++)if(T=k.parts[L],!!T.render.visible){if(P.showSleeping&&k.isSleeping?w.globalAlpha=.5*T.render.opacity:T.render.opacity!==1&&(w.globalAlpha=T.render.opacity),T.render.sprite&&T.render.sprite.texture&&!P.wireframes){var I=T.render.sprite,R=b(x,I.texture);w.translate(T.position.x,T.position.y),w.rotate(T.angle),w.drawImage(R,R.width*-I.xOffset*I.xScale,R.height*-I.yOffset*I.yScale,R.width*I.xScale,R.height*I.yScale),w.rotate(-T.angle),w.translate(-T.position.x,-T.position.y)}else{if(T.circleRadius)w.beginPath(),w.arc(T.position.x,T.position.y,T.circleRadius,0,2*Math.PI);else{w.beginPath(),w.moveTo(T.vertices[0].x,T.vertices[0].y);for(var E=1;E<T.vertices.length;E++)!T.vertices[E-1].isInternal||C?w.lineTo(T.vertices[E].x,T.vertices[E].y):w.moveTo(T.vertices[E].x,T.vertices[E].y),T.vertices[E].isInternal&&!C&&w.moveTo(T.vertices[(E+1)%T.vertices.length].x,T.vertices[(E+1)%T.vertices.length].y);w.lineTo(T.vertices[0].x,T.vertices[0].y),w.closePath()}P.wireframes?(w.lineWidth=1,w.strokeStyle="#bbb",w.stroke()):(w.fillStyle=T.render.fillStyle,T.render.lineWidth&&(w.lineWidth=T.render.lineWidth,w.strokeStyle=T.render.strokeStyle,w.stroke()),w.fill())}w.globalAlpha=1}}},i.bodyWireframes=function(x,S,_){var w=_,P=x.options.showInternalEdges,C,k,T,A,L;for(w.beginPath(),T=0;T<S.length;T++)if(C=S[T],!!C.render.visible)for(L=C.parts.length>1?1:0;L<C.parts.length;L++){for(k=C.parts[L],w.moveTo(k.vertices[0].x,k.vertices[0].y),A=1;A<k.vertices.length;A++)!k.vertices[A-1].isInternal||P?w.lineTo(k.vertices[A].x,k.vertices[A].y):w.moveTo(k.vertices[A].x,k.vertices[A].y),k.vertices[A].isInternal&&!P&&w.moveTo(k.vertices[(A+1)%k.vertices.length].x,k.vertices[(A+1)%k.vertices.length].y);w.lineTo(k.vertices[0].x,k.vertices[0].y)}w.lineWidth=1,w.strokeStyle="#bbb",w.stroke()},i.bodyConvexHulls=function(x,S,_){var w=_,P,C,k;for(w.beginPath(),C=0;C<S.length;C++)if(P=S[C],!(!P.render.visible||P.parts.length===1)){for(w.moveTo(P.vertices[0].x,P.vertices[0].y),k=1;k<P.vertices.length;k++)w.lineTo(P.vertices[k].x,P.vertices[k].y);w.lineTo(P.vertices[0].x,P.vertices[0].y)}w.lineWidth=1,w.strokeStyle="rgba(255,255,255,0.2)",w.stroke()},i.vertexNumbers=function(x,S,_){var w=_,P,C,k;for(P=0;P<S.length;P++){var T=S[P].parts;for(k=T.length>1?1:0;k<T.length;k++){var A=T[k];for(C=0;C<A.vertices.length;C++)w.fillStyle="rgba(255,255,255,0.2)",w.fillText(P+"_"+C,A.position.x+(A.vertices[C].x-A.position.x)*.8,A.position.y+(A.vertices[C].y-A.position.y)*.8)}}},i.mousePosition=function(x,S,_){var w=_;w.fillStyle="rgba(255,255,255,0.8)",w.fillText(S.position.x+"  "+S.position.y,S.position.x+5,S.position.y-5)},i.bodyBounds=function(x,S,_){var w=_;x.engine;var P=x.options;w.beginPath();for(var C=0;C<S.length;C++){var k=S[C];if(k.render.visible)for(var T=S[C].parts,A=T.length>1?1:0;A<T.length;A++){var L=T[A];w.rect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}P.wireframes?w.strokeStyle="rgba(255,255,255,0.08)":w.strokeStyle="rgba(0,0,0,0.1)",w.lineWidth=1,w.stroke()},i.bodyAxes=function(x,S,_){var w=_;x.engine;var P=x.options,C,k,T,A;for(w.beginPath(),k=0;k<S.length;k++){var L=S[k],I=L.parts;if(L.render.visible)if(P.showAxes)for(T=I.length>1?1:0;T<I.length;T++)for(C=I[T],A=0;A<C.axes.length;A++){var R=C.axes[A];w.moveTo(C.position.x,C.position.y),w.lineTo(C.position.x+R.x*20,C.position.y+R.y*20)}else for(T=I.length>1?1:0;T<I.length;T++)for(C=I[T],A=0;A<C.axes.length;A++)w.moveTo(C.position.x,C.position.y),w.lineTo((C.vertices[0].x+C.vertices[C.vertices.length-1].x)/2,(C.vertices[0].y+C.vertices[C.vertices.length-1].y)/2)}P.wireframes?(w.strokeStyle="indianred",w.lineWidth=1):(w.strokeStyle="rgba(255, 255, 255, 0.4)",w.globalCompositeOperation="overlay",w.lineWidth=2),w.stroke(),w.globalCompositeOperation="source-over"},i.bodyPositions=function(x,S,_){var w=_;x.engine;var P=x.options,C,k,T,A;for(w.beginPath(),T=0;T<S.length;T++)if(C=S[T],!!C.render.visible)for(A=0;A<C.parts.length;A++)k=C.parts[A],w.arc(k.position.x,k.position.y,3,0,2*Math.PI,!1),w.closePath();for(P.wireframes?w.fillStyle="indianred":w.fillStyle="rgba(0,0,0,0.5)",w.fill(),w.beginPath(),T=0;T<S.length;T++)C=S[T],C.render.visible&&(w.arc(C.positionPrev.x,C.positionPrev.y,2,0,2*Math.PI,!1),w.closePath());w.fillStyle="rgba(255,165,0,0.8)",w.fill()},i.bodyVelocity=function(x,S,_){var w=_;w.beginPath();for(var P=0;P<S.length;P++){var C=S[P];if(C.render.visible){var k=a.getVelocity(C);w.moveTo(C.position.x,C.position.y),w.lineTo(C.position.x+k.x,C.position.y+k.y)}}w.lineWidth=3,w.strokeStyle="cornflowerblue",w.stroke()},i.bodyIds=function(x,S,_){var w=_,P,C;for(P=0;P<S.length;P++)if(S[P].render.visible){var k=S[P].parts;for(C=k.length>1?1:0;C<k.length;C++){var T=k[C];w.font="12px Arial",w.fillStyle="rgba(255,255,255,0.5)",w.fillText(T.id,T.position.x+10,T.position.y-10)}}},i.collisions=function(x,S,_){var w=_,P=x.options,C,k,T,A;for(w.beginPath(),T=0;T<S.length;T++)if(C=S[T],!!C.isActive)for(k=C.collision,A=0;A<C.activeContacts.length;A++){var L=C.activeContacts[A],I=L.vertex;w.rect(I.x-1.5,I.y-1.5,3.5,3.5)}for(P.wireframes?w.fillStyle="rgba(255,255,255,0.7)":w.fillStyle="orange",w.fill(),w.beginPath(),T=0;T<S.length;T++)if(C=S[T],!!C.isActive&&(k=C.collision,C.activeContacts.length>0)){var R=C.activeContacts[0].vertex.x,E=C.activeContacts[0].vertex.y;C.activeContacts.length===2&&(R=(C.activeContacts[0].vertex.x+C.activeContacts[1].vertex.x)/2,E=(C.activeContacts[0].vertex.y+C.activeContacts[1].vertex.y)/2),k.bodyB===k.supports[0].body||k.bodyA.isStatic===!0?w.moveTo(R-k.normal.x*8,E-k.normal.y*8):w.moveTo(R+k.normal.x*8,E+k.normal.y*8),w.lineTo(R,E)}P.wireframes?w.strokeStyle="rgba(255,165,0,0.7)":w.strokeStyle="orange",w.lineWidth=1,w.stroke()},i.separations=function(x,S,_){var w=_,P=x.options,C,k,T,A,L;for(w.beginPath(),L=0;L<S.length;L++)if(C=S[L],!!C.isActive){k=C.collision,T=k.bodyA,A=k.bodyB;var I=1;!A.isStatic&&!T.isStatic&&(I=.5),A.isStatic&&(I=0),w.moveTo(A.position.x,A.position.y),w.lineTo(A.position.x-k.penetration.x*I,A.position.y-k.penetration.y*I),I=1,!A.isStatic&&!T.isStatic&&(I=.5),T.isStatic&&(I=0),w.moveTo(T.position.x,T.position.y),w.lineTo(T.position.x+k.penetration.x*I,T.position.y+k.penetration.y*I)}P.wireframes?w.strokeStyle="rgba(255,165,0,0.5)":w.strokeStyle="orange",w.stroke()},i.inspector=function(x,S){x.engine;var _=x.selected,w=x.render,P=w.options,C;if(P.hasBounds){var k=w.bounds.max.x-w.bounds.min.x,T=w.bounds.max.y-w.bounds.min.y,A=k/w.options.width,L=T/w.options.height;S.scale(1/A,1/L),S.translate(-w.bounds.min.x,-w.bounds.min.y)}for(var I=0;I<_.length;I++){var R=_[I].data;switch(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.9)",S.setLineDash([1,2]),R.type){case"body":C=R.bounds,S.beginPath(),S.rect(Math.floor(C.min.x-3),Math.floor(C.min.y-3),Math.floor(C.max.x-C.min.x+6),Math.floor(C.max.y-C.min.y+6)),S.closePath(),S.stroke();break;case"constraint":var E=R.pointA;R.bodyA&&(E=R.pointB),S.beginPath(),S.arc(E.x,E.y,10,0,2*Math.PI),S.closePath(),S.stroke();break}S.setLineDash([]),S.translate(-.5,-.5)}x.selectStart!==null&&(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.6)",S.fillStyle="rgba(255,165,0,0.1)",C=x.selectBounds,S.beginPath(),S.rect(Math.floor(C.min.x),Math.floor(C.min.y),Math.floor(C.max.x-C.min.x),Math.floor(C.max.y-C.min.y)),S.closePath(),S.stroke(),S.fill(),S.translate(-.5,-.5)),P.hasBounds&&S.setTransform(1,0,0,1,0,0)};var p=function(x,S){var _=x.engine,w=x.timing,P=w.historySize,C=_.timing.timestamp;w.delta=S-w.lastTime||i._goodDelta,w.lastTime=S,w.timestampElapsed=C-w.lastTimestamp||0,w.lastTimestamp=C,w.deltaHistory.unshift(w.delta),w.deltaHistory.length=Math.min(w.deltaHistory.length,P),w.engineDeltaHistory.unshift(_.timing.lastDelta),w.engineDeltaHistory.length=Math.min(w.engineDeltaHistory.length,P),w.timestampElapsedHistory.unshift(w.timestampElapsed),w.timestampElapsedHistory.length=Math.min(w.timestampElapsedHistory.length,P),w.engineElapsedHistory.unshift(_.timing.lastElapsed),w.engineElapsedHistory.length=Math.min(w.engineElapsedHistory.length,P),w.elapsedHistory.unshift(w.lastElapsed),w.elapsedHistory.length=Math.min(w.elapsedHistory.length,P)},m=function(x){for(var S=0,_=0;_<x.length;_+=1)S+=x[_];return S/x.length||0},y=function(x,S){var _=document.createElement("canvas");return _.width=x,_.height=S,_.oncontextmenu=function(){return!1},_.onselectstart=function(){return!1},_},v=function(x){var S=x.getContext("2d"),_=window.devicePixelRatio||1,w=S.webkitBackingStorePixelRatio||S.mozBackingStorePixelRatio||S.msBackingStorePixelRatio||S.oBackingStorePixelRatio||S.backingStorePixelRatio||1;return _/w},b=function(x,S){var _=x.textures[S];return _||(_=x.textures[S]=new Image,_.src=S,_)},M=function(x,S){var _=S;/(jpg|gif|png)$/.test(S)&&(_="url("+S+")"),x.canvas.style.background=_,x.canvas.style.backgroundSize="contain",x.currentBackground=S}})()},function(s,r,n){var i={};s.exports=i;var a=n(5),l=n(17),h=n(0);(function(){var d,c;if(typeof window<"u"&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,c=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!d){var g;d=function(f){g=setTimeout(function(){f(h.now())},1e3/60)},c=function(){clearTimeout(g)}}i.create=function(f){var o={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},u=h.extend(o,f);return u.delta=u.delta||1e3/u.fps,u.deltaMin=u.deltaMin||1e3/u.fps,u.deltaMax=u.deltaMax||1e3/(u.fps*.5),u.fps=1e3/u.delta,u},i.run=function(f,o){return typeof f.positionIterations<"u"&&(o=f,f=i.create()),function u(p){f.frameRequestId=d(u),p&&f.enabled&&i.tick(f,o,p)}(),f},i.tick=function(f,o,u){var p=o.timing,m;f.isFixed?m=f.delta:(m=u-f.timePrev||f.delta,f.timePrev=u,f.deltaHistory.push(m),f.deltaHistory=f.deltaHistory.slice(-f.deltaSampleSize),m=Math.min.apply(null,f.deltaHistory),m=m<f.deltaMin?f.deltaMin:m,m=m>f.deltaMax?f.deltaMax:m,f.delta=m);var y={timestamp:p.timestamp};a.trigger(f,"beforeTick",y),f.frameCounter+=1,u-f.counterTimestamp>=1e3&&(f.fps=f.frameCounter*((u-f.counterTimestamp)/1e3),f.counterTimestamp=u,f.frameCounter=0),a.trigger(f,"tick",y),a.trigger(f,"beforeUpdate",y),l.update(o,m),a.trigger(f,"afterUpdate",y),a.trigger(f,"afterTick",y)},i.stop=function(f){c(f.frameRequestId)},i.start=function(f,o){i.run(f,o)}})()},function(s,r,n){var i={};s.exports=i;var a=n(8),l=n(0),h=l.deprecated;(function(){i.collides=function(d,c){return a.collides(d,c)},h(i,"collides","SAT.collides  replaced by Collision.collides")})()},function(s,r,n){var i={};s.exports=i,n(1);var a=n(0);(function(){i.pathToVertices=function(l,h){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,c,g,f,o,u,p,m,y,v,b=[],M,x,S=0,_=0,w=0;h=h||15;var P=function(k,T,A){var L=A%2===1&&A>1;if(!y||k!=y.x||T!=y.y){y&&L?(M=y.x,x=y.y):(M=0,x=0);var I={x:M+k,y:x+T};(L||!y)&&(y=I),b.push(I),_=M+k,w=x+T}},C=function(k){var T=k.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":_=k.x,w=k.y;break;case"H":_=k.x;break;case"V":w=k.y;break}P(_,w,k.pathSegType)}};for(i._svgPathToAbsolute(l),g=l.getTotalLength(),u=[],d=0;d<l.pathSegList.numberOfItems;d+=1)u.push(l.pathSegList.getItem(d));for(p=u.concat();S<g;){if(v=l.getPathSegAtLength(S),o=u[v],o!=m){for(;p.length&&p[0]!=o;)C(p.shift());m=o}switch(o.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=l.getPointAtLength(S),P(f.x,f.y,0);break}S+=h}for(d=0,c=p.length;d<c;++d)C(p[d]);return b},i._svgPathToAbsolute=function(l){for(var h,d,c,g,f,o,u=l.pathSegList,p=0,m=0,y=u.numberOfItems,v=0;v<y;++v){var b=u.getItem(v),M=b.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(M))"x"in b&&(p=b.x),"y"in b&&(m=b.y);else switch("x1"in b&&(c=p+b.x1),"x2"in b&&(f=p+b.x2),"y1"in b&&(g=m+b.y1),"y2"in b&&(o=m+b.y2),"x"in b&&(p+=b.x),"y"in b&&(m+=b.y),M){case"m":u.replaceItem(l.createSVGPathSegMovetoAbs(p,m),v);break;case"l":u.replaceItem(l.createSVGPathSegLinetoAbs(p,m),v);break;case"h":u.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(p),v);break;case"v":u.replaceItem(l.createSVGPathSegLinetoVerticalAbs(m),v);break;case"c":u.replaceItem(l.createSVGPathSegCurvetoCubicAbs(p,m,c,g,f,o),v);break;case"s":u.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(p,m,f,o),v);break;case"q":u.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(p,m,c,g),v);break;case"t":u.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(p,m),v);break;case"a":u.replaceItem(l.createSVGPathSegArcAbs(p,m,b.r1,b.r2,b.angle,b.largeArcFlag,b.sweepFlag),v);break;case"z":case"Z":p=h,m=d;break}(M=="M"||M=="m")&&(h=p,d=m)}}})()},function(s,r,n){var i={};s.exports=i;var a=n(6);n(0),function(){i.create=a.create,i.add=a.add,i.remove=a.remove,i.clear=a.clear,i.addComposite=a.addComposite,i.addBody=a.addBody,i.addConstraint=a.addConstraint}()}])})})(is);var q=is.exports;function ur(e){let t;return{c(){t=us("div"),fs(t,"id","canvas-container")},m(s,r){ds(s,t,r)},p:le,i:le,o:le,d(s){s&&ps(t)}}}function fr(e){let t=q.Engine.create(),s=t.world;return console.log("engine",t),q.Render.create({element:document.body,engine:t}),gs(async()=>{const r=document.getElementById("canvas-container"),n=r.offsetWidth;r.offsetHeight;var i=new He;await Oi(window.innerWidth),await i.init({transparent:!0,resizeTo:r}),document.getElementById("canvas-container")?.appendChild(i.canvas);let a=new Pi("Hello World how are you",{fontFamily:"Arial",fontSize:24,fill:"red",align:"center"});a.x=i.screen.width/2,a.y=300,a.anchor.set(.5),i.stage.addChild(a);let l=new Pi("Goodbye World",{fontFamily:"Comic Sans MS",fontSize:24,fill:"red",align:"center"});l.x=i.screen.width/2+50,l.y=350,l.anchor.set(.5),i.stage.addChild(l);let h=q.Bodies.rectangle(a.x,300,a.width,a.height,{render:{fillStyle:"blue"}});q.Body.rotate(h,Math.PI/4);let d=q.Bodies.rectangle(l.x,300,l.width,l.height,{render:{fillStyle:"blue"}});q.Body.rotate(d,Math.PI/3),q.World.addBody(s,h),q.World.addBody(s,d);const c=q.Bodies.rectangle(n/2,500,n,10,{isStatic:!0,render:{fillStyle:"red",strokeStyle:"red",lineWidth:1}});q.World.addBody(s,c),i.ticker.add(f=>{a.y=h.position.y,a.x=h.position.x,a.rotation=h.angle,l.y=d.position.y,l.x=d.position.x,l.rotation=d.angle});const g=q.MouseConstraint.create(t,{mouse:q.Mouse.create(document.getElementById("canvas-container"))});q.World.add(t.world,g),q.Engine.run(t)}),[]}class dr extends ls{constructor(t){super(),hs(this,t,fr,ur,cs,{})}}const mr=Object.freeze(Object.defineProperty({__proto__:null,default:dr},Symbol.toStringTag,{value:"Module"}));export{Ve as A,fn as B,rt as C,lt as D,ot as E,Fs as F,te as G,Nn as H,se as I,tt as J,Jn as K,We as L,O as M,$ as N,st as O,J as P,yi as Q,Xi as R,tn as S,U as T,oi as U,ee as V,Ue as W,mr as X,Ot as a,Ht as b,mt as c,hn as d,Vn as e,ie as f,Z as g,rn as h,et as i,$s as j,xt as k,It as l,Wt as m,ji as n,un as o,Jt as p,Ks as q,ms as r,li as s,Xs as t,ut as u,Rt as v,ct as w,G as x,z as y,Qn as z};
